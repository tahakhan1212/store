(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8315],{80909:function(e,t,n){var r=n(30641),a=n(38329)(r);e.exports=a},30641:function(e,t,n){var r=n(86649),a=n(95950);e.exports=function(e,t){return e&&r(e,t,a)}},5128:function(e,t,n){var r=n(80909),a=n(64894);e.exports=function(e,t){var n=-1,s=a(e)?Array(e.length):[];return r(e,(function(e,r,a){s[++n]=t(e,r,a)})),s}},46155:function(e,t,n){var r=n(34932),a=n(47422),s=n(15389),o=n(5128),i=n(73937),c=n(27301),l=n(43714),u=n(83488),m=n(56449);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return m(e)?function(t){return a(t,1===e.length?e[0]:e)}:e})):[u];var d=-1;t=r(t,c(s));var p=o(e,(function(e,n,a){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return i(p,(function(e,t){return l(e,t,n)}))}},73937:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},53730:function(e,t,n){var r=n(44394);e.exports=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,s=e==e,o=r(e),i=void 0!==t,c=null===t,l=t==t,u=r(t);if(!c&&!u&&!o&&e>t||o&&i&&l&&!c&&!u||a&&i&&l||!n&&l||!s)return 1;if(!a&&!o&&!u&&e<t||u&&n&&s&&!a&&!o||c&&n&&s||!i&&s||!l)return-1}return 0}},43714:function(e,t,n){var r=n(53730);e.exports=function(e,t,n){for(var a=-1,s=e.criteria,o=t.criteria,i=s.length,c=n.length;++a<i;){var l=r(s[a],o[a]);if(l)return a>=c?l:l*("desc"==n[a]?-1:1)}return e.index-t.index}},38329:function(e,t,n){var r=n(64894);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var s=n.length,o=t?s:-1,i=Object(n);(t?o--:++o<s)&&!1!==a(i[o],o,i););return n}}},42877:function(e,t,n){var r=n(46155),a=n(56449);e.exports=function(e,t,n,s){return null==e?[]:(a(t)||(t=null==t?[]:[t]),a(n=s?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},32893:function(e){e.exports={wrap:"_3mw8ps2R",content:"_3CaSeiTi",click:"_1vMQptd7",endTimeInfo:"_1t7j7Ogs",entTimeWrap:"_11SyvK5W",activityText:"_1X6a6b2l",frameStyleText:"_3SGtxaSO",divider:"_1eOoxUiu",entTime:"_2vRxhmmd",entTimeText:"_2jj6RMAJ",entTimeRichText:"_2NAMyIC_",arrow:"_3FQv0M3-",frameStyleArrow:"_3lAPIi8-",endTimeImage:"_2Reeuq-g",activityMarkImage:"_3LgctZDb",activityIcon:"_2Y_cD7Mn",activityTipsText:"_2mNqubKt",activityV2:"TqqJOn3f",activityV2Name:"_89kC5rvl",activityV2Left:"_1OFNHpsF",activityV2Rgiht:"_3Irk2Hvt",right:"_2BvOMtJC",sideText:"_3lOSd_IQ",clockWrap:"_30-8u6L5",clockBg:"_1XUAPsJS",clock:"_3KxyQ-NS",clockAnimation:"_2mrenqV5",clockTranslate:"_212G8cV4",clockNotAnimation:"_3wnLSpwD",clockImg:"_3R5A_DQp",clockInner:"_307n160J",clockInnerAnimation:"_3uBNk5M0",clockInnerWidth:"_1blhGn_F",clockInnerNotAnimation:"_2nSN1xLV",afterName:"_19Eimdjg"}},9699:function(e){e.exports={wrap:"_2nVeyNCz",content:"_2QQEVpBZ",child:"_1thUmrmy",banner:"oa4Sfigi",newBanner:"_2jbucvNr"}},11739:function(e){e.exports={wrap:"_1e6SxiFg",content:"oSFF9xFn",left:"_39-Z_XCE",right:"_2er5qYGw",firstLine:"_2iyHIkRg",bar:"_1M8fSbsU",innerBar:"_1bdjv-Kz",isFinish:"_1oqIjReU",clickStatus:"_2xaCqp4R",img:"_3dJvoXs9"}},64018:function(e){e.exports={entry:"_20k621be",container:"_1_XBJEUA",explainIcon:"_22sEeLM-",linePriceExplain:"_3ygWP2Nw",title:"_2BXEOOZ6",priceRichItem:"d6YtcpXw",tipsContent:"_3mtOcbQ1",tipsContentItem:"_2ITA9wZj",tipsLink:"_3CS1LCeY"}},22780:function(e){e.exports={wrap:"_1dSkmEAs",animate:"_2wdCn209",flash:"_3t97fVtc"}},86967:function(e){e.exports={btn:"_14nNQcmk",btnText:"_2y4qpjEX",buttonTextStyle12:"_2Y-M53cW",buttonTextStyle3:"_1ODocA1H",buttonTextStyle4:"p1YIuRXH",flashContainer:"_1gKmzUCE"}},3759:function(e){e.exports={item:"_1qiC-ts4",quickLook:"_3EFWfiZf",isSelected:"_33vMhCHJ",showQuickLook:"_3qUazrGE",normalItem:"_2hOY2DLW",normalPrice:"_1reQpvf_",unit:"_2ounmtZq",goodsImg:"_29lmgcqa",saleInfo:"_2ehSg6gL",goodsName:"_3nvsmvXt"}},76737:function(e){e.exports={container:"_3axfhCC5",head:"_2u2DMXf-",goodsList:"_3FLeY3Ws",regularGoodsList:"dQRNBuQN",bottomBtn:"_2dPs2jct",none:"_Dkzco0u"}},12707:function(e){e.exports={wrap:"_10071P6-",title:"_3RvpUidt",titleText:"_3BQzvQW0",seeMore:"_139ztZYj",showQuickLook:"_3R4fvi00",quickLook:"_25gYedk6",goodsItem:"_2kvY6kYI",quicklookContainer:"_2-s2kGDL",quicklookContentCls:"_3tbUgXgB",goodsInfo:"fqy6l4w_",saleInfo:"_26GgQS6E",cartIcon:"AgiNbPCU",addCartBtn:"_3glKuMcI",addCartBtnText:"_2wPxSt2m",addCartBadge:"_2IfyHUET",imgWrap:"_3r6wYQVP",goodsName:"_1B6RiKs5",titleArrowIcon:"_2jWueI66",arrow:"_2-KOT4u7",leftArrow:"_3iysU4Cu",baseArrowBtn:"qXUpwQYG",rightArrow:"ExAxSHyZ",arrowMask:"zWVYvrez",rich:"_3PZNRSzh",localWarehouse:"_3t7nsJfx"}},80518:function(e){e.exports={multiContainer:"_3DE9xULq",containerHeight:"KwvjoamC",scrollWrap:"_1ZdJTzgd",wrap:"_3ydKWX49",rich:"_3oAgBq8u",icon:"_2b5YoVhb",right:"_2vXGLiQj",text:"vQZEOqdG",clickStatus:"_3WILGMO5"}},98949:function(e){e.exports={wrap:"SojPWr4U",textarea:"jOoDzKd7",count:"Qw-Cj2Vb",textLength:"_21TXP6Ge"}},71042:function(e){e.exports={wrap:"_3KWq0SSC",operateArea:"if0yj5fa",missingUrl:"_6aMQhGzW",imgDimensionInvalid:"_1q3Ti9wQ",uploadIcon:"_3LKR4oQG",uploadText:"_2ToLWidc",optional:"_1jpFyUIY",preview:"_27OzQJxa",previewClose:"_1AY_4670",closeIcon:"jP7q84N4",failMask:"_3Uwjpuey",failMaskNotice:"_1a_hzeOV",failMaskBtn:"_1zsLJct_",btnInner:"_3P2A2aAM",progress:"_1NLRPPrD",previewImg:"_3-znvXUo",imgDimension:"_1juzz_rD"}},91684:function(e){e.exports={wrap:"_3itiye6N",noticeText:"_1u5AKxkd",noticeTextIcon:"_20JvY_7-",imgs:"qhSLnakH",title:"ztg8wqzh",noticeWrap:"npFqKjQP"}},79746:function(e){e.exports={wrap:"eN29zfen",imgs:"_2maLpzdb",title:"_2uUSRS4i",color:"_3zLf6cSh",item:"l-sl5EQi",itemActive:"_3T2-_bgM"}},45030:function(e){e.exports={wrap:"_1x-8XBaR",textInputWarp:"_2c5vgNu5",focusClassName:"_3PQ6oAnA",title:"_1hn-qoJH",star:"_1Bau-_O4",operateArea:"_2-VOn31x",error:"ijzsGZSb",notice:"beZOIUT_",noticeText:"_3Wlayx0V",noticeTextIcon:"_2JOD8BWw"}},18906:function(e){e.exports={uploadImg:"cy2HMZVC",imgWrap:"VNiLyQit"}},5676:function(e){e.exports={uploadText:"_2jJATp1S",textWrap:"_2mr0nj_t"}},18298:function(e){e.exports={region:"_3oMh_0BI",idxTag:"_3RHQRqsk",overflowNotice:"LEv9fg7f",overflowNoticeText:"_2hki7hPH"}},60725:function(e){e.exports={wrap:"_1zvT30L6",img:"_1m2Il_Kw",canvasArea:"q982tu46",textWrap:"o5tW_URR",baseBottom:"_3bhAjXqK",topImg:"_2k0syFf8",bottomImg:"_13VP5VoW",overflowNotice:"_1fAN5LR2",overflowNoticeText:"o32r7Hcp",maskImg:"RWIh9IYH"}},22703:function(e){e.exports={resizer:"_15BMMUqB",pointer:"_2Dmt-5Ie",pointerEnhance:"_2rDyUxgK",topLeft:"_14_vl0lb",topRight:"_2xOcJCiR",bottomLeft:"_1tZ3Jxk6",bottomRight:"_1IcUGwc3",dragPointer:"fqeFzUi0",rotateIcon:"EDT8wf6k"}},65580:function(e){e.exports={content:"_32JxRciS",contentMinHeight:"_2rPctB5d",addCartBtn:"_1i84dcbG",btnWrap:"_3_s6WNDs",left:"E6liwerB",right:"_3qC412B0",leftTitle:"bOqbebpv",sensitiveUnderline:"UpIsiioM",sensitiveTips:"_31r1DfqL"}},83464:function(e){e.exports={wrap:"_2aMrWeZK",mask:"_3ySKXAcN",title:"oTffqYet",titleDesc:"_2AOH6jA4",popup:"_2S1gSudx",content:"a6ZkkU-E"}},82856:function(e){e.exports={wrap:"kG72lr5d",title:"_1Ht0VvyY",content:"_1PttWun-",contentNormal:"_2iLNpCx9",contentActive:"_2KHUPIFg",btnWrapper:"_2My4mluJ",btn:"_2qgI44e0"}},6278:function(e){e.exports={container:"_2WqgSypJ",clickable:"_2a4ERvzW",richText:"_1-BCsyzb",arrow:"_28t9Co-y",v3Wrap:"_1acJod2D",v3WrapClickable:"_3wQACGmO",v3Suffix:"_2UALhOos",v3Arrow:"_3TwSIazI",v3Prefix:"_1ZSNHiPn",rankExplainDialog:"_2AmsNKCp",explainEntry:"YJB-0J2M"}},48218:function(e){e.exports={wrap:"_2vhzyycG"}},41819:function(e){e.exports={wrap:"HgJ5y2zK",table:"_3IDS01FH",columm:"riiFElz_",activeCol:"aKMrRi69",activeRow:"_2epz2s8n",activeItem:"_2qXiox6w",cell:"_1YWi7SyF",content:"_3_-vjBNF",tr:"_3HCkczKw",headerLine:"_11DThmub",tableHeader:"sZ3WN7sy",tableHeaderTitle:"_1EQENvRW",measureText:"_2m4wgA5D",measureIcon:"ggaMltm2"}},41637:function(e){e.exports={bodyMeasurement:"_1p5ZJpM1",marginTop:"_1oL2sJE_",desc:"_3PAVlcmD",descIcon:"_3KGStLcD",tipIcon:"_1nksnMbA"}},64138:function(e){e.exports={wrap:"_2fmA_Brm",title:"_1b5Qw6BE",content:"_3i22wXlK",scroll:"_32Wuu9L8",label:"FCerqlrP",desc:"_3K1UJf2O",info:"aRrN75zQ",imgWrap:"_1kwtO0sX"}},90368:function(e){e.exports={wrap:"_1PYZ8rSj",right:"_30bw1F1Y",avatar:"_3eCPPfLq",sizeDesc:"_1rzee65b",item:"_1jMIuLjB",bodyDesc:"xTek6y55"}},67591:function(e){e.exports={productDetails:"_2k-_-2xO",marginTop:"_2oIV-b-B",suitWrap:"_2zPr8rwu",baseChoiceBtns:"_2iAoduPX",baseChoiceBtn:"c3QCKVfb",selected:"_1UF3RZma",tip:"_31iCpk3s",tipIcon:"m3ibik8s"}},95352:function(e){e.exports={wrap:"_3xy3pxs3",container:"T_o_oUZK",title:"tp59JoEF",list:"_1W0Bh9mw",anchor:"_2VLTSheo",item:"_343rDyB9",content:"_2wqQmeHH",line:"jaDQ5hfu",activeItem:"_3IuW1Dry"}},66709:function(e){e.exports={wrap:"hPbD-b9Z",right:"dC8Jb9n8",unitWrap:"caD-YJpr",entryCls:"_2p4LXx8K"}},63521:function(e){e.exports={wrap:"_16yUh-rZ",entry:"_2nNPlYdS",content:"_2rPQmclW",activeSize:"_1Je0Tnte",arrow:"_3tkOMs-H",activeArrow:"-w3B-3yH",list:"_2-GvWH7L",listItem:"_3HNGApgq",activeItem:"_2z7tF16_",selectedIcon:"_1PmDPET8",suffix:"Y7glkg5y"}},61504:function(e){e.exports={wrap:"_3pIzOXvk",modelTryOn:"_3UPv6VGw",SizeDistribution:"_2XpStoNA",bodyDescCls:"_1A_tQAFx",sizeDescCls:"_3MgNkGNU",line:"_28Gu5S-8"}},24096:function(e){e.exports={content:"_3EU5xDVW",recommendedSize:"_1Fvpe2Oj",unavailableSize:"_2X3HP-rj",eidtBox:"_32en8efB",editInfo:"_35fJBJ5s",editBtn:"_2yFCipr-",editIcon:"_1zhg_QlG",upper:"_3zLEK2Tp",mearsurementName:"-MVHsIZh"}},12362:function(e){e.exports={wrap:"W_zu69Pk",table:"bRjzBxjb",firstCol:"_3nxLHzoz",columm:"_2UKOePr3",cell:"_2WLHLy8t",content:"nCVxH_NI",tr:"r7N3_T-5",activeCol:"gC89Qdd4",activeRow:"_28BKANca",activeItem:"_2QJ_HAI7"}},7981:function(e){e.exports={content:"_10bQ7uS7",sizeDescSection:"_2x1nlJ5S",leftText:"_2oZYhbcq",leftTextName:"dFW0SQHN",leftTextDesc:"_2vpcsgAs",btns:"_2qYNx5NV",btn:"_2ocDekDQ",btnLeft:"_3J7XRWgx",btnRight:"_21NLIU5j",selected:"_1bFVo5Lu",userSizesSection:"_3I0XRbhs",userSizesSelection:"_2jMGfZ5Z",usItem:"_22eFlyA_",userSizesSubmit:"_1YG6xWC3",usTitle:"_341putUp",selectCountContent:"_1raR6mWy",selectList:"_1EEBRvik",selectItem:"_6LdBI76x",learnMore:"a6VqdLyQ",learnText:"_3FQfxWhN",arrowIcon:"-sFwL9XD"}},81783:function(e){e.exports={wrap:"s21vBvyJ",content:"_3-rPCjUd",title:"_2lbrmrwt",info:"_2-8LKflk",label:"_2Vfm2mYX",desc:"aAzYNJFe",imgWrap:"_33YqpTPV"}},68419:function(e){e.exports={wrap:"IoshMa4i",disabled:"_3tVv2hHk",currentVal:"_29kOwCha",unselected:"_2l2Av1wt",arrow:"_1EKUqNLr",arrowIcon:"_3-9D_m5Q",activeArrowIcon:"_1CNsdfEx",list:"_3GORlf5S",listInnerCls:"_3KEtqoZm",listContent:"rRsguONk",selectItem:"_1bXSPwty",selectedItem:"_2-B-pR5B"}},21657:function(e){e.exports={wrap:"CL2zS-oz",title:"_2VaZms3u",desc:"_3IzP9ve5",link:"_2CCq3WNz",btn:"_3CnvxUth"}},65200:function(e){e.exports={wrap:"kJ0WL5aD",titleWrap:"_11Twv6fY",tabTitle:"xHaURlRq",singleTitle:"_3NSTlsB2",active:"st_MTouR",content:"aG1By3pG",tabContent:"zw4SefNx",contentActive:"_2VR59h_u",error:"_3rM5cJ_2"}},58600:function(e){e.exports={align:"_2h7fb3b9"}},14623:function(e){e.exports={progress:"WBuBiDES",graphOuter:"_3jIrdFLR",graphInner:"_8qktIcss"}},41722:function(e){e.exports={goodsInfo:"_3OO09lOB",flexContainer:"s-OSTRRG",cartIcon:"_2d4W16Wq",goodsSaleInfo:"_86Uu8KY6"}},34933:function(e){e.exports={wrap:"_3Vcd6clk",starListWrap:"_2-XzUcvc",hoverWrap:"_1erEkd-a",inputHoverStar:"_3juQw79X",starImg:"_2m4Oppts",starWrap:"c7kc-GTB",empty:"_3jrhQHf8",lightStarWrap:"_1sZMk-1V",num:"_3jADCcd3",clickable:"_3kUP3d51",isHover:"_3iSRoxfg",hoverStar:"_1wPCYsio",active:"_2ovrdPWS",star:"_3Jra8kwT"}},35554:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#0a8800"},e,{path:["M728.8 689.7c53.8 0 97.5 43.7 97.5 97.7 0 53.9-43.6 97.6-97.5 97.6-53.8 0-97.5-43.7-97.4-97.6 0-53.9 43.6-97.6 97.4-97.7z m-460.7 0c53.8 0 97.5 43.7 97.4 97.7 0 53.9-43.6 97.6-97.4 97.6-53.8 0-97.5-43.7-97.5-97.6 0-53.9 43.6-97.6 97.5-97.7z m362.3-543.4c59.4-0.5 108.1 47.2 108.6 106.6l0 52.7 42.3 0.2c92.6 0.3 167.7 75.1 168.2 167.7l1.3 201.8c0.3 43.7-34.1 79.6-77.4 81.5-12.9-64.2-67.3-113.2-134-118l-0.4-176.8 0.1 176.8c-3.4-0.2-6.8-0.4-10.3-0.4-71.8 0-131.7 51.3-144.9 119.4l-171.1 1.5c-13.7-67.4-73.3-118-144.7-118-70.1 0-128.9 48.9-144 114.5-29.7-11.7-50.7-40.5-51-74.4l0-449.7c0-44.5 35.8-80.6 80.3-81.1l477-4.3z m-111 79.9l-140.8 0c-5.9 0-11.2 3.4-13.3 8.6l-76.5 190.9c-0.6 1.5-0.9 3.1-0.9 4.7 0 7.4 6.3 13.3 14.2 13.3l88.3 0-37.3 131.4c-1.3 4.7 0.2 9.8 4 13.1 5.7 5 14.7 4.8 20-0.6l210.8-210.2c2.5-2.5 3.9-5.7 3.8-9.1 0-7.4-6.3-13.3-14.2-13.4l-96.3 0 51.2-110.1c0.8-1.7 1.2-3.5 1.2-5.3 0-7.4-6.3-13.3-14.2-13.3z"],"aria-label":e["aria-label"]??(i.exists("aria-label.PindaoBenben",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.PindaoBenben"):void 0),rtlPath:["M295.2 689.7c-53.8 0-97.5 43.7-97.5 97.7 0 53.9 43.6 97.6 97.5 97.6 53.8 0 97.5-43.7 97.4-97.6 0-53.9-43.6-97.6-97.4-97.7z m460.7 0c-53.8 0-97.5 43.7-97.5 97.7 0 53.9 43.6 97.6 97.5 97.6 53.8 0 97.5-43.7 97.5-97.6 0-53.9-43.6-97.6-97.5-97.7z m-362.4-543.4c-59.4-0.5-108.1 47.2-108.6 106.6l0 52.7-42.2 0.2c-92.6 0.3-167.7 75.1-168.3 167.7l-1.3 201.8c-0.3 43.7 34.1 79.6 77.4 81.5 12.9-64.2 67.3-113.2 134.1-118l0.3-176.8 0 176.8c3.4-0.2 6.8-0.4 10.3-0.4 71.8 0 131.7 51.3 144.9 119.4l171.1 1.5c13.7-67.4 73.3-118 144.7-118 70.1 0 128.9 48.9 143.9 114.5 29.7-11.7 50.7-40.5 51-74.4l0-449.7c0-44.5-35.8-80.6-80.2-81.1l-477.1-4.3z m129.5 79.9l140.8 0c7.8 0 14.2 6 14.2 13.3 0 1.8-0.4 3.7-1.2 5.3l-51.2 110.1 96.3 0c7.8 0 14.2 6 14.2 13.4 0 3.4-1.4 6.7-3.8 9.1l-210.8 210.2c-5.4 5.4-14.4 5.6-20 0.6-3.8-3.4-5.3-8.4-4-13.1l37.3-131.4-88.4 0c-7.8 0-14.2-6-14.2-13.3 0-1.6 0.3-3.2 0.9-4.7l76.6-190.9c2.1-5.2 7.4-8.6 13.3-8.6z"]}))}));i.supportRtl=!0,t.A=i},30024:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#000000"},e,{path:["M512 793.3l-236.1 169c-23 16.5-55 11.2-71.4-11.9-9.4-13.1-12-29.9-7.2-45.3l87.8-276.7-233.6-172.3c-22.8-16.8-27.6-48.8-10.9-71.6 9.6-13 24.7-20.7 40.9-20.8l290.2-2 91.7-275.5c8.9-26.8 37.9-41.3 64.8-32.4 15.3 5.1 27.3 17.1 32.4 32.4l91.7 275.5 290.2 2c28.3 0.2 51 23.3 50.9 51.6-0.1 16.1-7.8 31.3-20.9 40.8l-233.6 172.3 87.8 276.7c8.5 27-6.4 55.7-33.4 64.3-15.4 4.9-32.2 2.2-45.2-7.1l-236.1-169z"],"aria-label":e["aria-label"]??(i.exists("aria-label.PingfenxingxingShixing",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.PingfenxingxingShixing"):void 0),rtlPath:[]}))}));i.supportRtl=!1,t.A=i},50452:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#cdcdcd"},e,{path:["M506.4 11.3c279.7 0 506.4 226.7 506.3 506.3 0 279.7-226.7 506.4-506.3 506.4-279.7 0-506.4-226.7-506.4-506.4 0-279.7 226.7-506.4 506.4-506.3z m-10.4 675.1c-35 0-63.3 28.3-63.3 63.3 0 35 28.3 63.3 63.3 63.3 35 0 63.3-28.3 63.3-63.3 0-35-28.3-63.3-63.3-63.3z m6.5-496.8c-62.5 0-111.4 17.7-147.7 53.2-18.8 18-33.9 50.6-45.3 98-5.1 21.3 8 42.7 29.3 47.8 3 0.7 6.1 1.1 9.2 1.1 26.4 0 49.3-18.4 54.9-44.3 3.9-18 8.7-30.8 14.4-38.4 16-23.6 42.2-34.6 79.3-34.6 28.7 0 51.5 7.6 67.5 23.6 15.2 16 23.6 38 23.6 65.8 0 21.1-7.6 41.4-22.8 59.9l-10.1 11.8c-54.9 48.9-87.8 84.4-98.7 107.2-4.7 9-8.5 23.7-11.7 44.3-3.6 23.9 12.9 46.2 36.8 49.8 2.2 0.3 4.3 0.5 6.5 0.5 26.4 0 49.1-18.6 54.4-44.4 2-9.7 4.3-17.1 6.8-22.3 7.6-15.2 18.6-29.5 33.8-42.2 40.5-35.4 65-58.2 72.5-66.7 20.3-27 31.2-61.6 31.3-103.8 0-51.5-16.9-92-50.7-121.5-33.8-30.4-78.5-44.7-133.3-44.8z"],"aria-label":e["aria-label"]??(i.exists("aria-label.XibolaiyuTishiYiwen",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.XibolaiyuTishiYiwen"):void 0),rtlPath:[]}))}));i.supportRtl=!1,t.A=i},15610:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#000000"},e,{path:["M1407.8 166c3.2 3 6.2 6 9.2 9.2l606.4 642c117.3 124.2 277.9 197.8 447.8 206l31.9 0.8-2503.1 0c181.6 0 355.1-74.8 479.8-206.8l606.3-642c86.3-91.4 230.3-95.5 321.7-9.2z"],"aria-label":e["aria-label"]??(i.exists("aria-label.ZhanshiTipsjiantouhei",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.ZhanshiTipsjiantouhei"):void 0),rtlPath:[]}))}));i.supportRtl=!1,t.A=i},85778:function(e,t,n){"use strict";n.d(t,{A:function(){return x},M:function(){return h}});n(16280),n(44114);var r=n(23058),a=n(20162),s=n(11266),o=n(87969);var i=n(48983),c=n(76280),l=n(22284),u=n(96704),m=n(59252);var d=async e=>{const t=(()=>{const e=(0,u.x)();return e.stageStart("api"),e})(),n=await(0,m.Ay)(e);return(e=>{e&&(e.stageEnd("api"),e.end({name:"pc_shoppingcart_operate_cart_api"}))})(t),n},p=n(86214),f=n(54201),g=n(52793);const h={},y={},v=(e,t)=>{const{pageSn:n,pageElSn:r,clientCartScene:a,goodsId:s,skuId:o,operateType:i,fromNum:c,num:l,extraMap:u,customizedInfo:m,addSuccToastType:d,addSuccTipsType:p,disablePopAll:g,showButton:y,showPopup:v,checkoutFloatBenefitType:E,operateExtendMap:x}=e;return{page_sn:n,page_el_sn:r,goods_id:Number(s),sku_id:Number(o),from_num:c,num:l,operate_type:i,cart_data_type:1,extra_map:u||{},customized_info:"object"==typeof m?(0,f.qi)(m):m,cart_window_type:0,in_window:0,client_cart_scene:a,add_succ_toast_type:d,add_succ_tips_type:p,disable_pop_all:g,show_button:y??h?.showButton,show_popup:v??h?.showPopup??1,checkout_float_benefit_type:E??h?.checkoutFloatBenefitType,operate_extend_map:x,api_version:1}},E=(e,t,n)=>{const{result:c}=e||{},{success:u,toast:m,guideCleanWindowInfoV2:d,addSuccToast:p,addSuccExtra:h,checkoutInfo:y,skuDetail:v}=c||{},{ifForbidToast:E,forbidToastWhenPopup:x=[],successToast:I,failToast:_,ifToastLocateCenter:k,ifForbidCleanPopup:b,cleanPopupParams:w,cleanPopupOptions:S}=t||{},{pageSn:C,clientCartScene:N,goodsId:T,skuId:R,fromNum:A,num:z,operateType:M,customizedInfo:L}=n||{};let P;const D=d;let U=null;if(!u&&(P=g.U.REMOTE_FAILED,!b&&D&&"number"==typeof z&&"number"==typeof A)){const e={goods_id:T,sku_id:R,amount:1===M?z:z-A,is_selected:1,page_sn:C,cart_scene:N,customized_info:"object"==typeof L?(0,f.qi)(L):L,...w},t={...S,guideCleanWindowInfoV2:d,pageSn:C,bizLogScene:6};(0,s.A)(0,e,t)?U=o.n.FULL_CART_POPUP_V2:P=g.U.CLEAN_POPUP_FAILED}x.push(o.n.FULL_CART_POPUP_V2);const B=(()=>{const e=[];return(0,s.R)()&&e.push(o.n.FULL_CART_POPUP_V2),e})(),W="function"==typeof E&&!!E({openedPopupTypes:B,remoteData:c}),O="function"!=typeof E&&!!E,H=x.some((e=>e===U));if(!W&&!O&&!H){const e=k?r.A:a.A;if(u)if(p?.length)(0,i.A)(p,{ifToastLocateCenter:k,control:h,checkoutInfo:y,skuDetail:v});else{const t=m||I;t&&e.success(t)}else{const t=m||_;t&&e.error(t)}}return(0,l.A)({event:e?.success?u?"add_sku_succ":"add_sku_error":"add_sku_api_error",errorCode:c?.errorCode||e?.errorCode||0,errorMsg:e?.errorMsg,referPageSn:C,scene:6,eventType:3,extra:{params:n,errorCode:e?.errorCode,result:{toast:m,addSuccExtra:h,checkoutInfo:y}}}),{success:!P&&u,reason:P,remoteData:c,originRemoteData:e,openedPopupTypes:B.length?B:void 0}};var x=async(e,t)=>{if(!(e=>{const{pageSn:t,clientCartScene:n,goodsId:r,skuId:a,operateType:s,fromNum:o,num:i,customizedInfo:c}=e||{},u="number"==typeof o&&"number"==typeof i,m=1===s&&u&&0===o&&i>0||2===s&&u&&o>0&&i>0||3===s&&u&&o>0&&0===i,d=5===s&&!!c;if(!(t&&r&&a&&(m||d)&&n)){let o=100001;t?r&&a?[p.H.ADD,p.H.UPDATE,p.H.DELETE,p.H.UPDATE_CUSTOM].includes(s)?s!==p.H.UPDATE_CUSTOM||d?[p.H.ADD,p.H.UPDATE,p.H.DELETE].includes(s)&&!m?o=100006:n||(o=100007):o=100005:o=100004:o=100003:o=100002,(0,l.A)({event:"add_sku_params_error",referPageSn:t,scene:6,eventType:3,errorCode:o,extra:{params:e}})}return!0})(e))return{success:!1,reason:g.U.INVALID_ARGU};const{isSync:n,mergerInterval:r,asyncCallback:a,syncCallback:s,ifForbidRefreshCart:i}=t||{},{pageSn:u,pageElSn:m,clientCartScene:f,skuId:h,operateType:x,fromNum:I,num:_}=e,k=!![p.H.UPDATE_CUSTOM].includes(x)||n;let b;b=x===p.H.ADD?"api_add_sku":x===p.H.DELETE?"api_change_delete":"api_change_sku",(0,l.A)({event:b,referPageSn:u,scene:6,eventType:1,extra:{params:e,isSync:k}});const w=`${h}-${k?1:0}-${m||""}-${f}`;y[w]=y[w]||{isSync:!!k,isLocked:!1,timer:null,initFromNum:0,lastOperateType:0,lastNum:0,latestReq:null,waitingReq:null,lastUpdateTime:(new Date).getTime()};const{isLocked:S,timer:C,lastOperateType:N,lastNum:T}=y[w],R=((e,t)=>{const n=y[e]||{},{pageSn:r}=t||{};return e=>{let{initialFromNum:t,nextTimer:a,nextType:s,nextNum:o,nextReq:i,nextWaitingReq:c,ifCheckoutLivingState:u=!0,updateType:m=1}=e;if("number"==typeof t&&(n.initFromNum=t),(a||null===a)&&(n.timer=a),s&&(n.lastOperateType=s),"number"==typeof o&&(n.lastNum=o),(i instanceof Promise||null===i)&&(n.latestReq=i),(c instanceof Function||null===c)&&(n.waitingReq=c),u){const e=(new Date).getTime();e-n.lastUpdateTime>5e3&&(0,l.A)({event:`operate_cart_action_illegal_${m}`,referPageSn:r,scene:6,eventType:3,extra:{}}),n.lastUpdateTime=e}}})(w,{pageSn:u}),A=()=>{!i&&(0,c.Xd)(),y[w]=void 0};if(k){if(S)return{success:!1,reason:g.U.LOCKED};y[w].isLocked=!0;const n=v(e),r=await d(n),a=E(r,t,e);return s?.({...a,reqParams:e}),A(),a}return C&&clearTimeout(C),N?x===p.H.ADD?[p.H.ADD,p.H.UPDATE].includes(N)?R({nextNum:T+(_||1)}):R({nextType:p.H.ADD,nextNum:_}):x===p.H.UPDATE?R({nextType:p.H.UPDATE,nextNum:_}):R({nextType:p.H.DELETE,nextNum:0}):R({initialFromNum:I,nextType:x,nextNum:_}),y[w].timer=setTimeout((()=>{R({nextTimer:null,updateType:2});const{initFromNum:n,lastNum:r,latestReq:s}=y[w];if(n!==r){const i=((e,t)=>{let n=p.H.UPDATE;return 0===e&&t>0?n=p.H.ADD:e>0&&t>0?n=p.H.UPDATE:e>0&&0===t&&(n=p.H.DELETE),{operateType:n,fromNum:e,num:t}})(n,r),c={...e,...i},l=v(c),u=e=>{const n=E(e,t,c),{timer:r,waitingReq:s}=y[w],{success:i,openedPopupTypes:l}=n,u=l?.some((e=>[o.n.FULL_CART_POPUP_V2].includes(e)));a?.({...n,reqParams:c}),R({nextReq:null,nextWaitingReq:null,updateType:3}),!i||u?(r&&clearTimeout(r),A()):s?R({nextReq:s(),updateType:4}):!r&&A()};R(s?{nextWaitingReq:()=>(R({initialFromNum:r,updateType:7}),d(l).then(u)),updateType:6}:{initialFromNum:r,nextReq:d(l).then(u),updateType:5})}else{a?.({success:!1,reason:g.U.MERGED_UNCHANGED});const{latestReq:e,waitingReq:t}=y[w];e||t||A()}}),r||300),{success:!0,reason:g.U.OPERATION_MERGED,fakeOperatedData:{num:y[w].lastNum,operateType:y[w].lastOperateType}}}},52793:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r=function(e){return e[e.REMOTE_FAILED=0]="REMOTE_FAILED",e[e.INVALID_ARGU=1]="INVALID_ARGU",e[e.LOCKED=2]="LOCKED",e[e.CLEAN_POPUP_FAILED=4]="CLEAN_POPUP_FAILED",e[e.OPERATION_MERGED=5]="OPERATION_MERGED",e[e.MERGED_UNCHANGED=6]="MERGED_UNCHANGED",e}({})},87969:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});let r=function(e){return e[e.FULL_CART_POPUP_V2=4]="FULL_CART_POPUP_V2",e}({})},87019:function(e,t,n){"use strict";n.d(t,{U:function(){return i},Y:function(){return o}});var r=n(33514),a=n(30015),s=n(40119);let o=function(e){return e[e.SeparateDay=1]="SeparateDay",e[e.MergeHour=2]="MergeHour",e}({});const i=(0,r.memo)((e=>{let{endType:t,endLeftTime:n,endTimeColor:i,endTimeBackgroundColor:c,callback:l,digitsStyle:u={},nowTime:m}=e;const d=(0,r.useMemo)((()=>m||Date.now()),[m]),p=(0,r.useMemo)((()=>t===o.SeparateDay),[t]),f=(0,r.useMemo)((()=>({color:i,background:c})),[i,c]),g=()=>r.createElement("span",{style:{color:c}},":");return r.createElement(a.A,{intervalGap:500,endTime:1e3*n,nowTime:d,renderFunc:e=>{let{hour:t,minute:n,second:a,day:o}=e;return r.createElement(r.Fragment,null,p&&o?r.createElement(r.Fragment,null,r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},(0,s.yg)(o)),g()):null,r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},p?(0,s.yg)(t):(0,s.yg)(24*o+t)),g(),r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},(0,s.yg)(n)),g(),r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},(0,s.yg)(a)))},rAF:!0,callback:l})}))},13571:function(e,t,n){"use strict";n.d(t,{t:function(){return k},O:function(){return b}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(87837),c=n(97582),l=n(46694),u=n(27092),m=n(76475),d=n(73572),p=n(45477),f=n(87019),g=n(32893),h=n.n(g);const y=()=>{const{isRTL:e}=(0,l.Sz)(),{activityProgressInfo:t,clockAnimationCount:n,updateClockAnimationCount:a}=(0,r.useContext)(m.Bl),{clockIcon:o,activityProgress:i,width:c}=t||{},u=c||60,[d,f]=(0,r.useState)(!1),g=(0,r.useRef)(null);if((0,r.useEffect)((()=>{f(!0),a()}),[]),!o||!i)return null;const y=i/100,v=7*i/1e3;let E=Math.max(0,Math.min(u-15,y*u-7.5)),x=-(u-y*u);return e&&(E=-E,x=-x),r.createElement("div",{className:h().clockWrap,ref:g},r.createElement("div",{className:h().clockBg,style:{width:u}},r.createElement("div",{className:s()(h().clockInner,{[h().clockInnerAnimation]:d&&1===n,[h().clockInnerNotAnimation]:n>1}),style:{width:u,"--progress-translate":`${x}px`,"--progress-translate-time":`${v}s`}})),o?r.createElement("div",{className:s()(h().clock,{[h().clockAnimation]:d&&1===n,[h().clockNotAnimation]:n>1}),style:{"--clock-translate":`${E}px`,"--clock-translate-time":`${v}s`}},r.createElement(p.A,{className:h().clockImg,src:o,resizeWidth:100,alt:""})):null)},v=()=>{const{endTimeImage:e,activityProgressInfo:t}=(0,r.useContext)(m.Bl),{clockIcon:n,activityProgress:a}=t||{};if(n&&a)return r.createElement(y,null);const{url:s,width:o,height:i}=e||{};if(!s)return null;let c={};return o&&i&&(c={width:o,height:i}),r.createElement(p.A,{className:h().endTimeImage,src:e.url,style:c,resizeWidth:300,"aria-hidden":!0,alt:""})},E=e=>{let{endTimeText:t,endTimeRichText:n}=e;return r.createElement(r.Fragment,null,r.createElement("div",{className:h().divider}),r.createElement("div",{className:h().entTimeWrap},n?r.createElement(d.l5,{className:s()(h().entTimeText,h().entTimeRichText),newRichText:n,style:{textAlign:"left"}}):t?r.createElement("span",{className:h().entTimeText},t):null,r.createElement(v,null)))},x=(0,o.W4)({name:"ActivityBanner"})((e=>{let{isShowArrow:t,onClick:n,onMouseDown:a,onMouseLeave:o,activityInfo:i,serverRenderTime:l,skuActivityTip:g,contentClassName:y,skuActInfo:x}=e;const{t:I}=(0,c.B)("bec-fe.web-sku-selector"),{activityEndTime:_,defaultActivityName:k,endTimeImage:b,markImage:w,endTimeText:S,activityIconUrl:C}=i||{},[N,T]=(0,r.useState)(!!_),[R,A]=(0,r.useState)(0),z=t&&n,{activityNameRich:M,activityReductionRich:L,activityReductionText:P,arrowheadColor:D,frameStyle:U,sideTextRich:B,activityProgressInfo:W}=x||{},O=M?.textRich?.length||x?.activityName||k,H=1===U,F=H&&x?.bgColor?x?.bgColor:i?.bgColor;(0,r.useEffect)((()=>{T(!!_)}),[_]);const $=()=>{T(!1)},V=()=>M?.textRich?.length?r.createElement(d.l5,{newRichText:M,style:{textAlign:"left"}}):O;return r.createElement(m.Bl.Provider,{value:{activityProgressInfo:W,clockAnimationCount:R,updateClockAnimationCount:()=>{A((e=>e+1))},endTimeImage:b,endTimeText:S}},r.createElement("div",{className:h().wrap,style:F?{backgroundColor:F}:{}},r.createElement("div",{className:s()(h().content,z&&h().click,y),onClick:()=>{z&&n?.()},onMouseDown:a,onMouseLeave:o,"aria-hidden":!0},w?.url&&!H?r.createElement(p.A,{className:h().activityMarkImage,src:w.url,resizeWidth:300,"aria-hidden":!0,alt:""}):null,g?r.createElement("div",{className:h().activityV2},r.createElement("div",{className:h().activityV2Left},r.createElement("span",{className:h().activityTipsText},g),r.createElement(v,null)),O?r.createElement("div",{className:h().activityV2Rgiht},C?r.createElement("span",{style:{backgroundImage:`url(${C}) linear-gradient(#fff, #fff)`,maskImage:`url(${C})`,WebkitMaskImage:`url(${C})`},className:h().activityIcon}):null,r.createElement("span",{className:h().activityV2Name},V())):null):r.createElement(r.Fragment,null,r.createElement("div",{className:s()(h().endTimeInfo,H&&h().frameStyleText)},O?r.createElement("span",{className:h().activityText},V()):null,H?null:L?.textRich?.length?r.createElement(E,{endTimeRichText:L}):P?r.createElement(E,{endTimeText:P}):S?r.createElement(E,{endTimeText:S}):_&&N?r.createElement("div",{className:h().afterName},r.createElement("div",{className:h().divider}),r.createElement("div",{className:h().entTimeWrap},_?r.createElement(r.Fragment,null,r.createElement("div",{className:h().entTime,dir:"ltr"},r.createElement(f.U,{endLeftTime:_,callback:$,endType:f.Y.SeparateDay,nowTime:l,digitsStyle:{display:"inline-block",width:18,textAlign:"center"}})),r.createElement("span",{className:h().entTimeText},I("activityEndIn"))):null,r.createElement(v,null))):null)),r.createElement("div",{className:h().right},B?.textRich?.length?r.createElement(d.l5,{className:h().sideText,newRichText:B,style:{textAlign:"left",color:B.textRich[0]?.fontColor}}):null,z?r.createElement(u.A,{className:s()(h().arrow,H&&h().frameStyleArrow),style:D?{fill:D}:{}}):null))))}));var I=n(9699),_=n.n(I);let k=function(e){return e[e.All=0]="All",e[e.ExplicitlySelected=1]="ExplicitlySelected",e[e.UnExplicitlySelected=2]="UnExplicitlySelected",e}({});const b=(0,o.W4)({name:"ActivityWrap"})((e=>{let{children:t,isShowArrow:n,onClick:a,onMouseDown:o,onMouseLeave:c,activityInfo:l,skuActInfo:u,serverRenderTime:m,skuActivityTip:d,className:p,contentClassName:f,contentBgClassName:g}=e;const{defaultActivityName:h}=l||{},{activityNameRich:y,activityName:v,frameStyle:E}=u||{},I=y?.textRich?.length||v||h,k=1===E&&u?.bgColor?u?.bgColor:l?.bgColor;return I?r.createElement(i.nU,{page_el_sn:232423,useClick:!1},r.createElement("div",{className:s()(_().wrap,p)},r.createElement(x,{isShowArrow:n,onClick:a,onMouseDown:o,onMouseLeave:c,skuActivityTip:d,skuActInfo:u,activityInfo:l,serverRenderTime:m,contentClassName:f}),r.createElement("div",{className:_().content,style:k?{border:`2px solid ${k}`}:{}},r.createElement("div",{className:s()(_().banner,g),style:k?{background:k}:{}}),r.createElement("div",{className:_().child},t)))):t}))},94317:function(e,t,n){"use strict";n.d(t,{D:function(){return g}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(53075),c=n(82141),l=n(35439),u=n(66531),m=n(11739),d=n.n(m),p=function(e){return e[e.process=1]="process",e[e.finish=2]="finish",e}(p||{});const f=(0,l.M)("transform");function g(e){let{gapAmount:t,minAmount:n,promotionProgressStatus:a,progressCls:o}=e;const i=+(100*(a===p.finish?1:0===n&&t>0?0:Math.max((n-t)/n||0,0))).toFixed(2);return r.createElement("div",{className:s()(d().bar,o)},r.createElement("div",{className:d().innerBar,style:{transform:`translateX(${-100+i}%)`,[f]:`translateX(${-100+i}%)`}}))}const h=e=>{let{collectPromotion:t,progressCls:n=""}=e;const{promotionProgressStatus:a,iconDisplayItem:o,promotionTextDisplayItem:l,minAmount:m,gapAmount:f,progressShow:h,cartLink:y}=t||{},v=a===p.finish,E=(0,r.useCallback)((()=>{y&&(0,i.MJ)((0,u.L)(y))}),[y]);return r.createElement("div",{className:s()(d().wrap,v?d().isFinish:"")},r.createElement("div",{className:d().content},r.createElement("div",{className:d().left},r.createElement(c.mJ,{displayItems:o?.displayItems,imageStyle:{marginRight:"7px"}})),r.createElement("div",{className:d().right},r.createElement("div",{className:s()(d().firstLine,y?d().clickStatus:""),onClick:E},r.createElement(c.mJ,{displayItems:l?.displayItems,imageStyle:{marginTop:"2px"},imageClassName:d().img})),!!h&&r.createElement(g,{gapAmount:f,minAmount:m,promotionProgressStatus:a,progressCls:n}))))};t.A=(0,o.eE)()((0,r.memo)(h))},82141:function(e,t,n){"use strict";n.d(t,{mJ:function(){return m}});var r=n(33514),a=n(82370),s=n(30015),o=n(40119),i=function(e){return e[e.TEXT=0]="TEXT",e[e.IMAGE=100]="IMAGE",e[e.COUNT_DOWN=300]="COUNT_DOWN",e[e.TIME=12]="TIME",e}(i||{});function c(e){let{displayItem:t,imageStyle:n={},className:s}=e;const{height:o,width:i,url:c}=t||{},l={height:o,width:i,...n};return c?r.createElement(a.Ay,{alt:"",src:c,style:l,"aria-hidden":!0,className:s}):null}function l(e){let{displayItem:t,textStyle:n={},className:a="",ignoreFontSize:s}=e;const{fontWeight:o,fontColor:i,color:c,fontSize:l,bold:u,text:m=""}=t||{},d={fontWeight:o||(u?500:400),color:i||c,...n};return s||(d.fontSize=l),r.createElement("span",{style:d,className:a},m)}function u(e){let{displayItem:t,onCountDown:n,isSeparateDay:a,serverTime:i,timeCls:c}=e;const{fontWeight:l,fontColor:u,color:m,fontSize:d,bold:p,text:f=""}=t||{},g={fontWeight:p?600:l,color:u||m,fontSize:d,direction:"ltr"};return r.createElement(s.A,{intervalGap:1e3,endTime:1e3*Number(f)||Date.now(),nowTime:1e3*i||Date.now(),renderFunc:e=>{let{hour:t,minute:n,second:s,day:i}=e;return r.createElement("span",{className:c,style:g,"aria-hidden":!0,dir:"ltr",suppressHydrationWarning:!0},a&&i?r.createElement(r.Fragment,null,r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},(0,o.yg)(i)),r.createElement("span",{"data-type":"colon"},":")):null,r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},a?(0,o.yg)(t):(0,o.yg)(24*i+t)),r.createElement("span",{"data-type":"colon"},":"),r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},(0,o.yg)(n)),r.createElement("span",{"data-type":"colon"},":"),r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},(0,o.yg)(s)))},rAF:!0,callback:n})}function m(e){let{displayItems:t,textStyle:n,textClassName:a,imageStyle:s,ignoreFontSize:o,imageClassName:m,isSeparateDay:d,onCountDown:p,serverTime:f,timeCls:g}=e;return Array.isArray(t)?r.createElement(r.Fragment,null,t.map(((e,t)=>{const{displayType:h}=e||{};return i.IMAGE===h?r.createElement(c,{displayItem:e,key:`${t}-${h}`,imageStyle:s,className:m}):h===i.COUNT_DOWN||h===i.TIME?r.createElement(u,{displayItem:e,isSeparateDay:d,onCountDown:p,key:`${t}-${h}`,serverTime:f,timeCls:g}):r.createElement(l,{displayItem:e,key:`${t}-${h}`,textStyle:n,className:a,ignoreFontSize:o})}))):null}},15418:function(e,t,n){"use strict";n.d(t,{jN:function(){return f},pY:function(){return g}});var r=n(33514),a=n(32485),s=n.n(a),o=n(97582),i=n(72620),c=n(92943),l=n(53075),u=n(80907),m=n(64018),d=n.n(m);const p=(0,r.memo)((e=>{let{sumerKey:t,linePriceExplainData:n}=e;const{linePriceTipsJumpUrl:a,linePriceTipsTitle:s}=n||{},{t:i}=(0,o.B)("bec-fe.web-sku-selector",{keyPrefix:"linePriceExplain"});return r.createElement(u.Ay,{page_el_sn:225011,useGc:!0},r.createElement("div",{className:d().container},i(t),s?r.createElement("div",{className:d().title,onClick:()=>{a&&(0,l.MJ)(a,{openTarget:"_blank"})},role:"link",tabIndex:0,"aria-label":s},s):null))})),f=(0,r.memo)((e=>{const{hideOverlay:t,className:n,iconClassName:a,pageElSn:o,sumerKey:l,linePriceExplainData:m,renderContent:f}=e||{};return l?r.createElement(c.A,{placement:"bottom",appendToBody:!0,adapted:!0,overlay:t?null:r.createElement(p,{linePriceExplainData:m,sumerKey:l}),overlayClassName:d().linePriceExplain},r.createElement("div",{className:s()(d().entry,n)},r.createElement(u.Ay,{page_el_sn:o},r.createElement("div",null,"function"==typeof f?f():r.createElement(i.A,{className:s()(d().explainIcon,a)}))))):null})),g=e=>{let{explainText:t,content:n}=e;return r.createElement(c.A,{appendToBody:!0,adapted:!0,overlay:(()=>{if(!Array.isArray(t)||!t?.length)return null;return r.createElement(u.Ay,{page_el_sn:225011},r.createElement("div",{className:d().tipsContent},t.map(((e,t)=>r.createElement("div",{className:s()(d().tipsContentItem,e?.link&&d().tipsLink),onClick:()=>{return t=e?.link,void(t&&(0,l.MJ)(t,{openTarget:"_blank"}));var t},role:"link",tabIndex:0,"aria-label":e?.text,key:t},e?.text)))))})()},r.createElement("div",{className:d().priceRichItem},n))}},67926:function(e,t,n){"use strict";n.d(t,{Y:function(){return h}});var r=n(14242),a=n(33514),s=n(32485),o=n.n(s),i=n(10147),c=n(32167),l=n(80907),u=n(22780),m=n.n(u);const d=()=>a.createElement("div",{className:m().wrap},a.createElement("div",{className:m().animate}));var p=(0,a.memo)(d),f=n(86967),g=n.n(f);const h=e=>{let{pageElSn:t=0,others:n,onClick:s,type:u,useLoad:m=!0,useImpr:d=!0,useClick:f,disable:h,btnCustomContent:y,btnContent:v,btnBottomContent:E,beforeBtnTextIcon:x,beforeContentIcon:I,className:_,innerCls:k,style:b,label:w,showFlash:S,buttonTextStyle:C,...N}=e;const T=()=>y||("string"!=typeof v?v:a.createElement(a.Fragment,null,a.createElement("span",{className:g().btnText,tabIndex:0,role:"button","aria-label":w},x,v),E,I)),R=()=>S?a.createElement(p,null):null;return m?a.createElement(l.Ay,{page_el_sn:t,others:n,useClick:f,useImpr:d},a.createElement(c.A,(0,r.A)({className:o()(g().btn,_,{[g().flashContainer]:S,[g().buttonTextStyle12]:[1,2].includes(C||0),[g().buttonTextStyle3]:3===C,[g().buttonTextStyle4]:4===C}),innerCls:k,style:b,onClick:s,type:u,disable:h},N),T(),R())):a.createElement(l.Ay,{page_el_sn:t,others:n,useClick:f,useImpr:d},a.createElement(i.A,(0,r.A)({className:o()(g().btn,_,{[g().flashContainer]:S,[g().buttonTextStyle12]:[1,2].includes(C||0),[g().buttonTextStyle3]:3===C,[g().buttonTextStyle4]:4===C}),innerCls:k,style:b,onClick:s,type:u,disable:h},N),T(),R()))}},53340:function(e,t,n){"use strict";n.d(t,{I:function(){return te},O:function(){return ee}});var r=n(33514),a=n(32485),s=n.n(a),o=n(95789),i=n(14511),c=n(97582),l=n(85283),u=n(76280),m=n(82370),d=n(10147),p=n(1528),f=n(62356),g=n(52248),h=n(40782),y=n(20755),v=n(40309),E=n(7682),x=n(53075),I=n(76475),_=n(27258),k=n(45805),b=n(19618),w=n(33064),S=n(733),C=n(3652),N=n(66531),T=n(80907),R=n(14242),A=n(27907),z=n(19732),M=n(46694);function L(e){const{cartScene:t,pageSn:n,goodsInfo:a,cartCls:s="",wrapCls:o="",oakStage:i,pageElSn:c,autoAddSingleSku:l,source_goods_id:m,source_sku_id:d,skuParams:p,style:f={},skuOptions:g={},...h}=e,{goodsId:y,pRec:v,specIds:x,thumbUrl:I}=a||{},{isRTL:_}=(0,M.Sz)(),[w,S]=(0,r.useState)(a?.cartAmount||0);(0,r.useEffect)((()=>{const e=(0,u.Xu)((e=>{let{cartGoodsNumMap:t}=e;"object"==typeof t&&S(t[y]||0)}));return()=>{e()}}),[]);const N="string"==typeof v?v:JSON.stringify((0,E.qi)(v));return r.createElement(T.Ay,{useClick:!1,page_el_sn:200061,others:{cart_scene:t,goods_id:y,p_rec:N}},r.createElement("div",{style:{[_?"marginLeft":"marginRight"]:"6px",...f}},r.createElement(z.A,(0,R.A)({cartAmount:w,addCart:e=>{e.stopPropagation(),e.preventDefault();const r={p_rec:N,source_goods_id:m,source_sku_id:d};c&&(r.page_el_sn=c);const a={goods_id:y,_oak_spec_ids:x,...p};i&&(a._oak_stage=i),k.hb.show({imprEventData:r,clickEventData:r,pageSn:n,params:a,addCart:!0,autoAddSingleSku:!1!==l||l,cartScene:t,isAutoShowToast:!0,callback:e=>{const{error:t}=e;if(t)return(0,b.Ku)(t)},...g}),(0,C.N)(I)}},h))))}var P=n(41722),D=n.n(P);function U(e){const{cartScene:t,pageSn:n,cartMouseEnter:a,cartMouseLeave:o,oakStage:i,showCart:c=!0,goodsInfo:l,skuParams:u,mainGoodsTrackingInfo:m,classConfig:d,saleInfoCls:p,goodsInfoCls:f="",skuOptions:g,showFlashSaleIcon:h}=e,{priceInfo:y,salesTipText:v,salesTip:E,noSalesTipText:x,salesTipTextList:I}=l||{},{priceStr:_,priceText:k,marketPriceText:b,priceColor:w,marketPriceIcon:S}=y||{},C=k?k[1]:_,N=k?k[0]:"",T=k?k[2]:"",z=b&&b.length?b.join(""):"",M=I?.length?I:v;return r.createElement("div",{className:s()(D().goodsInfo,f)},r.createElement(A.A,{className:s()(p,D().goodsSaleInfo),classConfig:{...d,flexContainer:s()(D().flexContainer,d?.flexContainer),price:d?.price},price:C,pricePrefix:N,priceSuffix:T,marketPrice:z,sales:E,salesArray:M,marketPriceIcon:S,priceColor:w,noSalesTipText:x,enableScale:!0,showFlashSaleIcon:h}),!!c&&r.createElement("div",{className:s()(D().cartIcon,d?.cartIcon)},r.createElement(L,(0,R.A)({},m||{},{pageSn:n,cartScene:t,key:l?.goodsId,goodsInfo:l,skuParams:u,onMouseEnter:()=>a?.(),onMouseLeave:()=>o?.(),oakStage:i,skuOptions:g}))))}var B=n(84912),W=n(23450),O=n(59661),H=n(14825),F=n(13852),$=n(2526),V=n(3759),q=n.n(V),G=(0,i.W4)({name:"bottomRecPopup"})((e=>{let{data:t,index:n}=e;const{goodsId:a,selectedSku:o,options:i,showQuickLook:c}=(0,I.Pj)(),{skuId:u}=o||{},{pageSn:d}=i||{},p={supportPersonalize:!0},{goodsName:f,skuList:g,salesTip:h,thumbUrl:y,marketPriceText:v,goodsId:k,priceInfo:b,pRec:R,seoLinkUrl:A,linkUrl:z,extendFields:M,complianceInfo:L,activityType:P}=t||{},{skuId:D}=g?.[0]||{},B="string"==typeof R?R:JSON.stringify((0,E.qi)(R)),W=(0,r.useMemo)((()=>(0,N.L)(A||z)),[A,z]),{price:O,currency:H}=b||{},V={source_sku_id:u,source_goods_id:a,show_currency:H,show_price:O,show_sales:h||v,idx:n,p_rec:B,rec_goods_id:k,rec_sku_id:D},{type:G,iconInfo:j}=L||{};return r.createElement(T.Ay,{page_el_sn:221581,others:V,useGc:!0},r.createElement($.N_,{seoUrl:W,url:W,onClick:e=>{e&&((0,C.N)(y),(0,x.MJ)((0,F.rE)({_oak_sku_id:D},e),{openTarget:"_blank"}))}},r.createElement("div",{className:s()(q().item,q().normalItem,c?q().showQuickLook:"")},r.createElement("div",{className:q().goodsImg},y?r.createElement(m.Ay,{src:y,alt:"",lazy:!0}):null,r.createElement(_.A,{goodsId:k,wrapClassName:q().quickLook,skuParams:{_oak_stage:17,_oak_sku_id:D,_oak_page_source:424},cartScene:275,frontControl:p,pageSn:d,trackingInfo:V}),j?r.createElement(l.A,{type:1,data:j}):r.createElement(w.TU,{data:M?.engIcon,goodsId:k})),r.createElement("div",{className:q().goodsInfo},g&&g.length>0?r.createElement("div",{className:q().skuList},g.map(((e,t)=>e?.thumbUrl?r.createElement(m.Ay,{alt:"",key:t,className:q().sku,src:e.thumbUrl}):null))):null),r.createElement("div",{className:q().goodsName},f),r.createElement(U,{showCart:!0,saleInfoCls:q().saleInfo,goodsInfo:t,skuParams:{_oak_stage:17,_oak_sku_id:D,_oak_page_source:424},classConfig:{price:q().normalPrice,pricePrefix:q().unit,priceSuffix:q().unit},key:k,cartScene:275,skuOptions:{frontControl:p},pageSn:d,mainGoodsTrackingInfo:V,showFlashSaleIcon:P===S.Mr.Lightning}))))})),j=n(76737),K=n.n(j);const J=()=>{const{bottomRecStore:e}=(0,I.Pj)(),{goodsList:t,queryFrequentBought:n,hasMore:a}=e,[o,i]=(0,r.useState)(t),[c,l]=(0,r.useState)(a);return c&&!o?.length?null:r.createElement(W.A,{wrapperClass:K().list,datasource:o,hasMore:c,loadMoreData:async()=>n().then((e=>{let{goodsList:t,hasMore:n}=e;i(t),l(n)})),renderItem:G,loadMode:"auto",showLoading:!0,bottomWrapperClass:s()(K().bottomBtn,c?"":K().none)})},Q=()=>r.createElement("div",{className:K().container},r.createElement("div",{className:K().head},(0,B.t)("SkuRecommend.bottomRecTitle",{ns:"bec-fe.web-sku-selector"})),r.createElement("div",{className:K().goodsList},r.createElement(J,null))),Y=(0,i.W4)()((0,r.memo)((e=>{let{store:t,onClose:n}=e;return r.createElement(I.Pd.Provider,{value:t},r.createElement(O.Ay,{onClick:()=>{(0,H.b9)({op:"click",page_el_sn:201063}),n()}},r.createElement(Q,null)))})));var X=n(12707),Z=n.n(X);const ee=e=>{let{data:t,index:n,className:a,cartScene:o=275,pageElSn:i,priceClsConfig:g,outerPageSn:h,outerMainGoodsId:y,isShowQuickLook:v=!0,isShowLocalWarehouseTag:R,addCartBtnPageElSn:A=200061}=e;const{currency:z,thumbUrl:M,pRec:L,title:P,goodsName:D,linkUrl:B,seoLinkUrl:W,priceInfo:O,skuList:H,specIds:F,goodsId:$,salesTip:V,extendFields:q,activityType:G,complianceInfo:j}=t||{},K="string"==typeof L?L:JSON.stringify((0,E.qi)(L)),{skuId:J=""}=H?.[0]||{},{t:Q}=(0,c.B)("bec-fe.web-sku-selector"),{options:Y,goodsId:X,selectedSku:ee,showQuickLook:te}=(0,I.Pj)(),{pageSn:ne,frontControl:re}=Y||{},ae=h||ne,se=y||X,oe=(0,r.useMemo)((()=>(0,N.L)(W||B)),[W,B]),[ie,ce]=(0,r.useState)(t?.cartAmount||0);(0,r.useEffect)((()=>{const e=(0,u.Xu)((e=>{let{cartGoodsNumMap:t}=e;"object"==typeof t&&ce(t[$]||0)}));return()=>{e()}}),[]);const{priceStr:le,priceText:ue}=O||{},me=ue?ue[0]:"",de=ue?ue[2]:"",pe=Array.isArray(ue)?ue[1]:le,fe={source_sku_id:ee?.skuId,source_goods_id:se,show_currency:z,show_price:pe,show_sales:V,idx:n,p_rec:K,rec_goods_id:$,rec_sku_id:J},{type:ge,iconInfo:he}=j||{},ye=me?.length>1||de?.length>1,ve={...ye?{cartIcon:Z().cartIcon}:{},...g};return r.createElement(T.Ay,{page_el_sn:i||221581,others:fe,useGc:!0},r.createElement("div",{className:s()(Z().goodsItem,a,te&&v?Z().showQuickLook:""),onClick:e=>{e.stopPropagation(),(0,C.N)(M),(0,x.MJ)(oe)},role:"button",tabIndex:0},r.createElement("div",{className:Z().imgWrap},r.createElement(m.Ay,{src:M,alt:""}),r.createElement(_.A,{goodsId:$,wrapClassName:Z().quickLook,containerClassName:Z().quicklookContainer,skuParams:{_oak_stage:17,_oak_sku_id:J,_oak_page_source:424},cartScene:o,pageSn:ae,autoScale:!0,frontControl:re,contentCls:Z().quicklookContentCls,trackingInfo:fe}),R?r.createElement("div",{className:Z().localWarehouse},Q("LocalMallRecommendPopup.localWarehouse")):null,he?r.createElement(l.A,{type:1,data:he}):r.createElement(w.TU,{data:q?.engIcon,goodsId:$})),r.createElement("div",{className:Z().goodsName},P||D),r.createElement(U,{showCart:!1,goodsInfo:t,goodsInfoCls:ye?Z().goodsInfo:"",classConfig:ve,key:n,cartScene:o||275,pageSn:ae,skuParams:{_oak_stage:17,_oak_sku_id:J,_oak_spec_ids:F},mainGoodsTrackingInfo:fe,showFlashSaleIcon:G===S.Mr.Lightning}),r.createElement(T.Ay,{page_el_sn:A,others:{...fe,cart_scene:o}},r.createElement("div",{className:Z().addCartBtn,onClick:e=>{e.stopPropagation(),e.preventDefault();const t={p_rec:K,source_goods_id:se,source_sku_id:ee?.skuId},n={goods_id:$,_oak_spec_ids:F,_oak_stage:17,_oak_sku_id:J,_oak_page_source:424};k.hb.show({imprEventData:t,clickEventData:t,pageSn:ae,params:n,addCart:!0,frontControl:{supportPersonalize:!0},cartScene:o||"275",isAutoShowToast:!0,callback:e=>{const{error:t}=e;if(t)return(0,b.Ku)(t)}}),(0,C.N)(M)},role:"button",tabIndex:0},r.createElement(d.A,{type:p.el.border,autoScale:!0,size:"md",className:Z().addCartBtnText},Q("add_to_cart"),ie?r.createElement(f.Ex,{type:"number",content:ie,className:Z().addCartBadge}):null)))))},te=(0,i.W4)({name:"BottomRec"})((()=>{const e=(0,I.Pj)(),{t:t}=(0,c.B)("bec-fe.web-sku-selector"),{bottomRecStore:n,addedAmount:a,hitBottomRec:s}=e,{goodsList:i,queryFrequentBought:l}=n,u=(0,r.useCallback)(((e,t)=>r.createElement(ee,{data:e,index:t,key:t})),[]);return(0,r.useEffect)((()=>{!i?.length&&a&&s&&l()}),[a,i?.length]),i?.length?r.createElement("div",{className:Z().wrap},r.createElement(T.Ay,{page_el_sn:221579,useClick:!1,useGc:!0},r.createElement("div",{className:Z().title,onClick:()=>{const t=(0,o.A)(r.createElement(Y,{onClose:()=>t(),store:e}),{})},role:"button",tabIndex:0},r.createElement("div",{className:Z().titleText},t("SkuRecommend.bottomRecTitle",{ns:"bec-fe.web-sku-selector"})),r.createElement(T.Ay,{page_el_sn:221580,useGc:!0},r.createElement("div",{className:Z().seeMore},t("see_more",{ns:"bec-fe.web-sku-selector"}),r.createElement(g.hu,{className:Z().titleArrowIcon,direction:"right","aria-hidden":!0}))))),r.createElement("div",{className:Z().bottom},r.createElement(ne,{renderItem:u,list:i}))):null})),ne=e=>{const{renderItem:t,list:n}=e,{bottomRecStore:a}=(0,I.Pj)(),{initDataPromise:o,userBottomRecInteraction:i}=a,c=(0,r.useRef)();(0,r.useEffect)((()=>{o instanceof Promise&&o.then((()=>i?.end?.({name:"pc_skuShowBottomRecTime"})))}),[]);const l=e=>{const{splideRef:t}=c.current||{},n=t.current?.splide;if(!n)return;const r=n.index,a=n.Components.Slides.get(),s=a.filter((e=>(0,h.Jj)(n.root,e.slide)))?.length,o="next"===e?r+s:r-s;n.go(Math.max(a?.[0].index,Math.min(o,a?.[a?.length-1].index)))};return r.createElement(h.pM,{pageSize:1,ref:c,customArrows:r.createElement("div",{className:s()("splide__arrows",Z().arrowMask)},r.createElement("div",{style:{opacity:0,display:"none"},className:s()("splide__arrow splide__arrow--prev",Z().leftArrow,Z().arrow)},r.createElement(y.A,{direction:"left",className:Z().baseArrowBtn,onClick:()=>l("prev")})),r.createElement("div",{style:{opacity:0,display:"none"},className:s()("splide__arrow splide__arrow--next",Z().rightArrow,Z().arrow)},r.createElement(y.A,{direction:"right",className:Z().baseArrowBtn,onClick:()=>l("next")})))},n.map(((e,n)=>r.createElement(v.Nn,{className:s()(Z().item),key:n},t(e,n)))))}},45362:function(e,t,n){"use strict";n.d(t,{F:function(){return w}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(82370),c=n(53075),l=n(77805),u=n(94317),m=n(84369);const d=e=>{let{item:t,index:n,imageMarginRight:a,imgHasWrap:s,imgClass:o}=e;const{image:c}=t||{},{url:l,width:u,height:m}=c||{},d={width:u,height:m,marginRight:a||"2px",maxWidth:u};return l?s?r.createElement("span",{className:o},r.createElement(i.Ay,{key:n,src:l,style:d,"aria-hidden":!0,alt:""})):r.createElement(i.Ay,{key:n,src:l,style:d,className:o,"aria-hidden":!0,alt:""}):null},p=e=>{let{item:t,index:n,delimeterConfig:a}=e;const{color:s,width:o,height:i,margin:c,opacity:l}=a||{},{delimeter:u}=t||{},{color:m="#000000"}=u||{},d={display:"inline-block",backgroundColor:s||m,width:o||"1px",height:i||"10px",margin:c||"0 4px",opacity:l||.1};return r.createElement("span",{key:n,style:d})},f=e=>{let{item:t,index:n,ignoreFontSize:a,DialogComponent:s,type:o}=e;const{text:i,textFormat:c,dialog:l}=t||{};if(!i)return null;const{color:u,fontSize:m,fontWeight:d}=c||{},p={color:u,fontWeight:d};return!a&&m&&(p.fontSize=`${m}px`),3===o&&l&&s?r.createElement("span",null,r.createElement("span",{key:n,style:p},i),r.createElement(s,{dialog:l})):r.createElement("span",{key:n,style:p},i)};var g=(0,r.memo)((e=>{let{richText:t,className:n,ignoreFontSize:a,DialogComponent:s,imgClass:o,imgHasWrap:i,basicStyleConfig:c}=e;const{image:l,delimeter:u}=c||{},{marginRight:m}=l||{};return r.createElement("div",{className:n},(t||[]).map(((e,t)=>{const{type:n=0}=e||{};switch(n){case 1:return r.createElement(d,{item:e,index:t,alt:"",imageMarginRight:m,imgHasWrap:i,imgClass:o,key:t});case 2:return r.createElement(p,{item:e,index:t,delimeterConfig:u,key:t});default:return r.createElement(f,{item:e,index:t,ignoreFontSize:a,DialogComponent:s,type:n,key:t})}})))})),h=n(93333),y=n(66531);let v=function(e){return e[e.Normal=0]="Normal",e[e.UnfinishedBenefit=1]="UnfinishedBenefit",e[e.AddCart=2]="AddCart",e}({});var E=n(80518),x=n.n(E);function I(e){let{richText:t,marketing:n}=e;const{promotionProgressStatus:a,minAmount:o,gapAmount:i,cartLink:l,progressShow:m}=n||{};return r.createElement("div",{className:x().right},r.createElement("div",{className:s()(x().text,l?x().clickStatus:""),onClick:()=>{l&&(0,c.MJ)((0,y.L)(l))}},r.createElement(g,{richText:t})),!!m&&r.createElement(u.D,{gapAmount:i,minAmount:o,promotionProgressStatus:a}))}const _=e=>{let{marketing:t,className:n,richCls:a,customRenderWhiteList:o,customRenderTextRichItem:c}=e;const{iconUrl:l,textRich:u=[],customType:m}=t||{};return u?.length?m&&o?.includes?.(m)&&"function"==typeof c?c(t):r.createElement("div",{className:s()(x().wrap,n),"aria-label":(0,h.yQ)(u)},l?r.createElement("div",{className:x().icon,"aria-hidden":!0},r.createElement(i.Ay,{src:l,resizeWidth:40})):null,m===v.UnfinishedBenefit?r.createElement(I,{richText:u,marketing:t}):r.createElement(g,{richText:u,className:s()(x().rich,a)})):null},k=e=>{let{carousel:t,isResizeTrigger:n,style:a,className:o,carouselItemCls:i,customRenderWhiteList:c,customRenderTextRichItem:u,canStopCarousel:d}=e;const{scrollTime:p,scrollTimeMs:f,carouselDisplayList:g}=t,h=(0,r.useMemo)((()=>[...g||[]]),[g]),[y,v]=(0,r.useState)(!1),E=f?f/1e3:p,{containerRef:I,scrollRef:k,transformStyle:b,containerHeight:w,start:S,reset:C,stop:N,continueCarousel:T}=(0,m.g)({scrollTime:E,carouselLength:h?.length}),R=(0,r.useCallback)((0,l.s)(N,500),[N]),A=(0,r.useCallback)((0,l.s)(T,500),[T]);if((0,r.useEffect)((()=>{v(!0)}),[]),(0,r.useEffect)((()=>{S()}),[S,y]),(0,r.useEffect)((()=>{C()}),[n,C,h]),!h?.length||!y)return null;return r.createElement("div",{className:s()(x().multiContainer,o),ref:I,style:{...a,"--container-height":`${w}px`},onMouseEnter:()=>{d&&R()},onMouseLeave:()=>{d&&A()}},r.createElement("div",{className:x().scrollWrap,ref:k,style:b},[...h,h[0]].map(((e,t)=>r.createElement(_,{marketing:e,key:`${e.iconUrl}${t+1}`,customRenderWhiteList:c,customRenderTextRichItem:u,className:i})))))},b=e=>{let{carousel:t,isResizeTrigger:n,style:a={},className:s,carouselItemCls:o,customRenderWhiteList:i,customRenderTextRichItem:c,canStopCarousel:l}=e;const{carouselDisplayList:u}=t||{},m=[...u||[]];return m?.length>1?r.createElement(k,{carousel:t,isResizeTrigger:n,style:a,className:s,carouselItemCls:o,customRenderWhiteList:i,customRenderTextRichItem:c,canStopCarousel:l}):1===m?.length?r.createElement("div",{style:a},r.createElement(_,{marketing:m[0],customRenderWhiteList:i,customRenderTextRichItem:c,className:o})):null},w=(0,o.W4)({name:"MarketingComponent"})((0,r.memo)(b))},5887:function(e,t,n){"use strict";n.d(t,{K:function(){return Ke},r:function(){return Je}});n(44114),n(16280);var r=n(33514),a=n(34477),s=n(83836),o=n(32470),i=n(95789),c=n(97582),l=n(84912),u=n(46272),m=n(20162),d=n(59661),p=n(59024),f=n(79691),g=n(32485),h=n.n(g),y=n(7638),v=n(32167),E=n(1528),x=n(53075),I=n(80907),_=n(99117),k=n(87837),b=n(10147),w=n(82856),S=n.n(w);const C=(0,r.memo)((e=>{let{onClose:t}=e;const{t:n}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:a}=(0,c.B)("bec-fe.web-sku-selector"),s=e=>{e&&(0,x.MJ)(e,{openTarget:"_blank"})};return r.createElement(d.Ay,{onClick:()=>{t(),(0,_.OS)({page_el_sn:215983,op:"click"})},useSplitBg:!0},r.createElement(k.Rp,{page_el_sn:203753,useClick:!1},r.createElement("div",{className:S().wrap},r.createElement("div",{className:S().title},n("sensitiveTitle")),r.createElement("div",{className:S().content},r.createElement(y.x,{t:n,i18nKey:"sensitiveContent",ns:"bec-fe.web-sku-selector"},r.createElement("span",null),r.createElement("span",{className:S().contentActive,onClick:()=>s(n("link.temuOfUse"))}),r.createElement("span",{className:S().contentActive,onClick:()=>s(n("link.guideline"))}))),r.createElement(k.Rp,{page_el_sn:215985},r.createElement("div",{className:S().btnWrapper},r.createElement(b.A,{className:S().btn,onClick:t},a("Success.btn")))))))}));var N=n(9694),T=n(55095);const R={failInfo:{failStatus:N.c8.mergeImgRisk},idx:-1},A={failInfo:{failStatus:N.c8.none},idx:-1};var z=n(19670),M=n(27219),L=n(83005),P=n(14623),D=n.n(P);const U=e=>{const{size:t=16,strokeWidth:n=2,percent:a=0,color:s="#fff",trackColor:o="#000",className:i,style:c}=e,l=(t-n)/2,u=(0,r.useMemo)((()=>{const e=2*Math.PI*l;return`${a/100*e} ${e}`}),[l,a]);return r.createElement("div",{className:i,style:{width:`${t}px`,height:`${t}px`,display:"inline-flex",...c}},r.createElement("svg",{width:t,height:t,className:D().progress},r.createElement("circle",{cx:t/2,cy:t/2,r:l,stroke:o,strokeWidth:n,fill:"none",className:D().graphOuter}),r.createElement("circle",{cx:t/2,cy:t/2,r:l,stroke:s,strokeWidth:n,strokeLinecap:"round",fill:"none",transform:`matrix(0,-1,1,0,0,${t})`,strokeDasharray:u,className:D().graphInner})))};n(64979),n(21489),n(48140),n(75044),n(21903),n(91134),n(28845),n(373);function B(e){const[t,n]=function(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=window.atob(t[1]),a=new ArrayBuffer(r.length),s=new Uint8Array(a);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);return[new Blob([a],{type:n||"image/png"}),n]}(e);return new File([t],`${Date.now()}.${n}`,{type:n})}const W=e=>e?.touches?.length?e.touches[0]:e,O=e=>{e?.touches?.length&&e.preventDefault()},H=e=>2*Math.PI/360*e,F=(e,t,n)=>({x:(e.x-t.x)*Math.cos(H(n))-(e.y-t.y)*Math.sin(H(n))+t.x,y:(e.x-t.x)*Math.sin(H(n))+(e.y-t.y)*Math.cos(H(n))+t.y}),$=(e,t)=>({x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2});var V=n(71042),q=n.n(V);const G=(0,r.memo)((0,r.forwardRef)((function(e,t){const{customizedTag:n,data:a,update:s,onFailStatusChange:o,idx:i,surfaceRefuseRiskIds:l,removeSurfaceRefuseRiskIds:d,setRegionActiveIdx:g,isV3:y}=e,{element:v,regionIdx:x,elementIdx:_}=a||{},{renderUrl:k="",require:w,userPlacementData:S,minWidth:C,minHeight:T,imageUrl:R}=v||{},A=w||!y,P=(0,r.useRef)(v),{maxSize:D}=P.current||{},[B,W]=(0,r.useState)(),{t:O}=(0,c.B)("bec-fe.web-sku-selector"),{t:H}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),[F,$]=(0,r.useState)(!1),[V,G]=(0,r.useState)(k),[j,K]=(0,r.useState)(0),J=(0,r.useRef)(),[Q,Y]=(0,r.useState)(N.c8.none),X=(0,r.useMemo)((()=>!!l?.some((e=>e.riskId===`${x}${_}`))),[l,x,_]);(0,r.useEffect)((()=>{Y(X?N.c8.risk:N.c8.none)}),[X]),(0,r.useEffect)((()=>{P.current=a.element}),[a]),(0,r.useEffect)((()=>{V&&!B&&(async()=>{try{const e=await(async()=>new Promise((e=>{const t=new Image;t.src=V,t.onload=()=>e(t),t.onerror=()=>e(t)})))(),{width:t,height:n}=e||{};W((e=>!e&&t&&n?{width:t,height:n}:e))}catch(e){}})()}),[V,B]),(0,r.useEffect)((()=>{S?.dimension&&W(S.dimension)}),[S]),(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>!V&&A?((0,p.A)("customizedUploadImgEmpty"),Y(N.c8.empty),!1):!F&&!Q&&(!(A&&!R)||((0,p.A)("customizedUploadImgWaitUploaded"),!1))})));const Z=(0,u.A)((async e=>{$(!0),(0,p.A)("customizedUploadImgStart");const t=await new Promise(((e,t)=>{const n=document.createElement("input");n.type="file",n.accept="image/jpeg, image/png",n.style.display="none",document.body.appendChild(n),n.click(),n.addEventListener("change",(t=>{e(n.files),document.body.removeChild(n)})),n.addEventListener("cancel",(t=>{e(null),document.body.removeChild(n)}))}));if(!t)return void $(!1);const r=t?.[0]||[],o=new FileReader,{size:i}=r||{};o.readAsDataURL(r),o.onloadend=async e=>{await(async()=>{let{result:t}=e.target||{};t&&G(t);const o=await(e=>{const t=new Image;return new Promise(((n,r)=>{t.crossOrigin="anonymous",t.onload=()=>{n({width:t.width,height:t.height})},t.onerror=()=>{n(!1)},t.src=e}))})(t);if(!o)return(0,p.A)("customizedUploadImgInvalidType"),void Y(N.c8.invalidType);if(W(o),C&&T&&(o.width<C||o.height<T))Y(N.c8.invalidDimension);else{if(i>D)return(0,p.A)(`customizedUploadImgoversize:${i}`),void Y(N.c8.oversize);Y(N.c8.none);try{try{J.current?.abort?.()}catch(e){}const{instance:e,upload:o}=(0,f.bv)(r,{tag:n,onProgress:e=>{K(e)}});J.current=e,(0,p.A)("customizedUploading");const i=await o(),{url:c,imageInfo:l}=i||{},{width:u,height:d}=l||{};if(!c)return(0,p.A)("customizedUploadImgFail"),Y(N.c8.network),void m.A.error(O("networkError"));const g={...P.current,imageUrl:c,renderUrl:t,userPlacementData:{...P.current?.userPlacementData,dimension:{width:u,height:d}}},{element:h,...y}=a||{};s({...y,newElement:g}),Y(N.c8.none)}catch(e){const{errorCode:t}=e||{};34!==t?((0,p.A)("customizedUploadImgError"),Y(N.c8.network),m.A.error(O("networkError"))):(0,p.A)("customizedUploadImgManualAbort")}}})(),K(0),$(!1)},o.onerror=()=>{K(0),$(!1)}}));(0,r.useEffect)((()=>{if(Q&&Q!==N.c8.risk){const{element:e,...t}=a;s({...t,newElement:{...P.current,renderUrl:"",imageUrl:""}})}}),[Q]),(0,r.useEffect)((()=>{o({failInfo:{failStatus:Q,minWidth:C,minHeight:T,maxSize:D,regionIdx:x},idx:i})}),[Q]),(0,r.useEffect)((()=>{G(k||"")}),[k]),(0,r.useEffect)((()=>{k&&g(x)}),[k]);const ee=()=>{(0,p.A)("customizedUploadImgClear");const{element:e,...t}=a;G(""),J.current?.abort?.(),d({...t}),s({...t,newElement:{...P.current,renderUrl:"",imageUrl:"",userPlacementData:{}}}),K(0),$(!1),Y(N.c8.none)};return r.createElement("div",{className:q().wrap},r.createElement("div",{onClick:V?void 0:Z,className:h()(q().operateArea,{[q().missingUrl]:Q===N.c8.empty})},V?r.createElement("div",{className:q().preview},V?r.createElement("div",{style:{backgroundImage:(0,M.L)(V)},className:q().previewImg}):null,Q?(()=>{const e={[N.c8.risk]:H("failed")},t={[N.c8.oversize]:H("tryAgain"),[N.c8.network]:H("tryAgain"),[N.c8.risk]:H("Replace"),[N.c8.invalidType]:H("Replace"),[N.c8.invalidDimension]:H("Replace")};return r.createElement("div",{className:q().failMask},r.createElement("div",{className:q().failMaskNotice},e?.[Q]||H("uploadFail")),r.createElement(b.A,{className:q().failMaskBtn,type:E.el.border,innerCls:q().btnInner,onClick:Z},t[Q]))})():null,!Q&&F&&j>=0?r.createElement(r.Fragment,null,r.createElement("div",{className:q().failMask}),r.createElement(U,{size:28,className:q().progress,percent:j,trackColor:"rgba(255,255,255,0.6)"})):null,r.createElement("div",{className:q().previewClose,onClick:ee,role:"button",tabIndex:0},r.createElement(z.A,{className:q().closeIcon}))):r.createElement("div",null,r.createElement(I.Ay,{page_el_sn:227909},r.createElement("div",null,r.createElement("div",{className:q().uploadIcon},r.createElement(L.JM,null)),r.createElement("div",{className:q().uploadText},r.createElement("div",null,H("imageIdx",{val1:x+1})),A?null:r.createElement("div",{className:q().optional},H("optional")))))),V&&B?r.createElement("div",{className:h()(q().imgDimension,{[q().imgDimensionInvalid]:Q===N.c8.invalidDimension})},B.width,"x",B.height):null))})));var j=n(91684),K=n.n(j);const J=e=>Math.floor(e/1024/1024),Q=e=>{let{failStatus:t,alertMessage:n,maxSize:a,onHeightChange:s}=e;const{t:o}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),i=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(i.current){const{height:e}=i.current?.getBoundingClientRect()||{};s(e)}}),[t]);const l=[N.c8.none,N.c8.network].includes(t)?T.WH.grayText:T.WH.redText;return r.createElement("div",{ref:i},t===N.c8.empty?r.createElement(T.Fc,{type:T.SK.text,status:T.WH.redText,message:o("uploadRequirement"),classConfig:{text:K().noticeText,textIcon:K().noticeTextIcon}}):r.createElement(T.Fc,{type:T.SK.text,status:l,classConfig:{text:K().noticeText,textIcon:K().noticeTextIcon},message:n||o("uploadInfo",{val:a})}))},Y=(0,r.memo)((0,r.forwardRef)((function(e,t){const{editId:n,imgControlList:a,update:s,customizedTag:o,surfaceRefuseRiskIds:i,removeSurfaceRefuseRiskIds:l,surface:u,setRegionActiveIdx:m,isV3:d}=e,{t:p}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),[f,g]=(0,r.useState)(40),h=(0,r.useRef)({}),y=(0,r.useMemo)((()=>i?.filter((e=>[N.tz.mergeImg,N.tz.mergeImg].includes(e.previewType)))),[i]),v=(0,r.useCallback)((e=>{I((t=>{const{failInfo:n,idx:r}=e||{},{failStatus:a}=n||{},s=[...t];if(h.current[r]>-1){const e=s.findIndex((e=>e.idx===r));s.splice(e,1),h.current[r]=-1}return a&&(s.push({...n,idx:r}),h.current[r]=s.length-1),s}))}),[]),E=(0,r.useMemo)((()=>u?.regions?.map((e=>e.elements?.filter((e=>e.type===N.UM.image))?.map((e=>e.renderUrl))?.join(",")))),[u]);(0,r.useEffect)((()=>{v(A)}),[...E,n]),(0,r.useEffect)((()=>{1===y?.length&&"0"===y[0]?.riskId&&v(R)}),[y]);const[x,I]=(0,r.useState)([{failStatus:N.c8.none,maxSize:a?.[0]?.element?.maxSize}]),_=x[x.length-1],{failStatus:k,maxSize:b}=_||{},w=(0,r.useMemo)((()=>(e=>{const{failStatus:t,maxSize:n,minWidth:r,minHeight:a,regionIdx:s=0}=e||{},o=J(n);return{[N.c8.oversize]:p("fileSizeRequirement",{val:o}),[N.c8.invalidType]:p("fileFormatRequirement",{val:o}),[N.c8.risk]:p("imgRiskRequirement"),[N.c8.invalidDimension]:p("imgDimensionInvalid",{val1:r,val2:a,var3:s+1}),[N.c8.mergeImgRisk]:p("mergeImgRiskRequirement")}[t]})(_)),[_]);return(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>{const e=await Promise.all(a.map((e=>{let{ref:t}=e;return t.current?.checkDataValid?.()})));return e.every(Boolean)&&!k}}))),r.createElement("div",{className:K().wrap},r.createElement("div",{className:K().title},p("image")),r.createElement("div",{className:K().imgs},a?.map(((e,t)=>r.createElement(G,{ref:a[t]?.ref,onFailStatusChange:v,surfaceRefuseRiskIds:i,removeSurfaceRefuseRiskIds:l,data:e,key:t,idx:t,isV3:d,update:s,setRegionActiveIdx:m,customizedTag:o})))),r.createElement("div",{className:K().noticeWrap,style:{height:f}},r.createElement(Q,{failStatus:k,alertMessage:w,maxSize:J(b),onHeightChange:g})))})));var X=n(14825);n(25440);const Z={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"};let ee=null;function te(e){let{nodeStyleData:t,value:n,minRows:r,maxRows:a,className:s}=e;var o;ee||(ee=document.createElement("textarea"),ee.setAttribute("tabindex","-1"),ee.setAttribute("aria-hidden","true"),ee.setAttribute("class",s),o=ee,Object.keys(Z).forEach((e=>{o.style.setProperty(e,Z[e],"important")}))),null===ee.parentNode&&document.body.appendChild(ee);const{paddingSize:i,borderSize:c}=t;ee.value=n;let l=((e,t)=>e.scrollHeight+t.borderSize)(ee,t);ee.value="x";const u=ee.scrollHeight-i;let m=u*r;m=m+i+c,l=Math.max(m,l);let d=u*a;return d=d+i+c,l=Math.min(d,l),l}const ne=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"),"g"),"")};var re=n(98949),ae=n.n(re);const se=(e,t)=>{const{minHeight:a=0,minRows:s=1,maxRows:o,maxLength:i=0,placeholder:c="",onInput:l,value:u="",onConfirm:m,beforeFocusCalibrate:d,isShow:p,autoFocus:f=!0,className:g,focusClassName:y}=e,v=(0,r.useRef)(null),[E,x]=(0,r.useState)(a),I=(0,r.useRef)(0),_=(0,r.useRef)(),[k,b]=(0,r.useState)(0),[w,S]=(0,r.useState)(!1),[C,N]=(0,r.useState)(f),T=(0,r.useRef)(u);(0,r.useImperativeHandle)(t,(()=>({updateTextareaFocus:()=>{v.current?.focus&&v.current.focus()}})));const R=async()=>{const e=v.current;if(!e)return;const t=(e=>{const t=window?.getComputedStyle(e);return t?{paddingSize:parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),borderSize:parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth)}:null})(e);if(!t||w)return;const n=te({nodeStyleData:t,value:e.value||c||"x",minRows:s,maxRows:o,className:ae().textarea});I.current!==n&&(I.current=n,x(n));const r=_.current,a=r?e.value?.replace(r,"").slice(0,i):ne(e.value).slice(0,i),u=a.trim();e.value=a,b(a.length),l?.(u),T.current=u},A=(0,r.useCallback)((()=>{S(!0)}),[w]),z=(0,r.useCallback)((()=>{S(!1)}),[w]);return(0,r.useEffect)((()=>{const e=v.current;e&&u&&(e.value=u)}),[p]),(0,r.useEffect)((()=>{w||R()}),[w]),(0,r.useEffect)((()=>{n.e(6119).then(n.bind(n,30744)).then((e=>{let{emojiRegExp:t}=e;_.current=t}))}),[]),p?r.createElement("div",{className:h()(ae().wrap,g,C?y:"")},r.createElement("textarea",{className:ae().textarea,ref:v,style:{height:E},onChange:R,onFocus:async()=>{("function"!=typeof d||await d())&&v.current?.focus&&v.current.focus(),N(!0)},onBlur:()=>{setTimeout((()=>{T.current&&m?.(T.current)}),300),N(!0)},maxLength:i,onCompositionStart:A,onCompositionEnd:z,placeholder:c,autoFocus:f}),i?r.createElement("div",{className:ae().count},r.createElement("span",{className:h()(k>0&&ae().textLength)},k)," / ",i):null):null};var oe=(0,r.forwardRef)(se),ie=n(79746),ce=n.n(ie);const le=e=>{let{activeColor:t,onColorItemClick:n,textColorList:a,idx:s}=e;const{t:o}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"});return r.createElement("div",{className:ce().wrap},r.createElement("div",{className:ce().title},o("colorIdx",{val1:s+1})),r.createElement("div",{className:ce().list},a?.map(((e,a)=>{const{red:s,green:o,blue:i}=e||{},{red:c,green:l,blue:u}=t||{},m=`rgb(${s},${o},${i})`,d=s===c&&o===l&&i===u;return r.createElement("div",{className:h()(ce().item,{[ce().itemActive]:d}),key:a},r.createElement("div",{className:ce().color,style:{background:m,color:m},onClick:()=>n(e)}))}))))};var ue=(0,r.memo)(le),me=n(45030),de=n.n(me);const pe=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{data:n,update:a,surfaceRefuseRiskIds:s,removeSurfaceRefuseRiskIds:o,setRegionActiveIdx:i,isV3:l}=e,{element:u,textColorList:m,color:d,...f}=n||{},{regionIdx:g,elementIdx:h}=f||{},{lengthLimit:y,require:v,text:E}=u||{},{t:x}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),[_,k]=(0,r.useState)(E),[b,w]=(0,r.useState)(N.c8.none),S=(0,r.useRef)(!1),C=!l||v,T=(0,r.useMemo)((()=>!!s?.some((e=>e.riskId===`${g}${h}`))),[s,g,h]);(0,r.useEffect)((()=>{w(T?N.c8.risk:N.c8.none)}),[T]);const R=(0,r.useCallback)((e=>{k(e);const t={...u,text:e};a({...f,newElement:t}),i(g),e&&b&&(w(N.c8.none),o({...f}))}),[u,f,b,a]);(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>!_&&C?((0,p.A)("customizedUploadTextEmpty"),w(N.c8.empty),!1):!b})));const A={[N.c8.empty]:x("textRequirement"),[N.c8.risk]:x("textRiskRequirement")},z=(0,r.useCallback)((e=>{a({...f,newElement:{color:e}})}),[a,f]),[M,L]=(0,r.useState)(0);return r.createElement("div",{className:de().wrap},r.createElement("div",{className:de().title},C?r.createElement("span",{className:de().star},"*"):null,r.createElement("span",null,l?x("textIdx",{val1:g+1}):x("text"))),r.createElement(I.Ay,{page_el_sn:227910,useClick:!1},r.createElement("div",{className:de().operateArea,onClick:()=>{S.current||(S.current=!0,(0,X.r_)({op:"click",page_el_sn:227910}))}},r.createElement(oe,{placeholder:x("enterText"),minRows:2,className:b?de().error:de().textInputWarp,minHeight:38,maxRows:4,maxLength:y,focusClassName:de().focusClassName,isShow:!0,value:_,autoFocus:!1,autoShowCharCount:!0,onInput:R}))),r.createElement("div",{className:de().notice,style:{height:M}},r.createElement(fe,{failStatus:b,alertStatusTextMap:A,onHeightChange:L})),m?.length?r.createElement(ue,{textColorList:m,onColorItemClick:z,activeColor:d,idx:g}):null)}))),fe=e=>{let{failStatus:t,alertStatusTextMap:n,onHeightChange:a}=e;const s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(s.current){const{height:e}=s.current?.getBoundingClientRect()||{};a?.(e)}}),[t]),r.createElement("div",{ref:s},t?r.createElement(T.Fc,{type:T.SK.text,status:T.WH.redText,message:n[t],classConfig:{text:de().noticeText,textIcon:de().noticeTextIcon}}):null)},ge=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{textControlList:n,update:a,goodsId:s,surfaceRefuseRiskIds:o,removeSurfaceRefuseRiskIds:i,setRegionActiveIdx:c,isV3:l}=e;return(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>{const e=await Promise.all(n.map((e=>{let{ref:t}=e;return t.current?.checkDataValid?.()})));return e.every(Boolean)}}))),n?.length?n.map(((e,t)=>r.createElement(pe,{surfaceRefuseRiskIds:o,ref:n[t]?.ref,goodsId:s,data:e,isV3:l,setRegionActiveIdx:c,removeSurfaceRefuseRiskIds:i,key:t,update:a}))):null}))),he=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{goodsId:n,customizedTag:a,update:s,surface:o,surfaceIdx:i,setRegionActiveIdx:c,surfaceRefuseRiskIds:l,removeSurfaceRefuseRiskIds:u,editId:m,isV3:d}=e,p=(0,r.useRef)(),f=(0,r.useRef)(),{imgControlList:g,textControlList:h}=(0,r.useMemo)((()=>{const e=[],t=[];return o?.regions?.forEach(((n,a)=>{const{elements:s,textColorList:o}=n||{};s?.forEach(((n,s)=>{const{type:c}=n||{};if(c!==N.UM.image){if(c===N.UM.text){const{color:e}=n||{};t.push({surfaceIdx:i,regionIdx:a,elementIdx:s,element:n,ref:(0,r.createRef)(),textColorList:o,color:e||o?.[0]})}}else e.push({surfaceIdx:i,regionIdx:a,elementIdx:s,element:n,ref:(0,r.createRef)()})}))})),{imgControlList:e,textControlList:t}}),[o]);return(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>{const e=[];p.current&&e.push(p),f.current&&e.push(f);return(await Promise.all(e.map((e=>e.current?.checkDataValid())))).every(Boolean)}}))),r.createElement("div",null,g?.length?r.createElement(Y,{ref:p,update:s,editId:m,surface:o,setRegionActiveIdx:c,surfaceRefuseRiskIds:l,customizedTag:a,removeSurfaceRefuseRiskIds:u,imgControlList:g,isV3:d}):null,h?.length?r.createElement(ge,{textControlList:h,ref:f,isV3:d,goodsId:n,setRegionActiveIdx:c,removeSurfaceRefuseRiskIds:u,surfaceRefuseRiskIds:l,update:s}):null)})));var ye=n(14511),ve=n(80179),Ee=n(82370),xe=n(22703),Ie=n.n(xe),_e=function(e){return e.move="move",e.rotate="rotate",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.topLeft="top-left",e.topRight="top-right",e}(_e||{});const ke=(e,t)=>{[].concat(e).forEach((e=>{Object.entries(t||{}).forEach((t=>{let[n,r]=t;e.style[n]=r}))}))},be=e=>{const{topLeftRef:t,topRightRef:n,bottomLeftRef:a,bottomRightRef:s,resizerRef:o,wrapRef:i,onMoving:c,onScaling:l,onRotating:u,rotateRef:m,enableMove:d,enableScale:p,enableRotate:f,onEnd:g}=e,h=(0,r.useRef)({}),y=(0,r.useRef)({}),v=(0,r.useRef)(!1),E=(0,r.useRef)(),x=(0,r.useRef)(),I=(0,r.useRef)({x:0,y:0}),_=(0,r.useRef)(),k=(e,t)=>{const n={x:t.x,y:t.y,width:t.width,height:t.height,rotate:t.rotate},r={x:n.x+n.width/2,y:n.y+n.height/2},a=((e,t,n)=>{let r;switch(n){case"top-left":default:return r={x:e.x,y:e.y},F(r,t,e.rotate);case"top-right":return r={x:e.x+e.width,y:e.y},F(r,t,e.rotate);case"bottom-left":return r={x:e.x,y:e.y+e.height},F(r,t,e.rotate);case"bottom-right":return r={x:e.x+e.width,y:e.y+e.height},F(r,t,e.rotate)}})(n,r,e);return{rect:n,center:r,handlePoint:a,sPoint:{x:r.x+Math.abs(a.x-r.x)*(a.x<r.x?1:-1),y:r.y+Math.abs(a.y-r.y)*(a.y<r.y?1:-1)},ratio:n.width/n.height}},b=(0,r.useMemo)((()=>{const e=[];return d&&e.push({ref:o,action:_e.move}),p&&e.push({ref:a,action:_e.bottomLeft},{ref:s,action:_e.bottomRight},{ref:t,action:_e.topLeft},{ref:n,action:_e.topRight}),f&&e.push({ref:m,action:_e.rotate}),e}),[d,p,f,a,s,t,n,m,o]);(0,r.useEffect)((()=>{if(!o.current)return;const e={[_e.bottomLeft]:l,[_e.bottomRight]:l,[_e.topLeft]:l,[_e.topRight]:l,[_e.move]:c,[_e.rotate]:u},t=t=>{if(!v.current)return;const n=E.current;O(t),t.stopPropagation(),t=W(t);const r=((e,t,n,r,a)=>{const{left:s,top:o}=i.current.getBoundingClientRect()||{},c={...t.current},{x:l,y:u}=x.current||{},{x:m,y:d}=a.current||{},{clientX:p,clientY:f}=n,g=p-s-m,h=f-o-d,y=g-l,v=h-u;switch(e){case _e.move:c.top=t.current.y+v,c.left=t.current.x+y;break;case _e.topRight:{const e={x:g,y:h},{sPoint:n,rect:a,ratio:s}=r.current;let o=$(e,n),i=F(e,o,-a.rotate),l=F(n,o,-a.rotate),u=i.x-l.x,m=l.y-i.y;u/m>s?(i.y-=Math.abs(m-u/s),m=u/s):(i.x+=Math.abs(u-m*s),u=m*s);const d=F(i,o,a.rotate);if(o=$(d,n),i=F(d,o,-a.rotate),l=F(n,o,-a.rotate),u=i.x-l.x,m=l.y-i.y,5>u||5/s>m)return;c.left=l.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:l.x,y:i.y,height:m,width:u});break}case _e.topLeft:{const{sPoint:e,rect:n,ratio:a}=r.current,s={x:g,y:h};let o=$(s,e),i=F(s,o,-n.rotate),l=F(e,o,-n.rotate),u=l.x-i.x,m=l.y-i.y;u/m>a?(i.x+=Math.abs(u-m*a),u=m*a):(i.y+=Math.abs(m-u/a),m=u/a);const d=F(i,o,n.rotate);if(o=$(d,e),i=F(d,o,-n.rotate),l=F(e,o,-n.rotate),u=l.x-i.x,m=l.y-i.y,5>u||5/a>m)return;c.left=i.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:i.x,y:i.y,height:m,width:u});break}case _e.bottomRight:{const{sPoint:e,rect:n,ratio:a}=r.current,s={x:g,y:h};let o=$(s,e),i=F(e,o,-n.rotate),l=F(s,o,-n.rotate),u=l.x-i.x,m=l.y-i.y;u/m>a?(l.y+=Math.abs(m-u/a),m=u/a):(l.x+=Math.abs(u-m*a),u=m*a);const d=F(l,o,n.rotate);if(o=$(d,e),l=F(d,o,-n.rotate),i=F(e,o,-n.rotate),u=l.x-i.x,m=l.y-i.y,5>u||5/a>m)return;c.left=i.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:i.x,y:i.y,height:m,width:u});break}case _e.bottomLeft:{const{sPoint:e,rect:n,ratio:a}=r.current,s={x:g,y:h};let o=$(s,e),i=F(e,o,-n.rotate),l=F(s,o,-n.rotate),u=i.x-l.x,m=l.y-i.y;u/m>a?(l.y+=Math.abs(m-u/a),m=u/a):(l.x-=Math.abs(u-m*a),u=m*a);const d=F(l,o,n.rotate);if(o=$(d,e),l=F(d,o,-n.rotate),i=F(e,o,-n.rotate),u=i.x-l.x,m=l.y-i.y,5>u||5/a>m)return;c.left=l.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:l.x,y:i.y,height:m,width:u});break}case _e.rotate:{const e={x:g,y:h},{center:n}=r.current||{},{x:a,y:s}=n,o=Math.abs(e.x-a),i=Math.abs(e.y-s),l=Math.sqrt(o*o+i*i);let u=Math.round(Math.asin(i/l)/Math.PI*180);e.x>=a&&e.y<=s?u=90-u:e.x<=a&&e.y<=s?u=270+u:e.x<=a&&e.y>=s?u=270-u:e.x>=a&&e.y>=s&&(u=90+u),u=360===u?0:parseInt(u),c.rotate=u,c.top=t.current.y,c.left=t.current.x,t.current.rotate=u;break}}return c})(n,y,t,_,I)||{},{top:a,left:s,width:c,height:l,rotate:u}=r,m=e[n];m?.(r);const d={width:`${c}px`,height:`${l}px`,left:0,top:0,transform:`translate(${s}px,${a}px) rotate(${u}deg)`};h.current=r,o.current.dataset.width=c,o.current.dataset.height=l,o.current.dataset.left=s,o.current.dataset.top=a,o.current.dataset.rotate=u,ke(o.current,d)},n=e=>{if(!v.current)return;O(e),e.stopPropagation();const t=E.current;v.current=!1,_e.move===t&&(y.current.x=h.current.left,y.current.y=h.current.top),g?.(h.current)},r=b.map((e=>{const{ref:t,action:n}=e,r=t?.current;if(!r)return;const a=e=>{v.current=!0,E.current=n,O(e),e.stopPropagation(),e=W(e);const{clientX:t,clientY:r}=e||{},{left:a,top:s}=i.current.getBoundingClientRect()||{},c=t-a,l=r-s;x.current={x:c,y:l};const{top:u,left:d,width:p,height:f}=o.current?.getBoundingClientRect()||{},g=u-s,h=d-a,{top:b,left:w}=m?.current?.getBoundingClientRect()||{},S=b-s,C=w-a,{dataset:N}=o.current||{},{rotate:T,left:R,top:A,width:z,height:M}=N||{},L=[_e.bottomLeft,_e.bottomRight,_e.topLeft,_e.topRight].includes(n),P=n===_e.rotate;y.current.x=y.current.x||Number(R)||h,y.current.y=y.current.y||Number(A)||g,y.current.height=y.current.height||Number(M)||f,y.current.width=y.current.width||Number(z)||p,y.current.prevHeight=y.current.height||Number(M)||f,y.current.prevWidth=y.current.width||Number(z)||p,y.current.rotate=y.current.rotate||Number(T)||0,_.current=k(n,y.current)||{},I.current=L?{x:L?c-_.current?.handlePoint.x:0,y:L?l-_.current?.handlePoint.y:0}:P?{x:c-(C+we/2),y:l-(S+Se/2)}:{x:0,y:0}};return r.addEventListener("touchstart",a,{passive:!1}),r.addEventListener("mousedown",a),()=>{r.removeEventListener("mousedown",a),r.removeEventListener("touchstart",a)}}));return window.addEventListener("touchmove",t,{passive:!1}),window.addEventListener("mousemove",t),window.addEventListener("touchend",n,{passive:!1}),window.addEventListener("mouseup",n),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),r?.forEach((e=>e?.()))}}),[o.current,t.current,n.current,a.current,s.current,m?.current,b,c,u,l,g]);return{reset:()=>{I.current={x:0,y:0},x.current=void 0,y.current={},h.current={},_.current={}}}},we=13,Se=13,Ce=(0,ye.W4)({name:"EditorResizerWrap"})((e=>{const{children:t,resizerRef:n,topLeftRef:a,topRightRef:s,bottomLeftRef:o,bottomRightRef:i,wrapRef:c,initStyle:l,onMoving:u,onScaling:m,onRotating:d,onClick:p,dragEleRef:f,enableMove:g,enableScale:y,enableRotate:v,onEnd:E,resetDeps:x=[]}=e,{reset:I}=be({resizerRef:n,bottomLeftRef:o,bottomRightRef:i,topLeftRef:a,topRightRef:s,wrapRef:c,rotateRef:f,onMoving:u,onScaling:m,onRotating:d,enableMove:g,enableScale:y,enableRotate:v,onEnd:E});return(0,r.useEffect)((()=>{I()}),[...x]),r.createElement("div",{className:h()(Ie().resizer,Ie().pointerEnhance),ref:n,style:l,onMouseDown:p,onTouchStart:p},t,v?r.createElement("div",{className:Ie().dragPointer,ref:f,style:{width:we,height:Se}},r.createElement(Ee.Ay,{className:Ie().rotateIcon,alt:"",src:"https://aimg.kwcdn.com/upload_aimg/web/fb608889-ef9d-48e7-a42c-f4cbf0a3b0ef.png.slim.png"})):null,y?r.createElement(r.Fragment,null,r.createElement("div",{ref:a,className:h()(Ie().topLeft,Ie().pointer)}),r.createElement("div",{ref:s,className:h()(Ie().topRight,Ie().pointer)}),r.createElement("div",{ref:o,className:h()(Ie().bottomLeft,Ie().pointer)}),r.createElement("div",{ref:i,className:h()(Ie().bottomRight,Ie().pointer)})):null)}));var Ne=n(18906),Te=n.n(Ne);const Re=e=>{let{element:t,regionInfo:n,regionOriginInfo:a,scaleRatio:s,regionRefList:o,regionIdx:i,setRegionRefList:c,showRegionActive:l,elementIdx:u}=e;const{imageUrl:m,userPlacementData:d,renderUrl:p}=t||{},{regionWidth:f,regionLeft:g,regionHeight:h,regionTop:y}=n||{},{regionOriginWidth:v,regionOriginLeft:E,regionOriginHeight:x,regionOriginTop:I}=a||{},_=(0,r.useRef)(),k=(0,r.useMemo)((()=>{const{dimension:e,position:t,angleOfRotation:n=0,scale:r}=d||{},{scaleX:a=1,scaleY:o=1}=r||{},{width:i=0,height:c=0}=e||{},l=!t?.x&&!t?.y,{x:u=0,y:m=0}=t||{},p=i>=c,E=(p?v:x)/(p?i:c);if(l){const e=E*s*i,t=E*s*c,r=(f-e)/2,a=(h-t)/2;return{width:e,height:t,left:0,top:0,transform:`translate(${r}px, ${a}px) rotate(${n}deg)`,datasetLeft:r+g,datasetTop:a+y}}return{width:i*a*s,height:c*o*s,left:0,top:0,transform:`translate(${u*s-g}px, ${m*s-y}px) rotate(${n}deg)`,datasetLeft:u*s,datasetTop:m*s}}),[p]);return(0,r.useEffect)((()=>{c((e=>{const t=[...e];return t[i]=_,t}))}),[m,p,_.current,i]),m&&p?r.createElement("div",{onClick:()=>{l()},role:"button",tabIndex:0,className:Te().imgWrap,style:{width:f,height:h,top:y,left:g}},r.createElement("img",{alt:"",ref:_,"data-regionidx":i,"data-elementidx":u,"data-width":k?.width,"data-left":k?.datasetLeft,"data-top":k?.datasetTop,"data-height":k?.height,"data-rotate":d?.angleOfRotation,src:p,className:Te().uploadImg,style:k})):null};var Ae=n(5676),ze=n.n(Ae);const Me=e=>{let{element:t,regionInfo:n,regionOriginInfo:a,scaleRatio:s,color:o,regionRefList:i,regionIdx:l,showRegionActive:u,setRegionRefList:m,elementIdx:d}=e;const{text:p,userPlacementData:f,textAlign:g=1}=t||{},{t:h}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),y=(0,r.useRef)(null);(0,r.useEffect)((()=>{m((e=>{const t=[...e];return t[l]=y,t}))}),[p,y.current,l]);const v=Number(h("defaultFontSize"))||12,{regionWidth:E,regionLeft:x,regionHeight:I,regionTop:_}=n||{},k=(0,r.useMemo)((()=>{const{fontSize:e=v,position:t}=f||{},{x:n=0,y:r=0}=t||{},a=!t,{red:i=0,green:c=0,blue:l=0}=o||{};if(a){const t=g===N.Rx.left?0:g===N.Rx.right?E-e:g===N.Rx.center?(E-e)/2:0;return{fontSize:e,color:`rgb(${i}, ${c}, ${l})`,top:(I-e)/2,left:t,datasetLeft:t+x,datasetTop:(I-e)/2+_}}return{fontSize:e*s,color:`rgb(${i}, ${c}, ${l})`,top:r*s-_,left:n*s-x,datasetLeft:n*s,datasetTop:r*s}}),[n]);if(!p)return null;const{red:b=0,green:w=0,blue:S=0}=o||{},C=`rgb(${b}, ${w}, ${S})`;return r.createElement("div",{onClick:()=>{u()},className:ze().textWrap,role:"button",tabIndex:0,style:{width:E,height:I,top:_,left:x}},r.createElement("div",{ref:y,className:ze().uploadText,style:{...k,color:C},"data-elementidx":d,"data-latestfontsize":k?.fontSize,"data-height":k?.fontSize,"data-prevfontsize":k?.fontSize,"data-left":k?.datasetLeft,"data-top":k?.datasetTop},p))};var Le=n(18298),Pe=n.n(Le);const De=e=>{let{region:t,scaleRatio:n,regionRefList:a,regionIdx:s,setRegionRefList:o,setRegionActiveIdx:i,templateType:l}=e;const{elements:u,dimension:m,position:d,textColorList:p}=t||{},{width:f,height:g}=m||{},{x:h,y:y}=d||{},{t:v}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),E=(0,r.useMemo)((()=>({regionWidth:f*n,regionHeight:g*n,regionLeft:h*n,regionTop:y*n})),[f,g,h,y,n]),x=(0,r.useMemo)((()=>({regionOriginHeight:g,regionOriginWidth:f,regionOriginLeft:h,regionOriginTop:y})),[g,h,y,f]),I=(0,r.useMemo)((()=>{const{regionWidth:e,regionHeight:t,regionLeft:n,regionTop:r}=E;return{width:e,height:t,left:n,top:r}}),[E]),_=(0,r.useCallback)((()=>{i(s)}),[s,i]);return f&&g?r.createElement(r.Fragment,null,r.createElement("div",{className:Pe().region,style:{...I}},r.createElement("div",{className:Pe().idxTag},s+1),a?.length>1?null:r.createElement("div",{className:Pe().overflowNotice},r.createElement("div",{className:Pe().overflowNoticeText},v("overflowNotice")))),u?.map(((e,t)=>{const{type:i}=e||{};if(i===N.UM.image)return r.createElement(Re,{key:t,elementIdx:t,regionRefList:a,setRegionRefList:o,regionIdx:s,element:e,showRegionActive:_,scaleRatio:n,regionInfo:E,regionOriginInfo:x});if(i===N.UM.text&&l===N.YQ.both){const{color:i}=e||{};return r.createElement(Me,{key:t,elementIdx:t,color:i||p?.[0],regionRefList:a,setRegionRefList:o,regionIdx:s,scaleRatio:n,showRegionActive:_,element:e,regionInfo:E,regionOriginInfo:x})}}))):null};var Ue=n(60725),Be=n.n(Ue);const We=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generatePreviewLoadImgError:";return Promise.all(e.map((e=>{let{url:n,useCredentials:r}=e;return new Promise(((e,a)=>{if(!n)return e(null);const s=new Image;s.crossOrigin=r?"use-credentials":"anonymous",s.src=n,s.onload=()=>e(s),s.onerror=()=>{(0,p.A)(`${t}${r}`),e(null)}}))})))},Oe=e=>{const{width:t,height:n}=e||{};return t&&n?t>=n?{width:"100%",height:"auto"}:{height:"100%",width:"auto"}:null},He=(e,t)=>{const{t:n}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:a}=(0,c.B)("bec-fe.web-sku-selector"),{setEditId:s,baseImage:o,maskImage:i,customizedTag:l,regions:u,regionActiveIdx:d,setRegionActiveIdx:g,surface:y,templateType:v,isV3:E,onClose:x}=e,{imageUrl:I,dimension:_}=o||{},{imageUrl:k,dimension:b}=i||{},{width:w,height:S}=_||{},C=380/Math.max(w,S),T=(0,r.useMemo)((()=>Oe(_)),[_]),R=(0,r.useMemo)((()=>Oe(b)),[b]),A=Number(n("defaultFontSize"))||12,z=(0,r.useRef)(),M=(0,r.useRef)(),L=(0,r.useRef)(),P=(0,r.useRef)(),D=(0,r.useRef)(),U=(0,r.useRef)(),W=(0,r.useRef)(),O=(0,r.useRef)(),H=(0,r.useRef)(),{width:F,height:$,left:V=0,top:q=0}=H.current?.getBoundingClientRect()||{},G=u?.[d],{type:j}=G?.elements?.[0]||{},K=(0,r.useMemo)((()=>u?.some((e=>{const{width:t,height:n}=e?.dimension||{};return t&&n}))),[u]),[J,Q]=(0,r.useState)(!0),[Y,X]=(0,r.useState)(new Array(u?.length||0).fill(void 0)),Z=Y[d],[ee,te]=(0,r.useState)();(0,r.useEffect)((()=>{U.current&&ke([U.current],(()=>{if(!Z?.current)return null;const{width:e,height:t,left:n,top:r}=Z.current?.getBoundingClientRect()||{},{left:a=0,top:s=0}=H.current?.getBoundingClientRect()||{},o=n-a,i=r-s,{dataset:c}=Z.current,{elementidx:l=0,width:u,height:m,left:d,top:p,rotate:f,latestfontsize:g}=c||{},{elements:h}=G,{userPlacementData:y,type:v}=h?.[l]||{},E=(N.UM.image,v===N.UM.text),{position:x,dimension:I,scale:_,angleOfRotation:k=0,fontSize:b=A}=y||{},{width:w=0,height:S=0}=I||{},{x:T=0,y:R=0}=x||{},{scaleX:z=1,scaleY:M=1}=_||{},L=e/t,P=Math.min(e,t);U.current&&(U.current.dataset.rotate=`${k}`);const D=void 0!==f?Number(f):k,B=E?e:void 0!==u?Number(u):e,W=E?t:void 0!==m?Number(m):t,O=void 0!==d?Number(d):o,F=void 0!==p?Number(p):i,$=void 0!==g?Number(g):b*C;return U.current&&(U.current.dataset.left=d||""+T*C,U.current.dataset.top=p||""+R*C,U.current.dataset.width=B||""+w*z,U.current.dataset.height=W||""+S*M,U.current.dataset.rotate=`${D}`,E&&(U.current.dataset.latestfontsize=`${$}`,U.current.dataset.prevfontsize=`${$}`)),!x&&2>=P?{left:0,top:0,width:(L<1?2:e)-2+"px",height:(L<1?t:2)-2+"px",transform:`translate(${o}px,${i}px) rotate(${k}deg)`}:{left:0,top:0,width:`${B}px `,height:`${W}px`,transform:`translate(${O}px,${F}px) rotate(${D}deg)`,fontSize:$}})())}),[Z?.current,G,d]),(0,r.useImperativeHandle)(t,(()=>({generatePreviewImg:async()=>{const e=H.current;if(!e||!u.find((e=>e?.dimension?.width&&e?.dimension?.height)))return;(0,p.A)("generatePreivewImg start");const{left:t,top:n}=e.getBoundingClientRect()||{};(0,p.A)("generatePreivewImg before collectData2Submit");const r=(e=>{const{regions:r}=e||{},a=r.map(((e,r)=>{const{dimension:a,elements:s}=e||{},o=Y[r]?.current;if(!o||!a?.width||!a.height)return e;const{dataset:i}=o,{latestfontsize:c,rotate:l,elementidx:u,width:m,left:d,top:p}=i||{},{width:f,height:g,top:h,left:y}=o.getBoundingClientRect()||{},v=h-n,E=y-t,x=s.map(((e,t)=>{if(t!==Number(u))return e;const{userPlacementData:n,type:r}=e||{},{dimension:a}=n||{},s=r===N.UM.image,o=r===N.UM.text,i=Number(m)||f,g=a?.width?Number(i)/C/a.width:void 0,h=void 0!==d?Number(d):E,y=void 0!==p?Number(p):v,x={position:{x:h/C,y:y/C}};return a?.width&&(x.dimension=a),void 0!==l&&s&&(x.angleOfRotation=Number(l)),void 0!==g&&(x.scale={scaleX:g,scaleY:g}),void 0!==c&&o&&(x.fontSize=Number(c)/C),e.userPlacementData=x,e}));return{...e,elements:x}}));return{...e,regions:a}})(y),{baseImage:s,maskImage:o}=y||{},{imageUrl:i,dimension:c}=s||{},{imageUrl:d,dimension:g}=o||{},h=document.createElement("canvas");h.width=w,h.height=S;const v=h.getContext("2d");(0,p.A)("generatePreivewImg before regions2Canvas");const I=await(async e=>{const{regions:t,baseImage:n}=e||{},{imageUrl:r,dimension:s}=n||{},{width:o,height:i}=s||{},c=await Promise.all(t.map((async(e,t)=>{const{dimension:n,position:r,elements:s,textColorList:o}=e||{},{width:i,height:c}=n||{},{x:l,y:u}=r||{},d=Y?.[t]?.current,{dataset:f}=d||{},{elementidx:g}=f||{},{color:h=o?.[0]}=s?.[g]||{};if(i&&c&&d){const{userPlacementData:e,type:n,renderUrl:r,text:o}=s?.[g]||{},{width:f,height:y}=d?.getBoundingClientRect?.()||{},v=n===N.UM.image,I=n===N.UM.text,_=document.createElement("canvas"),k=_.getContext("2d");if(_.width=i,_.height=c,v&&k){const{x:n=0,y:s=0}=e?.position||{},{scaleX:o=1,scaleY:d=1}=e?.scale||{},{width:g=0,height:h=0}=e?.dimension||{},[v]=await We([{url:r,useCredentials:!0}],"uploadImgLoadError"),E=g*o||f/C,I=h*d||y/C,{canvas:b,gapX:w,gapY:S,width:N,height:T}=(e=>{let{width:t,height:n,angle:r,image:a}=e;const s=document.createElement("canvas"),o=s.getContext("2d");let i=0,c=0;const l=r*Math.PI/180,u=Math.sin(l),m=Math.cos(l);let d=Math.abs(t*m)+Math.abs(n*u),f=Math.abs(t*u)+Math.abs(n*m);return 90!==r&&270!==r||(d=n,f=t),d>0&&f>0&&a||(0,p.A)("generateImgCanvasInvalid",{fields:{data:JSON.stringify({width:t,height:n,angle:r,newWidth:d,newHeight:f})}}),i=(d-t)/2,c=(f-n)/2,s.width=d,s.height=f,o?.translate(d/2,f/2),o?.rotate(r*Math.PI/180),o?.drawImage(a,-t/2,-n/2,t,n),{canvas:s,width:d,height:f,gapX:i,gapY:c}})({width:E,height:I,angle:Number(e?.angleOfRotation)||0,image:v});try{k.drawImage(b,-l+n-w,-u+s-S,N,T)}catch(n){x?.(),m.A.error(a("networkError")),(0,p.A)("generateImgCanvas error",{fields:{data:JSON.stringify({newImgWidth:N,newImgHeight:T,imgWidth:E,imgHeight:I,regionIdx:t,scaleX:o,scaleY:d,uploadImgWidth:g,uploadImgHeight:h,scale:e?.scale,position:e?.position})}})}return{canvas:_,width:i,height:c,x:l,y:u}}if(I&&k&&E){const{x:n=0,y:r=0}=e?.position||{},{red:s,green:d,blue:f}=h||{},{fontSize:g}=e||{};k.font=`normal 400 ${g}px serif`;const y=`rgb(${s}, ${d}, ${f})`,v="http://www.w3.org/2000/svg",E=document.createElementNS(v,"svg"),I=document.createElementNS(v,"foreignObject");E.setAttributeNS(null,"width",i.toString()),E.setAttributeNS(null,"height",c.toString()),I.setAttributeNS(null,"width","100%"),I.setAttributeNS(null,"height","100%"),I.setAttributeNS(null,"x",(n-l).toString()),I.setAttributeNS(null,"y",(r-u).toString()),I.setAttributeNS(null,"externalResourcesRequired","true"),E.appendChild(I);const b=document.createElement("p"),w=o?.split("\n");w.forEach(((e,t)=>{if(t>=1){const e=document.createElement("br");b.appendChild(e)}const n=document.createTextNode(e);b.appendChild(n)})),b.style.margin="0",b.style.fontWeight="400",b.style.fontFamily="serif",b.style.fontSize=`${g}px`,b.style.lineHeight=`${g}px`,b.style.whiteSpace="pre",b.style.color=y,I.appendChild(b);const S=`data:image/svg+xml;charset=utf-8,${encodeURIComponent((new XMLSerializer).serializeToString(E))}`,[C]=await We([{url:S}],"textImgLoadError");try{k.drawImage(C,0,0,i,c)}catch(e){x?.(),m.A.error(a("networkError")),(0,p.A)("generateTextSvgCanvas error",{fields:{data:JSON.stringify({regionWidth:i,regionHeight:c,regionIdx:t,fontSize:g})}})}return{canvas:_,width:i,height:c,x:l,y:u}}}})));return c})(r);if(v){const[e,t]=await We([{url:i},{url:d}],"baseOrMaskImgLoadError");if(d&&!t||i&&!e)return x?.(),void m.A.error(a("networkError"));v.drawImage(e,0,0,w,S),(0,p.A)(`generatePreivewImg before drawImageList len:${I?.length}, type:${typeof I}`),I.forEach(((e,t)=>{const{canvas:n,x:r=0,y:s=0,width:o=0,height:i=0}=e||{};if(n)try{v.drawImage(n,r,s,o,i)}catch(e){x?.(),m.A.error(a("networkError")),(0,p.A)("mergeCanvasList error",{fields:{data:JSON.stringify({width:o,height:i,idx:t,innerCanvasWidth:n?.width,innerCanvasHeight:n?.height,x:r,y:s})}})}})),t&&v.drawImage(t,0,0,g.width,g.height)}(0,p.A)("generatePreivewImg canvas toDataURL");const _=h.toDataURL();(0,p.A)("generatePreivewImg canvasDataUrl toFile");const k=B(_);(0,p.A)("generatePreivewImg upload start",{fields:{data:JSON.stringify({length:_?.length})}});const{url:b}=await(0,f.Fx)(k,{tag:l,eventName:"uploadMergedImg"});return b&&(0,p.A)("generatePreivewImg upload success"),{mergedImg:b}}})));const ne=(0,r.useCallback)((()=>{Q(!0)}),[]),{run:re}=(0,ve.A)(s,{wait:50}),ae=(0,r.useCallback)((e=>{if(!Z.current)return;const{left:t=0,top:n=0}=H.current?.getBoundingClientRect()||{},{parentElement:r,dataset:a}=Z.current,{elementidx:s=""}=a||{},{type:o}=G?.elements?.[s]||{};o===N.UM.image&&re((e=>e+1));const{left:i=0,top:c=0}=r?.getBoundingClientRect()||{},l=i-t,u=c-n,{left:m,top:d,rotate:p=0,width:f,height:g}=e||{};Z.current.style.transform=`translate(${m-l}px,${d-u}px) rotate(${p}deg)`,Z.current.style.left=0,Z.current.style.top=0,Z.current.dataset.left=m,Z.current.dataset.top=d,Z.current.dataset.width=f,Z.current.dataset.height=g,Z.current.dataset.rotate=p}),[Z?.current,d,G]),se=(0,r.useCallback)((()=>{if(!Z.current)return;const{dataset:e}=Z.current,{elementidx:t=""}=e||{},{type:n,userPlacementData:r}=G?.elements?.[t]||{};if(n===N.UM.text){const{fontSize:e=A}=r||{};Z.current.dataset.prevfontsize=Z.current.dataset.latestfontsize||e}}),[Z?.current,d,G]),oe=(0,r.useCallback)((e=>{if(!Z.current)return;const{left:t,top:n,rotate:r=0,width:a,height:s}=e||{},{left:o=0,top:i=0}=H.current?.getBoundingClientRect()||{},{parentElement:c,dataset:l}=Z.current,{elementidx:u=""}=l||{},{type:m}=G?.elements?.[u]||{};m===N.UM.image&&re((e=>e+1));const{left:d=0,top:p=0}=c?.getBoundingClientRect()||{},f=d-o,g=p-i;Z.current.style.transform=`translate(${t-f}px,${n-g}px) rotate(${r}deg)`,Z.current.style.left=0,Z.current.style.top=0,Z.current.dataset.left=t,Z.current.dataset.top=n,Z.current.dataset.width=a,Z.current.dataset.height=s,Z.current.dataset.rotate=r}),[Z?.current,d,G]),ie=(0,r.useCallback)((e=>{if(!Z.current)return;const{left:t,top:n,rotate:r=0,width:a,height:s,prevHeight:o}=e||{},{parentElement:i,dataset:c}=Z.current,{elementidx:l=""}=c||{},{left:u=0,top:m=0}=H.current?.getBoundingClientRect()||{},{type:d,userPlacementData:p}=G?.elements?.[l]||{},f=d===N.UM.image,g=d===N.UM.text;f&&re((e=>e+1));const h=c.prevfontsize||p?.fontSize*C||A,{left:y=0,top:v=0}=i?.getBoundingClientRect()||{},E=y-u,x=v-m;if(Z.current.style.transform=`translate(${t-E}px,${n-x}px) rotate(${r}deg)`,g||(Z.current.style.width=`${a}px`),Z.current.style.height=`${s}px`,Z.current.style.left=0,Z.current.style.top=0,Z.current.dataset.left=t,Z.current.dataset.top=n,Z.current.dataset.width=a,Z.current.dataset.height=s,Z.current.dataset.rotate=r,d===N.UM.text){const e=Number(h)*(s/o);Z.current.dataset.latestfontsize=e,Z.current.style.fontSize=`${e}px`}}),[Z?.current,G,d]),{enableMove:ce,enableScale:le,enableRotate:ue}=(0,r.useMemo)((()=>{const{elements:e,dimension:t}=u[d]||{},{width:n,height:r}=t||{},{type:a}=e?.[0]||{};let s=!1,o=!1,i=!1;return a===N.UM.text&&n&&r&&E&&(s=!0,o=!0,i=!1),a===N.UM.image&&r&&n&&(s=!0,o=!0,i=!0),{enableMove:s,enableScale:o,enableRotate:i}}),[Z,d,u]),me=(0,r.useMemo)((()=>{const{type:e,text:t}=G?.elements?.[0]||{},n=[d];return e===N.UM.text&&n.push(t),n}),[d,G]);return(0,r.useEffect)((()=>{(async()=>{const e=[];I&&e.push({url:I}),k&&e.push({url:k});const t=await We(e,"initImgError");t?.some((e=>!e))&&u?.find((e=>e.dimension?.width&&e.dimension?.height))&&((0,p.A)("skuCustomizedInitImgError"),m.A.error(a("networkError")),x())})()}),[]),r.createElement("div",{className:Be().wrap,ref:H},r.createElement("div",{className:Be().baseBottom,onClick:()=>{g(-1)},"aria-label":"mask",role:"button",tabIndex:0}),I?r.createElement("img",{alt:"",src:I,className:h()(Be().bottomImg,Be().img),ref:W,style:T}):null,K?r.createElement(r.Fragment,null,u?.map(((e,t)=>r.createElement(De,{region:e,key:t,regionIdx:t,scaleRatio:C,templateType:v,setRegionActiveIdx:g,setRegionRefList:X,regionRefList:Y}))),k?r.createElement("img",{alt:"",src:k,className:h()(Be().topImg,Be().img,Be().maskImg),ref:O,style:R}):null,Z?.current?r.createElement(Ce,{enableMove:ce,enableScale:le,enableRotate:ue,onClick:ne,resizerRef:U,dragEleRef:P,onEnd:se,bottomLeftRef:L,bottomRightRef:D,topLeftRef:z,topRightRef:M,initStyle:ee,wrapRef:H,resetDeps:me,onMoving:ae,onRotating:oe,onScaling:ie}):null):null)},Fe=(0,ye.W4)({name:"EditorPreview"})((0,r.memo)((0,r.forwardRef)(He)));var $e=n(65580),Ve=n.n($e);const qe=(0,r.memo)((function(e){let{surface:t,customizedType:n,goodsId:a,customizedTag:s,btnText:o,surfaceIdx:l,update:u,onClick:m,templateType:d,surfaceRefuseRiskIds:p,editId:f,setEditId:g,isV3:_,removeSurfaceRefuseRiskIds:k,onClose:b}=e;const{regions:w,baseImage:S,maskImage:T}=t||{},[R,A]=(0,r.useState)(0),z=n===N.BO.oldText,M=(0,r.useRef)(),L=(0,r.useRef)(),{t:P}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:D}=(0,c.B)("bec-fe.web-sku-selector"),U=(0,r.useCallback)((async()=>{await(m?.({previewRef:M,controlRef:L,surface:t,surfaceIdx:l}))}),[M,L,t,l]);return r.createElement(r.Fragment,null,r.createElement("div",{className:h()(Ve().content,{[Ve().contentMinHeight]:!z})},z?null:r.createElement("div",{className:Ve().left},r.createElement("div",{className:Ve().leftTitle},P("approximatePreview")),r.createElement(Fe,{ref:M,customizedTag:s,baseImage:S,maskImage:T,setEditId:g,onClose:b,regions:w,isV3:_,templateType:d,regionActiveIdx:R,setRegionActiveIdx:A,surface:t})),r.createElement("div",{className:Ve().right},r.createElement(he,{ref:L,customizedTag:`${s}`,goodsId:`${a}`,surface:t,editId:f,isV3:_,removeSurfaceRefuseRiskIds:k,regionActiveIdx:R,surfaceRefuseRiskIds:p,setRegionActiveIdx:A,update:u,surfaceIdx:l}),r.createElement("div",{className:Ve().sensitiveTips},r.createElement(y.x,{t:P,i18nKey:"newSensitiveTips",ns:"bec-fe.web-sku-selector"},r.createElement("span",{className:Ve().sensitiveUnderline,onClick:()=>{const e=(0,i.A)(r.createElement(C,{onClose:()=>e?.()}),{})},role:"button",tabIndex:0}),r.createElement("span",{className:Ve().sensitiveUnderline,onClick:()=>{const e=P("link.privacyPageUrl");e&&(0,x.MJ)(e,{openTarget:"_blank"})},role:"button",tabIndex:0}))),r.createElement(I.Ay,{page_el_sn:227911},r.createElement("div",{className:Ve().btnWrap},r.createElement(v.A,{size:"xl",type:E.el.primary,className:Ve().addCartBtn,onClick:U,timeout:5e4},o||D("add_to_cart")))))))}));var Ge=n(83464),je=n.n(Ge);const Ke=(0,r.memo)((e=>{let{onClose:t,customizationData:n,onClick:s,goodsId:o,skuId:i,btnText:l,customText:g,customTextLimit:h,titleDesc:y,urlMap:v,customizedType:E,customizedTag:x,templateType:I,templateId:_,snapshotId:k}=e;const{surfaces:b}=n||{},[w,S]=(0,r.useState)(!1),[C,T]=(0,r.useState)(0),R=E===N.BO.oldText,A=I===N.YQ.both,[z,M]=(0,r.useState)({}),L=(0,r.useCallback)((e=>{let{regionIdx:t,surfaceIdx:n,elementIdx:r}=e;M((e=>{const a=e?.[`${n}`]||[],s=`${t}${r}`;return{...e,[n]:a?.filter((e=>e.riskId!==s))}}))}),[]),[P,D]=(0,r.useState)((e=>{const{surfaces:t,decryptUrlMap:n,customizedType:r,customText:a="",customTextLimit:s}=e||{};return r===N.BO.oldText?[{regions:[{elements:[{text:a,lengthLimit:s,require:!0,type:N.UM.text}]}]}]:n?(t.forEach((e=>{e.regions?.forEach((e=>{e.elements.forEach((e=>{const{imageUrl:t,type:r}=e||{};r===N.UM.image&&t&&(e.renderUrl=n[t]?.signedUrl)}))}))})),t):t})({surfaces:b,decryptUrlMap:v,customizedType:E,customText:g,customTextLimit:h})),U=(0,r.useCallback)((e=>{const{surfaceIdx:t,regionIdx:n,elementIdx:r,newElement:a,newRegion:s,newSurface:o}=e||{};P?.length&&D((e=>{const i=e[t],{regions:c}=i,l=c[n],{elements:u}=l;return e.map(((e,i)=>i!==t?e:{...e,...o,regions:c?.map(((e,t)=>t!==n?e:{...e,...s,elements:u?.map(((e,t)=>t!==r?e:{...e,...a}))}))}))}))}),[b]),{t:B}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:W}=(0,c.B)("bec-fe.web-sku-selector"),O=(0,u.A)((async e=>{let{controlRef:r,previewRef:c,surface:l,surfaceIdx:u}=e;S(!0);const{baseImage:d,regions:g}=l||{},h=await(r.current?.checkDataValid?.());if((0,p.A)(`customizedSubmitClick valid：${h}`),h){const e=async()=>{const e=[],t=[];g.forEach(((n,r)=>{const{elements:a}=n||{};a.forEach((n=>{const{type:a}=n||{};a===N.UM.image&&n.imageUrl&&e.push({previewType:N.tz.uploadImg,imageUrl:n.imageUrl,customizedAreaId:r}),a===N.UM.text&&n.text?.length&&t.push({previewType:N.tz.text,customizedText:n.text,customizedAreaId:r})}))}));const n=await(c.current?.generatePreviewImg?.()),{mergedImg:r}=n||{};if(g?.find((e=>e?.dimension?.width&&e?.dimension?.height))&&!r)throw m.A.error(W("networkError")),new Error("customizedSubmitClickMergeImgFail");const a=[];return(r||d?.imageUrl)&&a.push({previewType:N.tz.mergeImg,imageUrl:r||d?.imageUrl}),a.push(...e,...t),a},r=async e=>{const{result:t}=await(0,f.tB)({goodsId:`${o}`,previewInfos:e}),{riskStatus:n,refuseRiskIds:r}=t||{};return!r?.length&&n||(0,p.A)("customized verify risk fail"),{refuseRiskIds:r,riskStatus:n}};try{const a=async()=>{const e=g?.[0]?.elements?.[0]?.text,n=[{previewType:N.tz.text,customizedText:e,riskId:"00"}],{riskStatus:a,refuseRiskIds:s}=await r(n);if(!a)return s?.length&&M((e=>({...e,[u]:s.map((e=>{const t=n.find((t=>t.riskId===e));if(t){const{riskId:e,previewType:n}=t||{};return{riskId:e,previewType:n}}return null})).filter(Boolean)}))),void S(!1);let c;try{c=await(0,f.U2)({goodsId:o,skuId:i,lastSnapshotId:k,customizedText:e})}catch(e){throw t?.(),new Error("createCustomInfo error")}return c},c=async()=>{const a={goodsId:o,skuId:i,lastSnapshotId:k};_&&(a.templateId=_),I&&(a.templateType=I);const s=await e(),c=(()=>{const e=[{...s?.find((e=>e.previewType===N.tz.mergeImg)),riskId:"0"}];return g.forEach(((t,n)=>{const{elements:r}=t||{};r.forEach(((t,r)=>{const{type:a}=t||{};a===N.UM.image&&t.imageUrl&&e.push({previewType:N.tz.uploadImg,imageUrl:t.imageUrl,riskId:`${n}${r}`}),a===N.UM.text&&t.text?.length&&e.push({previewType:N.tz.text,customizedText:t.text,riskId:`${n}${r}`})}))})),e})(),{riskStatus:l,refuseRiskIds:m}=await r(c);if(!l)return m?.length&&M((e=>({...e,[u]:m.map((e=>{const t=c.find((t=>t.riskId===e));if(t){const{riskId:e,previewType:n}=t||{};return{riskId:e,previewType:n}}return null})).filter(Boolean)}))),void S(!1);const d={customizedData:(p={...n,surfaces:P},p?(p?.surfaces.forEach((e=>{e.regions?.forEach((e=>{e.elements.forEach((e=>{e&&"object"==typeof e&&delete e.renderUrl}))}))})),p):p),previewInfos:s};var p;const h={...a,...d};let y;try{y=await(0,f.U2)(h)}catch(e){throw t?.(),new Error("createCustomInfo error")}return y},d=await(R?a():c()),{customizedSnapshotId:h,success:y,toast:v}=d?.result||{};if(S(!1),y&&h)return(0,p.A)("customizedSubmit success"),s?.({data:n,customizedSnapshotId:h,customizedText:h?null:l?.[0]?.regions?.[0]?.elements?.[0]?.text}),void t?.();v&&m.A.error(v)}catch(e){(0,a.fL)(e,{error_message:"customizedSubmitClick fail"}),(0,p.A)("customizedSubmitClick fail"),m.A.error(W("networkError"))}}S(!1)}));return r.createElement(d.Ay,{onClick:t,maskClosable:!1,wrapClassName:je().popup,className:je().content},r.createElement("div",{className:je().wrap},r.createElement("div",{className:je().title},B("personalize")),y?r.createElement("div",{className:je().titleDesc},y):null,P?.map(((e,n)=>e?r.createElement(qe,{key:n,editId:C,isV3:A,setEditId:T,surfaceIdx:n,surface:e,onClick:O,surfaceRefuseRiskIds:z?.[n],removeSurfaceRefuseRiskIds:L,goodsId:o,templateType:I,onClose:t,btnText:l,customizedType:E,customizedTag:x,update:U}):null)),w?r.createElement("div",{className:je().mask}):null))})),Je=async e=>{let{goodsId:t,skuId:n,clickCb:a,btnText:c,onError:u,onClose:d,titleDesc:g}=e;try{const{result:e}=await(0,f.Mv)({goodsId:t,skuId:n}),{customizedType:l,customizedTextMaxLength:u,customizedTemplate:m,customizedTag:p,templateType:h,templateId:y}=e||{},v=m?(0,s.Cb)((0,o.NS)(m)):void 0,E=e=>{a?.({...e,customizedOperateType:1})},x=(0,i.A)(r.createElement(Ke,{customizationData:v,btnText:c,titleDesc:g,onClose:()=>{x?.(),d?.()},goodsId:t,skuId:n,templateType:h,templateId:y,onClick:E,customizedType:l,customizedTag:p,customTextLimit:u}),{})}catch(e){u?.(),(0,p.A)("showAddCustomInfoEditorError"),m.A.error((0,l.t)("networkError",{ns:"bec-fe.web-sku-selector"}))}}},79691:function(e,t,n){"use strict";n.d(t,{Fx:function(){return h},JS:function(){return I},Mv:function(){return v},U2:function(){return x},bv:function(){return y},tB:function(){return E}});var r=n(59024),a=n(56733),s=n(24808),o=n(83836),i=n(94971),c=n(52571),l=n(64491),u=n(7682);let m;const d=async e=>{let{url:t,params:n={},config:r={},disableCamel:a=!1}=e;return m||(m=(0,l.Km)({})),m.post(t,n,r).then((e=>a?e:(0,o.Cb)(e)))},p=async e=>{let{url:t,params:n={},config:r={},disableCamel:a=!1}=e;return d({url:t,params:n,config:{useAntiToken:!0,useRiskRetry:!0,...r},disableCamel:a})},f=e=>{const t=window.location.hostname.includes(a.Zc),n=(0,i.Ri)("region");return(new c.Ay).withCredentials().setScene(c.ju.C_END).setDr((0,s.xc)(+n)).setRegionId(+n).setSignatureHost(location.host).isProduct(!t).setTag(e).init()};let g;const h=(e,t)=>{const{tag:n,onProgress:a,eventName:s="uploadImg"}=t||{};return g||(g=f(n)),new Promise(((t,n)=>{let o=g.uploadImage().setData(e).saveOriginalImage();return o=o.onProgress((e=>a?.(e))),o.build().then(t).catch((()=>{n(),(0,r.A)(`${s}fail`)}))}))},y=(e,t)=>{const{tag:n,onProgress:r}=t||{};g||(g=f(n));let a=g.uploadImage().setData(e).saveOriginalImage();return a=a.onProgress((e=>r?.(e))),{instance:a,upload:async()=>new Promise(((e,t)=>a.build().then(e).catch(t)))}},v=async e=>{let{goodsId:t,skuId:n,snapshotId:r}=e;const{result:a}=await d({url:"/api/bg/bg-uranus-api/customized/template",params:{goods_id:t,sku_id:n,customized_snapshot_id:r},disableCamel:!0}),{url_map:s={},...i}=a||{};return{result:{...(0,o.Cb)(i),urlMap:Object.keys(s).reduce(((e,t)=>{const{signed_url:n}=s?.[t]||{};return e[t]={signedUrl:n},e}),{})}}},E=e=>{let{goodsId:t,previewInfos:n}=e;return p({url:"/api/bg/bg-uranus-api/customized/risk_status",params:{goods_id:t,preview_infos:(0,u.qi)(n)}})},x=e=>{let{goodsId:t,skuId:n,customizedText:a,previewInfos:s,customizedData:o,templateId:i,templateType:c,lastSnapshotId:l}=e;return(0,r.A)("createCustomInfo start"),p({url:"/api/bg/bg-uranus-api/customized/create",params:{goods_id:t,sku_id:n,customized_text:a,customized_data:o&&JSON.stringify((0,u.qi)(o)),preview_infos:s&&(0,u.qi)(s),template_id:i?`${i}`:null,template_type:c,last_snapshot_id:l}})},I=e=>{let{goodsId:t,skuId:n,skuNum:r,snapshotList:a}=e;return p({url:"/api/bg/bg-uranus-api/customized/preview_list",params:{sku_id:n,sku_num:r,customized_snapshots:(0,u.qi)(a),goods_id:t}})}},9694:function(e,t,n){"use strict";n.d(t,{BO:function(){return o},G5:function(){return i},Rx:function(){return u},UM:function(){return s},YQ:function(){return a},c8:function(){return r},tz:function(){return l},zQ:function(){return c}});let r=function(e){return e[e.none=0]="none",e[e.oversize=1]="oversize",e[e.invalidType=2]="invalidType",e[e.risk=3]="risk",e[e.empty=4]="empty",e[e.network=5]="network",e[e.invalidDimension=6]="invalidDimension",e[e.mergeImgRisk=7]="mergeImgRisk",e}({}),a=function(e){return e[e.img=1]="img",e[e.text=2]="text",e[e.both=3]="both",e}({}),s=function(e){return e[e.image=1]="image",e[e.text=2]="text",e}({}),o=function(e){return e[e.oldText=1]="oldText",e[e.newCustomized=2]="newCustomized",e}({}),i=function(e){return e[e.none=0]="none",e[e.text=1]="text",e[e.img=2]="img",e[e.textAndImg=3]="textAndImg",e[e.textAndBg=4]="textAndBg",e[e.richtext=5]="richtext",e}({}),c=function(e){return e[e.add=1]="add",e[e.update=2]="update",e[e.onlyLeftNoCustomized=3]="onlyLeftNoCustomized",e}({}),l=function(e){return e[e.mergeImg=1]="mergeImg",e[e.editImg=2]="editImg",e[e.uploadImg=3]="uploadImg",e[e.text=4]="text",e}({}),u=function(e){return e[e.left=1]="left",e[e.center=2]="center",e[e.right=3]="right",e}({})},42218:function(e,t,n){"use strict";n.d(t,{r:function(){return v}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(87837),c=n(92943),l=n(82370),u=n(52248),m=n(53075),d=n(73572),p=n(35396),f=n(66531),g=n(80907),h=n(6278),y=n.n(h);const v=(0,o.W4)({name:"Rank"})((e=>{let{data:t,className:n,style:a,pageElSn:o,rankV4:h,rankExplainDialog:v,onRankExplaginShow:E}=e;const{iconUrl:x,content:I}=v||{},_=e=>{e&&E?.()};if(h)return(()=>{const{richTextBlock:e,jumpUrl:t,track:n}=h||{};return e?.textRich?.length?r.createElement(r.Fragment,null,r.createElement(i.nU,{page_el_sn:o,others:n},r.createElement("div",{className:s()(y().container,{[y().clickable]:!!t}),onClick:()=>{t&&(0,m.MJ)((0,f.L)(t),{openTarget:"_blank"})},role:"button",tabIndex:0},r.createElement(d.l5,{newRichText:e,className:y().richText,renderSuffix:()=>x&&I?r.createElement(c.A,{appendToBody:!0,onPopoverVisibleChange:_,overlay:r.createElement("div",{className:y().rankExplainDialog},I)},r.createElement(l.Ay,{src:x,alt:"",className:y().explainEntry})):null})))):null})();const{textRich:k=[],track:b,action:w}=t||{};if(!k||!k?.length)return null;const S=w?.type===p.E.link&&w?.content?.routerUrl;return r.createElement(g.Ay,{page_el_sn:o,others:{...b?.impr,is_exp:1},useClick:!!S},r.createElement("div",{className:s()(y().container,n,{[y().clickable]:!!S}),style:a},r.createElement(d.l5,{newRichText:t,className:y().richText,renderSuffix:()=>r.createElement(r.Fragment,null,x&&I?r.createElement(c.A,{appendToBody:!0,onPopoverVisibleChange:_,overlay:r.createElement("div",{className:y().rankExplainDialog},I)},r.createElement(l.Ay,{src:x,alt:"",className:y().explainEntry})):null,S?r.createElement(u.hu,{className:y().arrow,fill:k?.[k?.length-1]?.fontColor}):null)})))}))},60106:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(82370),c=n(90368),l=n.n(c);const u=(0,o.W4)({name:"ModelTryOn"})((0,r.memo)((e=>{let{avatar:t,sizeDesc:n=[],bodyDesc:a={},selectUnit:o,itemCls:c="",sizeDescCls:u="",bodyDescCls:m=""}=e;const d=a[o]||[];return r.createElement("div",{className:l().wrap},r.createElement("div",{className:l().avatar},r.createElement(i.Ay,{src:t,alt:""})),r.createElement("div",{className:l().right},r.createElement("div",{className:s()(l().sizeDesc,u),tabIndex:0,role:"link","aria-label":n?.join("")},(n||[]).map(((e,t)=>r.createElement("div",{className:s()(l().item,c),key:t,"aria-hidden":!0},e)))),r.createElement("div",{className:s()(l().bodyDesc,m),tabIndex:0,role:"link","aria-label":d?.join("")},(d||[]).map(((e,t)=>r.createElement("span",{key:t,"aria-hidden":!0},e))))))})))},67660:function(e,t,n){"use strict";n.d(t,{Je:function(){return at},q$:function(){return it},$h:function(){return lt}});var r=n(14242),a=(n(44114),n(33514)),s=n(32485),o=n.n(s),i=n(24517),c=n(63815),l=n(95789),u=n(14511),m=n(97582),d=n(81411),p=n(59661),f=n(53075),g=n(76475);var h=n(93333),y=n(66622),v=n(80907),E=n(34243),x=n(48218),I=n.n(x);var _=e=>{let{onClick:t}=e;return a.createElement(E.E,{wrapClass:I().wrap,onClick:t})},k=n(46272),b=n(17475);const w=(0,a.createContext)({}),S=()=>(0,a.useContext)(w)||{},C=(0,a.createContext)({}),N=()=>(0,a.useContext)(C)||{};var T=n(55095);const R=(e,t,n)=>{const{heads:r,metas:a,groupsInsertIndex:s,headRecords:o=[],groupRecords:i=[],metaRecords:c={},tailRecords:l=[],tails:u=[],metasV2:m,recordsInch:d,recordsCm:p}=e||{},f=[...r||[],...a||[],...u||[]];t?.id&&f.splice(s,0,t);const g=o.map(((e,t)=>({...o[t],...c?.[n]?.[t],...i[t],...l[t]})));return m?.length&&d?.length&&p?.length?{header:m,content:2==+n?d:p}:{header:f,content:g}};var A=n(72620),z=n(35870),M=n(82370),L=n(64138),P=n.n(L);const D=e=>{let{instructions:t,onClose:n,howToMeasureTitle:r}=e;const{contents:s,imageUrls:i=[]}=t||{},{t:c}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV2"});return Object.keys(t||{}).length?a.createElement(p.Ay,{onClick:n},a.createElement("div",{className:o()(P().wrap)},a.createElement("div",{className:P().title},r),a.createElement("div",{className:P().scroll},a.createElement("div",{className:P().content},a.createElement("div",{className:P().info},s?.map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement("div",{className:P().label},e.name),a.createElement("div",{className:P().desc},e.desc))))||null),i[0]&&a.createElement("div",{className:P().imgWrap},a.createElement(M.Ay,{src:i[0]||"",alt:""}))||null)))):null};var U=n(41819),B=n.n(U);const W=(0,a.memo)((e=>{let{header:t=[],content:n=[],wrapCls:r="",showHover:s=!1}=e;const[i,c]=(0,a.useState)({row:-1,col:-1}),l=e=>{if(!s)return;const{row:t,col:n}=e.currentTarget.dataset||{},{row:r,col:a}=i||{};t===r&&n===a||c({row:t,col:n})},u=()=>{s&&c({row:-1,col:-1})};return t?.length&&n?.length?a.createElement("div",{className:o()(B().wrap,r)},a.createElement("table",{className:B().table,cellSpacing:0,cellPadding:0,onMouseLeave:u},a.createElement("tbody",null,a.createElement("tr",{className:B().columm,onMouseEnter:u},t.map(((e,t)=>a.createElement("td",{key:e.id,className:o()(B().cell,0===t?B().headerLine:"")},e.name)))),n.map(((e,n)=>{const r=n===+i?.row;return a.createElement("tr",{key:n,className:B().tr},t.map(((t,s)=>{const c=s===+i?.col;return a.createElement("td",{key:t.id,className:o()(B().cell,B().content,{[B().activeCol]:c&&n<=+i?.row||r&&s<=+i?.col,[B().activeItem]:c&&r,[B().headerLine]:0===s}),onMouseEnter:l,"data-row":n,"data-col":s},e[t.id])})))}))))):null})),O=e=>{const{title:t,howToMeasureData:n,howToMeasureTitle:r}=e,{t:s}=(0,m.B)("bec-fe.web-sku-selector");return a.createElement("div",{className:B().tableHeader},a.createElement("div",{className:B().tableHeaderTitle},t),n?a.createElement("div",{onClick:()=>{const e=(0,l.A)(a.createElement(D,{instructions:n,onClose:()=>e?.(),howToMeasureTitle:r}),{})},className:B().measureText,role:"button",tabIndex:0},a.createElement("span",null,r),a.createElement(z.d,null,a.createElement(A.A,{className:B().measureIcon}))):null)};var H=n(41637),F=n.n(H);const $=e=>{let{isFirst:t}=e;const{sizeData:n,unitId:s}=N(),{t:i}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV2"}),{sizeChart:c,bodyInstructions:l,bodyMeasurementTip:u}=n||{},{bodyMeasurement:d}=c||{},p=(0,a.useMemo)((()=>R(d?.[0],null,s)),[d,s]);return d?.[0]?a.createElement("div",{className:o()(F().bodyMeasurement,t?F().marginTop:"")},a.createElement(O,{title:i("bodyMeasurements"),howToMeasureData:l,howToMeasureTitle:i("howToMeasureBody")}),a.createElement(W,(0,r.A)({},p,{showHover:!0})),u?a.createElement(T.Fc,{message:u,type:T.SK.text,status:T.WH.grayText,classConfig:{text:F().desc,textIcon:F().tipIcon}}):null):null};var V=n(60106),q=n(67591),G=n.n(q);const j=e=>{let{isFirst:t}=e;const{sizeData:n,unitId:s,setSuitIndex:i,suitIndex:c}=N(),{t:l}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV2"}),{sizeChart:u,productInstructions:d}=n||{},{productMeasurement:p}=u||{},f=p?.map((e=>e?.name)),g=p?.[c],h=(0,a.useMemo)((()=>R(g,null,s)),[g,s]);return g?a.createElement("div",{className:o()(G().productDetails,t?G().marginTop:"")},a.createElement(O,{title:l("productDetail"),howToMeasureData:d?.[c],howToMeasureTitle:l("howToMeasureProduct")}),f?.length>1&&a.createElement("div",{className:G().suitWrap},a.createElement("div",{className:G().baseChoiceBtns},f.map(((e,t)=>a.createElement(v.Ay,{page_el_sn:201041,key:t},a.createElement("div",{className:o()(G().baseChoiceBtn,{[G().selected]:t===c,[G().btnLeft]:0===t,[G().btnRight]:t===f.length-1}),key:t,onClick:()=>i(t)},e)))))),a.createElement(W,(0,r.A)({},h,{showHover:!0})),a.createElement(T.Fc,{message:l("tip"),type:T.SK.text,status:T.WH.grayText,classConfig:{text:G().tip,textIcon:G().tipIcon}})):null};var K=n(52248),J=n(95352),Q=n.n(J);const Y=(0,a.memo)((e=>{let{isActive:t,value:n}=e;return a.createElement("div",{className:o()(Q().item,t?Q().activeItem:"")},a.createElement("div",{className:Q().content},n),t?a.createElement(K.ib,{className:Q().anchor,path:"M919.7 281.6l-815.4 0c-35.3 0-64 28.7-64 64 0 18.3 7.8 35.7 21.5 47.8l407.7 362.4c24.2 21.6 60.8 21.6 85 0l407.7-362.4c26.4-23.5 28.8-63.9 5.3-90.3-12.1-13.7-29.6-21.5-47.8-21.5z"}):a.createElement("div",{className:Q().line}))})),X=e=>{let{style:t,className:n}=e;return t?.length?a.createElement("div",{className:o()(Q().wrap,n)},t?.map(((e,t)=>{const{name:n,scale:r,value:s}=e;return a.createElement("div",{className:Q().container,key:t},a.createElement("div",{className:Q().title},n),a.createElement("div",{className:Q().list},r?.map(((e,t)=>{const n=e===s;return a.createElement(Y,{isActive:n,value:e,key:t})}))))}))):null};var Z=(0,u.W4)({name:"SizeDistribution"})((0,a.memo)(X)),ee=n(40639),te=n(92943),ne=n(63521),re=n.n(ne);const ae=(0,u.W4)({name:"TypeSelect"})((e=>{let{activeId:t,groupList:n,onSelectCb:r,sizeSuffix:s,pageElSn:i,isScrolling:c,entryCls:l}=e;const[u,m]=(0,a.useState)(!1),d=(0,a.useRef)(),p=(0,a.useRef)(),f=n?.find((e=>e.id===t))?.name;return(0,a.useEffect)((()=>{c&&p.current?.close?.()}),[c]),a.createElement(v.Ay,{page_el_sn:i,others:{country_select:f}},a.createElement("div",{className:re().wrap},a.createElement(te.A,{trigger:["click"],placement:"bottom",appendToBody:!0,innerStyle:{top:0},ref:p,onPopoverVisibleChange:e=>{m(e)},hideArrow:!0,overlay:a.createElement("div",{className:re().list,style:{width:d?.current?.offsetWidth}},n?.map(((e,n)=>{const{id:s,name:i}=e||{},c=s===t;return a.createElement("div",{key:s,"data-id":s,"data-index":n,className:o()(re().listItem,{[re().activeItem]:c}),onClick:t=>{r(t,e),p.current?.close?.()}},i,c?a.createElement(ee.A,{className:re().selectedIcon}):null)})))},a.createElement("div",{className:o()(re().entry,l),ref:d},a.createElement("div",{className:re().content},a.createElement("span",{className:re().activeSize},f,a.createElement("span",{className:re().suffix},s)),a.createElement(K.hu,{direction:"bottom",className:o()(re().arrow,{[re().activeArrow]:u})}))))))}));var se=n(66709),oe=n.n(se);const ie=()=>{const{t:e}=(0,m.B)("bec-fe.web-sku-selector"),{sizeData:t,suitIndex:n,reportSizePreference:r,onSelectGroupIdCb:s,setUnitId:o,unitId:i}=N(),{isScrolling:c}=S(),{sizeChart:l,sizeSuffix:u,groupList:d,chooseGroupId:p}=t||{},{units:f=[],userPreference:g,productMeasurement:h}=l||{},y=(0,a.useCallback)(((e,t)=>{const{id:n}=t||{},a=f?.findIndex((e=>e?.id===n)),s=f[a]?.name;o(n);r({sizeUnit:s||g?.unit,index:a,id:n})}),[h,n,g]),v=(0,a.useCallback)(((e,t)=>{const{id:n}=t||{};s(n)}),[s]);return a.createElement("div",{className:oe().wrap},a.createElement("div",{className:oe().left},e("sizeGuide.sizeChartSwitchText")),a.createElement("div",{className:oe().right},d?.length?a.createElement(ae,{onSelectCb:v,groupList:d,activeId:p,isScrolling:c,pageElSn:200978,sizeSuffix:u}):null,f?.length>=2?a.createElement("div",{className:oe().unitWrap},a.createElement(ae,{groupList:f,activeId:i,entryCls:oe().entryCls,onSelectCb:y,isScrolling:c})):null))};var ce=n(61504),le=n.n(ce);const ue=()=>{const{sizeData:e,goodsId:t,reportSizePreference:n,onSelectGroupIdCb:s,sizeGuideControl:o}=S(),{sizeInfoShowType:i=1}=o||{},{sizeChart:c,modelTryOn:l}=e||{},{defaultUnitId:u=0,units:m,productMeasurement:d,bodyMeasurement:p}=c||{},[f,g]=(0,a.useState)(m[u]?.id),[h,y]=(0,a.useState)(0),v=(0,a.useMemo)((()=>({...l,selectUnit:m?.find((e=>String(e.id)===String(f)))?.name})),[f,m,l]);return a.createElement(C.Provider,{value:{sizeData:e,goodsId:t,onSelectGroupIdCb:s,unitId:f,setUnitId:g,suitIndex:h,setSuitIndex:y,reportSizePreference:n}},a.createElement("div",{className:le().wrap},a.createElement(ie,null),a.createElement(Z,{style:e?.style,className:le().SizeDistribution}),1===i?a.createElement($,{isFirst:!0}):a.createElement(j,{isFirst:!0}),v?.avatar?a.createElement(a.Fragment,null,a.createElement("div",{className:le().modelTryOn},a.createElement(V.A,(0,r.A)({},v,{bodyDescCls:le().bodyDescCls,sizeDescCls:le().sizeDescCls})))):d?.[0]&&p?.[0]?a.createElement("div",{className:le().line}):void 0,1===i?a.createElement(j,null):a.createElement($,null)))};let me=function(e){return e[e.product=0]="product",e[e.body=1]="body",e}({});const de=e=>{let{goodsId:t,onChangeUnit:n}=e;const{mainData:r,getSizeGuideInfo:s,isMainReady:o,setIsMainError:i,setMainData:c,setChooseGroupId:l,isScrolling:u}=(0,a.useContext)(g.ll),{sizeGuideControl:m}=r||{},[d,p]=(0,a.useState)(),[f,h]=(0,a.useState)({}),[y,v]=(0,a.useState)(!1),E=(0,a.useRef)({}),x=e=>{const{modelTryOn:t,productInstructions:n,bodyInstructions:r}=e||{};E.current={[me.product]:n,[me.body]:[r]},h(t),i(!e?.sizeChart&&!e?.success),p(e),setTimeout((()=>v(!0)),0)},I=(0,a.useCallback)((async e=>{const[n,r]=await Promise.all([(0,b.WD)({goods_id:t,group_id:e}),(0,b.Ec)({goods_id:t,select_location_id:e})]);return p(n||{}),c((e=>({...e,...n,userSizeRecommendData:r}))),l(e),n}),[]),_=(0,a.useCallback)((0,k.A)((async e=>{if(e!==d?.chooseGroupId){const t=await I(e);i(!t?.sizeChart&&!t?.success),t?.sizeChart&&d?.sizeChart&&(t.sizeChart.defaultUnitId=d.sizeChart.defaultUnitId)}})),[d]);return(0,a.useEffect)((()=>{!o||r?.sizeChart?r?.sizeChart&&x(r):s().then((e=>x(e)))}),[o]),y?a.createElement(w.Provider,{value:{sizeData:d,goodsId:t,reportSizePreference:e=>{let{sizeUnit:t,index:r}=e;(0,b.Fl)({sizeUnit:t}),h({...f,selectUnit:t}),n?.(t)},onSelectGroupIdCb:_,isScrolling:u,sizeGuideControl:m}},a.createElement("div",null,a.createElement(ue,null))):null};var pe=(0,u.eE)()((0,a.memo)(de)),fe=n(91828),ge=n(31264),he=n(83005),ye=n(12362),ve=n.n(ye);const Ee=(0,a.memo)((e=>{let{header:t=[],content:n=[],wrapCls:r="",showHover:s=!0}=e;const[i,c]=(0,a.useState)({row:-1,col:-1}),l=e=>{if(!s)return;const{row:t,col:n}=e.currentTarget.dataset||{},{row:r,col:a}=i||{};t===r&&n===a||c({row:t,col:n})},u=()=>{s&&c({row:-1,col:-1})};return t?.length?a.createElement("div",{className:o()(ve().wrap,r)},a.createElement("table",{className:ve().table,cellSpacing:0,cellPadding:0,onMouseLeave:u},a.createElement("tbody",null,a.createElement("tr",{className:ve().columm,onMouseEnter:u},t.map(((e,t)=>a.createElement("td",{key:e.id,className:o()(ve().cell,{[ve().firstCol]:0===t})},e.name)))),n.map(((e,n)=>{const r=n===+i?.row;return a.createElement("tr",{key:n,className:ve().tr},t.map(((t,s)=>{const c=s===+i?.col;return a.createElement("td",{key:t.id,className:o()(ve().cell,ve().content,{[ve().firstCol]:0===s,[ve().activeCol]:c&&n<=+i?.row||r&&s<=+i?.col,[ve().activeItem]:c&&r}),onMouseEnter:l,"data-row":n,"data-col":s},e[t.id])})))}))))):null})),xe=e=>{let{data:t,unitId:n}=e;const{header:r,content:s}=(0,a.useMemo)((()=>((e,t)=>{const{heads:n,metas:r,groups:a,tails:s=[],groupsInsertIndex:o,headRecords:i=[],groupRecords:c=[],metaRecords:l={},tailRecords:u=[],metasV2:m,recordsInch:d,recordsCm:p}=e||{},f=[...n||[],...r||[],...s||[]];a?.length&&f.splice(o,0,...a);const g=i.map(((e,n)=>({...i[n],...l?.[t]?.[n],...c[n],...u[n]})));return m?.length&&d?.length&&p?.length?{header:m,content:2==+t?d:p}:{header:f,content:g}})(t,n)),[t,n]);return a.createElement(Ee,{header:r,content:s})};var Ie=(0,a.memo)(xe),_e=n(24096),ke=n.n(_e);var be=(0,u.W4)({name:"DetailContent"})((e=>{let{goodsId:t,recommendData:n,changeContent:s}=e;const{t:i}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation"}),{recommendContents:c,recommendSuc:l=!1,measureDto:u,userSizeDescList:p,bodyInfoTextPrefix:f,editText:g}=n||{},{selectUnitId:h,measurement:y,measurementName:E}=u||{},[x,I]=(0,d.A)();if(!p)return null;const _=e=>{let{contentBefore:t,contentAfter:n}=e;return a.createElement("div",{className:ke().unavailableSize},a.createElement("div",null,t),a.createElement("div",null,n))};return a.createElement("div",{className:ke().content},a.createElement(v.Ay,{page_el_sn:208373,others:{goods_id:t,result:l&&(c||[]).length>=2?c[1]:-1},useClick:!1},(()=>{if(c?.length>=2){const[e,t]=c;return l?a.createElement("div",{className:ke().recommendedSize},a.createElement("span",null,e||i("recommendedSize")),a.createElement("span",null,t)):_({contentBefore:e,contentAfter:t})}return _({contentBefore:i("unavailableSize"),contentAfter:i("subUnavailableSize")})})()),a.createElement("div",{className:ke().eidtBox},a.createElement("div",{className:ke().editInfo},a.createElement("div",null,f),a.createElement("div",null,(p||[]).join(" "))),a.createElement(v.Ay,{page_el_sn:208372,others:{goods_id:t},useImpr:!1},a.createElement("div",(0,r.A)({className:o()(ke().editBtn,x)},I,{onClick:()=>{s(!1)}}),a.createElement(he.AP,{className:o()(ke().editIcon,l&&ke().upper)}),a.createElement("span",null,g||i("edit"))))),a.createElement("div",{className:ke().mearsurementName},E),(y||[]).map(((e,t)=>a.createElement(Ie,{key:t,data:e,unitId:h}))))})),we=n(7638),Se=n(27092),Ce=n(20162),Ne=n(10147),Te=n(1528),Re=n(49318),Ae=n(14825);let ze=function(e){return e.IN="IN",e.CM="CM",e.KG="KG",e.LBS="LBS",e}({});var Me=n(21657),Le=n.n(Me);const Pe=e=>{let{onClose:t}=e;const{t:n}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation.learnMorePopup"});return a.createElement(p.Ay,{onClick:t},a.createElement("div",{className:Le().wrap},a.createElement("div",{className:Le().title},n("title")),a.createElement("div",{className:Le().desc},a.createElement(we.x,{t:n,i18nKey:"desc",ns:"bec-fe.web-sku-selector"},a.createElement("span",{className:Le().link,onClick:()=>(0,f.MJ)(n("links.termsOfUse"))}),a.createElement("span",{className:Le().link,onClick:()=>(0,f.MJ)(n("links.privacyPolicy"))}))),a.createElement(Ne.A,{size:"lg",className:Le().btn,onClick:t},n("ok"))))};var De=n(81783),Ue=n.n(De);const Be=e=>{let{instructions:t}=e;const{title:n,contents:r,imageUrls:s=[]}=t||{};return Object.keys(t||{}).length?a.createElement("div",{className:Ue().wrap},a.createElement("div",{className:Ue().content},a.createElement("div",{className:Ue().title},n),a.createElement("div",{className:Ue().info},r?.map((e=>e?.name&&e?.desc?a.createElement(a.Fragment,{key:`${e.name}${e.desc}`},a.createElement("div",{className:Ue().label},e.name),a.createElement("div",{className:Ue().desc},e.desc)):null)))),!!s[0]&&a.createElement("div",{className:Ue().imgWrap},a.createElement(M.Ay,{src:s[0]}))):null};var We=(0,a.memo)(Be),Oe=n(79653),He=n(68419),Fe=n.n(He);const $e=e=>{let{value:t=1,min:n=1,max:r=99,delta:s=1,suffix:i="",fixed:c=1,onChange:l,className:u,disabled:d=!1,selectItemCls:p="",selectListCls:f=""}=e;const{t:g}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation"}),[h,y]=(0,a.useState)(+t),[v,E]=(0,a.useState)(!1),x=(0,a.useRef)(null),I=(0,a.useRef)(null),[_,k]=(0,a.useMemo)((()=>r<n?[r,n]:[n,r]),[n,r]),b=(0,a.useMemo)((()=>s<=0?[]:new Array(Math.floor((k-_)/s)+1).fill(0).map(((e,t)=>+(_+s*t).toFixed(c)))),[s,k,_,c]),w=()=>{const e=I.current;if(t&&_<=t&&t<=k&&e){const{scrollHeight:n}=e;if(n&&e?.parentElement&&b.length&&s>0){const r=n/b.length*Math.round((+t-_)/s);e.parentElement.scrollTop=r}}},S=(0,a.useMemo)((()=>({timer:null,lock:!1})),[]),C=(0,a.useCallback)((()=>{S.timer&&clearTimeout(S.timer),S.lock=!0,S.timer=setTimeout((()=>{S.lock=!1}),30)}),[]);if((0,a.useEffect)((()=>{y(t)}),[t]),s<=0)return null;const N=a.createElement("div",{className:o()(Fe().list,f)},a.createElement("div",{className:Fe().listContent,ref:I},b.map(((e,t)=>{const n=h===e;return a.createElement("div",{className:o()(Fe().selectItem,p,{[Fe().selectedItem]:n}),key:`${e}-${t}`,"data-val":e,role:"button",tabIndex:0,onClick:t=>((e,t)=>{e?.stopPropagation();const n=+t;y(n),l?.(n),E(!1)})(t,e),onMouseDown:C},a.createElement("div",null,e.toFixed(c)),n?a.createElement(K.ce,null):null)}))));return a.createElement(te.A,{placement:"bottom",innerClassName:Fe().listInnerCls,visible:v,overlay:N,hideArrow:!0,appendToBody:!0,onPopoverVisibleChange:()=>{v?setTimeout((()=>w()),50):w()}},a.createElement("div",{className:o()(Fe().wrap,u,d&&Fe().disabled),onClick:()=>{E((e=>!e))},tabIndex:0,onBlur:e=>{S.lock?S.lock=!1:(clearTimeout(x.current),x.current=setTimeout((()=>{E(!1)}),200))},role:"button"},a.createElement("div",{className:o()(Fe().currentVal,!h&&Fe().unselected)},h?`${h.toFixed(c)} ${i||""}`:g("pleaseSelect")),a.createElement("div",{className:Fe().arrow},a.createElement(K.hu,{className:o()(Fe().arrowIcon,v?Fe().activeArrowIcon:"")}))))};var Ve=(0,u.W4)({name:"SelectSize"})((0,a.memo)($e)),qe=n(7981),Ge=n.n(qe);const je={bust_size:[60,150],waist_size:[50,140],weight:[2.5,150],height:[50,250]},Ke={bust_size:[23.6,59],waist_size:[19.7,55.1],weight:[5.5,330.8],height:[19.7,98.4]},Je=e=>{let{curValue:t,fixedLen:n=1,convertRate:r,isToBasic:a,type:s}=e;const o=+(a?+t/r:+t*r).toFixed(n),i=a?je:Ke;if(o&&s&&i[s]){const[e,t]=i[s];return Math.max(Math.min(o,t),e)}return o},Qe=e=>{let{data:t,selectUnitIndex:n=0,uploadData:r,unitList:s=[],unitBasicIndex:o=0,style:i={}}=e;const{reportName:c,showName:l,showLength:u=0,basicMax:m,basicMin:d,convertDeltaSize:p,basicDeltaSize:f,convertRate:g,unitIndex:h,basicDecimalPlace:y,convertDecimalPlace:v}=t||{},E=(0,a.useMemo)((()=>s[n]||[]),[n,s]),x=s[o]||[],I=(0,a.useMemo)((()=>x?.includes(E[h])),[E,h,x]),[_,k]=(0,a.useState)({curVal:Je({curValue:Je({curValue:+u,fixedLen:2,type:c,convertRate:g,isToBasic:!I}),fixedLen:2,type:c,convertRate:g,isToBasic:I}),localMin:d,localMax:m,localDelta:f,localFixed:0,localSuffix:E[h]?.toLowerCase()}),b=(0,a.useCallback)((e=>{if(k(e),e?.curVal){let t=+e.curVal;I||(t=Je({curValue:t,fixedLen:3,type:c,convertRate:g,isToBasic:!0})),r?.({[c]:t})}}),[c,n,r,I,h,E]),w=(0,Oe.A)(n);return(0,a.useEffect)((()=>{let e=_.curVal;w!==n&&void 0!==w&&(e=Je({curValue:e,fixedLen:2,type:c,convertRate:g,isToBasic:I}));const t=Je({curValue:d,convertRate:g,isToBasic:!1,fixedLen:I?y:v}),r=Je({curValue:m,convertRate:g,isToBasic:!1,fixedLen:I?y:v});b({curVal:e,localMin:I?d:t,localMax:I?m:r,localDelta:I?f:p,localFixed:I?y:v,localSuffix:E[h]?.toLowerCase()})}),[d,m,n,c,f,p,h,s?.length,g]),c&&l&&_.localMin&&_.localMax?a.createElement("div",{className:Ge().usItem,style:i},a.createElement("div",{className:Ge().usTitle},l),a.createElement(Ve,{value:_.curVal,min:+_.localMin,max:+_.localMax,delta:+_.localDelta,fixed:_.localFixed,suffix:_.localSuffix,onChange:e=>{b({..._,curVal:e})},className:Ge().selectCountContent,selectItemCls:Ge().selectItem,selectListCls:Ge().selectList,showName:l})):null};var Ye=(0,u.eE)()((0,a.memo)(Qe));var Xe=(0,u.W4)({name:"EditContent"})((e=>{let{goodsId:t,recommendEditData:n,changeContent:r}=e;const{t:s}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation"}),{sizeDesc:i,userSizeEditList:u,bodyInstructions:d,unitList:p=[],unitBasicIndex:f,unitSelectIndex:g=0}=n||{},[h,y]=(0,a.useState)(g),E=(0,a.useRef)(null),x=(0,a.useCallback)((e=>{(0,Ae.r_)({page_el_sn:208374,goods_id:t,type:p[e]?.join(",")}),y(e)}),[]),I=(0,a.useRef)({}),_=(0,a.useCallback)((e=>{I.current={...I.current,...e}}),[]),k=(0,Re.A)((async()=>{if(u?.some((e=>e?.reportName&&!I.current[e.reportName])))Ce.A.error(s("notFillCompletely"));else try{const e=p[h]?.[0]||ze.CM,t=setTimeout((()=>(0,c.Nx)()),1e3),n=await(0,fe.VA)({...I.current,size_unit:e});clearTimeout(t),(0,c.jD)(),n?.result?r(!0):Ce.A.error(n.errorMsg||s("failedSubmit"))}catch(e){e?.errorMsg||Ce.A.error(s("failedSubmit"))}}));return u?.length?a.createElement("div",{className:Ge().content,ref:E},a.createElement("div",{className:Ge().sizeDescSection},a.createElement("div",{className:Ge().leftText},!!i[0]?.name&&a.createElement("div",{className:Ge().leftTextName},s("addBodyInformation")),!!i[0]?.content&&a.createElement("div",{className:Ge().leftTextDesc},i[0].content)),a.createElement("div",{className:Ge().btns},p?.length>0?p.map(((e,n)=>{const r=(e||[]).join(",");return a.createElement(v.Ay,{page_el_sn:200979,others:{unit_select:r,goods_id:t}},a.createElement("div",{className:o()(Ge().btn,{[Ge().selected]:h===n}),onClick:()=>x(n)},r))})):null)),a.createElement("div",{className:Ge().userSizesSection},a.createElement("div",{className:Ge().userSizesSelection},u?.map(((e,t)=>a.createElement(Ye,{key:`${e.showName}${t+1}`,data:e,selectUnitIndex:h,uploadData:_,unitList:p,unitBasicIndex:f,wrapEle:()=>E?.current,style:{zIndex:100-t}})))),a.createElement("div",{className:Ge().learnMore},a.createElement(we.x,{t:s,i18nKey:"learnMore",ns:"bec-fe.web-sku-selector"},a.createElement("span",{className:Ge().learnText,onClick:()=>{const e=(0,l.A)(a.createElement(Pe,{onClose:()=>e?.()}),{})}},a.createElement(Se.A,{className:Ge().arrowIcon})))),a.createElement(v.Ay,{page_el_sn:208371,useImpr:!1,others:{goods_id:t}},a.createElement(Ne.A,{className:Ge().userSizesSubmit,onClick:k,type:Te.el.main},s("submit")))),a.createElement(We,{instructions:d})):null}));const Ze=e=>{const{success:t,errorCode:n,isApiError:r}=e||{};return r||"boolean"==typeof t&&!t||43201===n},et=e=>{let{goodsId:t}=e;const{mainData:n,isMainReady:r,setMainData:s,chooseGroupId:o}=(0,a.useContext)(g.ll),[i,l]=(0,a.useState)({}),[u,m]=(0,a.useState)({}),[d,p]=(0,a.useState)(!0),[f,y]=(0,a.useState)(!1),[v,E]=(0,a.useState)(0),[x,I]=(0,a.useState)([]),k=(0,a.useCallback)((async()=>{const e=setTimeout((()=>(0,c.Nx)()),500),n=await(0,fe.Fo)({goods_id:t});m({...n,userSizeEditList:x,unitSelectIndex:v}),y(n?.error||!x?.length),(0,c.jD)(),clearTimeout(e)}),[t,x,v]),w=(0,a.useCallback)((async()=>{const e=setTimeout((()=>(0,c.Nx)()),500),[n,r]=await Promise.all([(0,fe.gF)({goods_id:t}),(0,b.Ec)({goods_id:t,...o?{select_location_id:o}:{}})]),{error:a}=n||{},{result:i}=r||{},{userSizeDescList:l,unitSelectIndex:u,userSizeEditList:m}=i||{};(0,ge.CE)(),E(u),I(m),s((e=>({...e,userSizeRecommendData:r,sizeRecommendDetailV2:n}))),y(a||Ze(r)||!l),(0,c.jD)(),clearTimeout(e)}),[o,t]),S=(0,a.useCallback)((async e=>{const t=e?w:k;await t(),setTimeout((()=>p(e)),0)}),[w,k]);return(0,a.useEffect)((()=>{if(!r)return;const{sizeRecommendDetailV2:e,sizeRecommendUserSizeEditV2:t,userSizeRecommendData:a}=n||{},{result:s}=a||{},{unitSelectIndex:o,directJumpEditPage:i,userSizeEditList:c}=s||{};p(!i),E(o),I(c),m({...t,userSizeEditList:c}),l({...e,...s}),y(!(0,h.sc)()||Ze(a))}),[r,n]),f?a.createElement(_,{onClick:d?w:k}):r?a.createElement(a.Fragment,null,d&&i?.userSizeDescList?a.createElement(be,{goodsId:t,recommendData:i,changeContent:S}):null,!d&&u?.userSizeEditList?.length?a.createElement(Xe,{goodsId:t,recommendEditData:u,changeContent:S}):null):null};var tt=(0,u.W4)({name:"SizeRecommend"})((0,a.memo)(et)),nt=n(65200),rt=n.n(nt);let at=function(e){return e.Guide="guide",e.Recommend="recommend",e}({});function st(e){let{index:t,source:n,sizeGuideMultiTab:s,activeIndex:i,handleTabClick:c,item:l}=e;const u=(()=>{const[e,t]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{t("undefined"!=typeof window&&"ontouchstart"in window)}),[]),e})(),[m,p]=(0,d.A)();return a.createElement(v.Ay,{page_el_sn:0===t?222541:222542,others:{entrance_source:n===at.Guide?0:1,exprm_version:s?1:0}},a.createElement("div",(0,r.A)({key:l.key,className:o()(rt().tabTitle,!u&&m,i===t&&rt().active),onClick:()=>c(t,l.key),role:"button",tabIndex:0},p),l.key))}const ot=(0,u.W4)({name:"SizePopup"})((e=>{let{onClose:t,params:n,prefetchSizePopupDataPromise:r,onContentShow:s}=e;const{t:l}=(0,m.B)("bec-fe.web-sku-selector"),{source:u,goodsId:d,onChangeUnit:v,chooseGroupId:E=0}=n,[x,I]=(0,a.useState)(0),[k,b]=(0,a.useState)(),[w,S]=(0,a.useState)(!1),[C,N]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),[A,z]=(0,a.useState)(E||0),[M,L]=(0,a.useState)({}),[P,D]=(0,a.useState)(!1),U=(0,a.useRef)(!1),B=(0,a.useRef)(),W=(0,a.useRef)(null),O=(0,a.useMemo)((()=>({guide:l("sizeGuide.sizePopupTitle"),recommend:l("SizeRecommendation.sizeRecommendation")})),[]),H=(0,a.useMemo)((()=>{const e=[{key:O.guide,Component:pe}];return T&&e.push({key:O.recommend,Component:tt}),e}),[O.guide,O.recommend,T]),F=async(e,t)=>{if(t===O.recommend){if(!await(0,i.mQ)())return void(U.current||((0,y.Vm)({onSuccess:()=>{(0,f.Qw)(location.href),U.current=!1},onClose:()=>{U.current=!1},loginScene:320}),U.current=!0))}I(e)},$=async()=>{const e=setTimeout((()=>(0,c.Nx)()),500);let t=[];r instanceof Promise&&(t=await r,r=null),t.length||(t=await ct({goodsId:d,chooseGroupId:A}));const[n,a]=t||[],{sizeRecommendDetailV2:s,sizeRecommendUserSizeEditV2:o}=n||{},i=(s||o)&&!Ze(a);return i&&u===at.Recommend&&I(1),R(i),b({...n,userSizeRecommendData:a}),S(!0),N(!n?.sizeChart&&!n?.success),clearTimeout(e),(0,c.jD)(),{...n,userSizeRecommendData:a}},V=()=>{const e=W.current;if(e){const{clientHeight:t}=e;t>0&&L({height:t})}};(0,a.useEffect)((()=>{N(!(0,h.sc)()),$()}),[]),(0,a.useEffect)((()=>{T&&setTimeout(V,500)}),[T]),(0,a.useEffect)((()=>{w&&s?.()}),[w]);const q=()=>{D(!0),clearTimeout(B.current),B.current=setTimeout((()=>{D(!1)}),50)};return a.createElement(p.Ay,{onClick:t,useSplitBg:!0},a.createElement(g.ll.Provider,{value:{mainData:k,isMainReady:w,setMainData:b,getSizeGuideInfo:$,setIsMainError:N,chooseGroupId:A,setChooseGroupId:z,isScrolling:P}},a.createElement("div",{className:o()(rt().wrap,C&&rt().error),ref:W,style:M},C?a.createElement(_,{onClick:$}):a.createElement(a.Fragment,null,w?1===H.length?a.createElement("div",{className:rt().titleWrap},a.createElement("div",{className:rt().singleTitle},H[0].key)):a.createElement("div",{className:rt().titleWrap},H.map(((e,t)=>a.createElement(st,{index:t,source:u,sizeGuideMultiTab:T,activeIndex:x,handleTabClick:F,item:e})))):null,a.createElement("div",{className:rt().content,onScroll:q},H.map(((e,t)=>{let{key:n,Component:r}=e;return a.createElement("div",{className:o()(rt().tabContent,x===t&&rt().contentActive),key:n},a.createElement(r,{goodsId:d,onChangeUnit:v}))})))))))})),it=e=>{const t=(0,l.A)(a.createElement(ot,{params:e,onClose:()=>{t()}}),{})},ct=async e=>{let{goodsId:t,chooseGroupId:n}=e;return await Promise.all([(0,b.WD)({goods_id:t,...n?{group_id:n}:{}}),(0,b.Ec)({goods_id:t,...n?{select_location_id:n}:{}})])},lt=()=>{const e=(0,a.useRef)();return(0,a.useMemo)((()=>({perfetchSizePopupData:async t=>{e.current=ct(t)},renderSizePopup:(t,n)=>{const r=(0,l.A)(a.createElement(ot,{params:t,onContentShow:n,prefetchSizePopupDataPromise:e.current,onClose:()=>{r()}}),{})}})),[])}},17475:function(e,t,n){"use strict";n.d(t,{AL:function(){return l},Ec:function(){return u},Fl:function(){return o},WD:function(){return s}});var r=n(24517),a=n(97216);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/oak/size_guide/render",params:{front_supports:["supportSizeGuideV2Logic"],not_login_show_size_recommend:1,...e}})},o=async e=>{let{sizeUnit:t}=e;if(await c())return i({size_unit:t})},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/size/preference/report",params:e})},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/short/profile",params:{errorCodeHandlers:{40001:()=>null},...e},errorHandler:async()=>null,config:{useAntiToken:!0,errorCodeHandlers:{40001:()=>null}}}).then((e=>e?.result||null))},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/size/recommend",params:e,config:{useAntiToken:!0}})},u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await(0,r.mQ)()?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/size/recommend/guide",params:e,config:{useAntiToken:!0}})}(e):Promise.resolve()}},84369:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(33514),a=n(35439);const s=(0,a.M)("transition"),o=(0,a.M)("transform");function i(e){let{scrollTime:t,carouselLength:n,animationTime:a=.5,minItemHeight:i=20}=e;const[c,l]=(0,r.useState)(!0),[u,m]=(0,r.useState)(0),[d,p]=(0,r.useState)(0),[f,g]=(0,r.useState)({[o]:"translateY(0px)"}),h=(0,r.useRef)(),y=(0,r.useRef)(),v=(0,r.useRef)(0),E=(0,r.useRef)(null),x=(0,r.useRef)(null),I=c?{...{[s]:`all ${a}s`},...f}:f,_=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;v.current+=1,m((e=>e+1===n?0:e+1)),l(!0),g({[o]:`translateY(-${e*v.current}px)`}),h.current=setTimeout((()=>_(e)),1e3*(t+a)),v.current>=n&&(y.current=setTimeout((()=>{v.current=0,l(!1),g({[o]:"translateY(0px)"})}),1e3))}),[n,t]),k=(0,r.useCallback)((e=>{const n=x.current,r=E.current;if(!n||!n.style||!r)return;clearTimeout(h.current),clearTimeout(y.current);const a=Array.from(r?.children);a.forEach((e=>{e?.style&&(e.style.height="auto")}));let s=i;a.forEach((e=>{const{clientHeight:t}=e||{};t&&(s=Math.max(s,t))})),n.style.height=`${s}px`,p(s),a.forEach((e=>{e?.style&&(e.style.height=`${s}px`)})),e||(l(!1),v.current=0,m(0)),g({[o]:`translateY(-${s*v.current}px)`}),h.current=setTimeout((()=>_(s)),1e3*t)}),[_,t]),b=(0,r.useCallback)((()=>{window.removeEventListener("resize",k),clearTimeout(h.current),clearTimeout(y.current)}),[k]),w=(0,r.useCallback)((()=>{b(),k(),window.addEventListener("resize",k)}),[b,k]),S=(0,r.useCallback)((()=>{t&&n&&x.current&&E.current&&(k(),window.addEventListener("resize",k))}),[n,t,k]),C=(0,r.useCallback)((()=>{b()}),[b]),N=(0,r.useCallback)((()=>{k(!0),window.addEventListener("resize",k)}),[k]);return(0,r.useEffect)((()=>b),[b]),{activeIndex:u,containerRef:x,scrollRef:E,transformStyle:I,containerHeight:d,reset:w,start:S,stop:C,continueCarousel:N}}},55085:function(e,t,n){"use strict";n.d(t,{ON:function(){return s}});n(33514);var r=n(59024);const a=e=>{let{parentRef:t,actionWrapRef:n,fixedActionWrapRef:r,specKeyIds:a,specItemRefMap:s}=e;if(!t?.current||!n?.current||!r?.current)return[];const{top:o,height:i}=t.current?.getBoundingClientRect()||{},{top:c}=n.current?.getBoundingClientRect()||{},{top:l}=r.current?.getBoundingClientRect()||{},u=Math.min(c,l,window.innerHeight,o+i);return a.map((e=>{const t=s?.[e]?.current;if(t){const{top:n,height:r}=t.getBoundingClientRect()||{},a=n+r,s=n>=o&&n<u,i=a<=u&&a>=o,c=n<=o&&a>=u,l=s||i||c,m=u-o,d=c?r-(u-o):s||i?Math.max(a-u,0)+Math.max(o-n,0):r;return{specKeyId:e,ratio:l?1-d/r:0,headerInViewPort:s,footerInViewPort:i,coverViewport:c,specHeight:r,viewportHeight:m}}return null})).filter(Boolean)},s=e=>{let{specItemRefMap:t,specKeyIds:n,actionWrapRef:s,fixedActionWrapRef:o,parentRef:i,eventName:c="skuSpecPositonReportOnClick"}=e;const l=a({specItemRefMap:t,specKeyIds:n,actionWrapRef:s,fixedActionWrapRef:o,parentRef:i});l?.length&&(0,r.A)(c,{fields:{data:JSON.stringify(l)}})}},99523:function(e,t,n){"use strict";n.d(t,{$2:function(){return r},O4:function(){return a},SD:function(){return s},oi:function(){return o}});let r=function(e){return e[e.Normal=1]="Normal",e[e.OffShelf=2]="OffShelf",e[e.SoldOut=3]="SoldOut",e[e.Delete=4]="Delete",e[e.Risk=5]="Risk",e}({}),a=function(e){return e[e.NotExist=49001]="NotExist",e[e.NeedVerify=54001]="NeedVerify",e[e.GOODS_NO_QUANTITY=60002]="GOODS_NO_QUANTITY",e}({}),s=function(e){return e[e.addToCart=1]="addToCart",e[e.addOrder=3]="addOrder",e[e.buyNow=7]="buyNow",e[e.addNewOption=101]="addNewOption",e}({}),o=function(e){return e[e.Add=1]="Add",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e}({})},733:function(e,t,n){"use strict";n.d(t,{LP:function(){return a},Mr:function(){return s},YK:function(){return r}});let r=function(e){return e[e.inline=0]="inline",e[e.buttons=1]="buttons",e[e.list=2]="list",e}({}),a=function(e){return e[e.AdulthoodPopup=0]="AdulthoodPopup",e[e.MinorRefusalPopup=1]="MinorRefusalPopup",e[e.AgeVerifyPopup=2]="AgeVerifyPopup",e}({}),s=function(e){return e[e.Lightning=2]="Lightning",e}({})},35439:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});n(25440);let r="";r=(()=>{const e=document.createElement("div");e.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;";const{style:t}=e;return t.webkitTransition?"-webkit-":t.MozTransition?"-moz-":t.oTransition?"-o-":t.msTransition?"-ms-":""})();const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.substr(1)},s=e=>{const t=r.replace(/-/g,"");return""===t?e:a(t)+a(e)}},71496:function(e,t,n){"use strict";n.d(t,{Ay:function(){return s},Q6:function(){return a}});n(44114);function r(e){return e?.length?e.slice().sort(((e,t)=>e.specKeyId-t.specKeyId)).reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const{specKeyId:n="",specValueId:r=""}=t||{};return`${e}${n}${r}`}),""):""}function a(e){return e?r(Object.entries(e||{}).map((e=>{let[t="",n=""]=e;return{specValueId:n,specKeyId:t}}))):""}function s(e,t,n){const a=[],s={},o={},i={},c={},l={},u={},m={},d={},p={};return(t||[]).forEach(((e,t)=>{const{specId:n}=e;c[n]||(c[n]=t)})),(e||[]).forEach((e=>{const{specs:t,skuId:f,isOnsale:g}=e,h=n[f]||{};o[f]={...e,salePriceTextRich:h},(t||[]).forEach((e=>{const{specKey:t,specKeyId:n,specValue:r,specValueId:s,specKeyShowName:o}=e||{},h=`${n}${s}`;g&&(p[h]=!0),m[s]||(m[s]=e),d?.[h]||(d[h]=new Set),d[h].add(f);const y=a.find((e=>e?.specKeyId===n)),v=c[s],E="number"==typeof v;if(void 0===u?.[s]&&(u[s]=r),y){const{values:e,valueIds:t}=y;t.includes(s)||(E?(e[v]=r,t[v]=s):(e.push(r),t.push(s)))}else{i[n]=null;const e=[],c=[];E?(e[v]=r,c[v]=s):(e.push(r),c.push(s)),a.push({type:t,specKeyId:n,specKeyShowName:o,values:e,valueIds:c})}l[n]||(l[n]=t)}));const y=r(t||[]);s[y]=f})),{skuTypeValues:a,skuInfos:o,currentIdSelect:i,specKeyId2SpecKeyMap:l,specIdStrToSkuId:s,specValueId2SpecValueMap:u,specValueId2SpecMap:m,specIdStr2SkuIdsMap:d,specIdIsOnsaleMap:p}}},19430:function(e,t,n){"use strict";n(44114);t.A=(e,t)=>{if(!e||!t?.length)return[];const n=[];for(const r of t){const t={},{specs:a}=r;(a||[]).forEach((e=>{const{specKeyId:n,specValueId:r}=e;t[n]=r}));let s=!0;for(const n in e)e[n]&&t[n]!==e[n]&&(s=!1);s&&n.push(r)}return n}},93333:function(e,t,n){"use strict";n.d(t,{BX:function(){return E},Hm:function(){return _},Rs:function(){return I},To:function(){return f},Xf:function(){return v},eM:function(){return x},sc:function(){return h},yQ:function(){return g},yk:function(){return y}});var r=n(42877),a=n.n(r),s=(n(25440),n(16280),n(71496)),o=n(19430),i=n(99523),c=n(68009),l=n(64423),u=n(20162),m=n(15193),d=n(59024);let p;async function f(){return p||(p=Promise.all([n.e(7302),n.e(8096),n.e(496),n.e(5141),n.e(8977),n.e(6390),n.e(2137),n.e(9773)]).then(n.bind(n,93190)).catch((e=>{p=null})),p)}const g=e=>e?.length?e.map((e=>e.text)).join(""):"",h=()=>window.navigator.onLine;function y(e){let{sku:t,formatSkuData:n,currentSpecIdSelect:r,isChangeSpec:i,defaultSkuId:c,bestSkuByQuantityTip:l,stockQuantityTipThreshold:u}=e;const{specIdStrToSkuId:m,skuInfos:d}=n,p=d[m[(0,s.Q6)(r)]]||{};if(p?.skuId)return p;const f=function(e){let{formatSkuData:t,currentSpecIdSelect:n}=e;const{specValueId2SpecMap:r}=t;return Object.values(n).map((e=>r[e])).filter((e=>!!e))}({formatSkuData:n,currentSpecIdSelect:r});if(f?.length===t[0]?.specs?.length)return;let g=t.filter((e=>!!e.isOnsale));if(Object.entries(r).some((e=>{let[t,n]=e;return t&&n}))){const e=(0,o.A)(r,t),n=e.filter((e=>!!e.isOnsale));g=n?.length?n:e}if(g=g?.length?g:t,!i&&c){const e=g.find((e=>e.skuId===c));if(e)return e}const h=l&&!!g?.some((e=>e.stockQuantity<u));return a()(g,["normalPrice",e=>h&&e.stockQuantity||0,e=>e.normalLinePrice||0,e=>e.stockQuantity||0,"skuId"],["asc","asc","desc","asc","desc","asc"])?.[0]}function v(e){let{num:t,fromNum:n,operateType:r}=e;return 0===n&&t>0&&r!==i.oi.Add?i.oi.Add:n>0&&t>0&&r!==i.oi.Update?i.oi.Update:n>0&&0===t&&r!==i.oi.Delete?i.oi.Delete:r}function E(e,t){if("string"==typeof e&&"string"==typeof t){const[n,r]=e.split("?"),a=`${n}?${t}`;return r?`${a}&${r}`:a}return e}function x(e,t){let{successToastInfo:n,failToastInfo:r,onSuccessCb:a,onFailCb:s}=t;const o=(0,c.tb)(),i=document.createElement("textarea");let m,d;i.style.position="fixed",i.style.top="0",i.style.left="0",i.value=e,i.hasAttribute("readonly")||i.setAttribute("readonly",""),document.body.appendChild(i),o.system===l.IJ.IOS?(m=document.createRange(),m.selectNodeContents(i),d=window.getSelection(),d&&(d.removeAllRanges(),d.addRange(m)),i.setSelectionRange(0,999999)):i.select();try{if(!document.execCommand("copy"))throw new Error;a?a():u.A.success(n)}catch(e){s?s():u.A.success(r)}finally{document.body.removeChild(i)}}const I=e=>{if(!e)return null;const{customizedSnapshots:t}=e?.optCustomizedInfo||{};return t?.length?{customized_snapshot_info:JSON.stringify({snapshot_list:t.map((e=>{let{customizedSnapshotId:t,customizedNum:n}=e;return{customized_snapshot_id:t,customized_num:n}}))})}:null},_=(e,t)=>{(0,m.T)((()=>{if(e?.textRich?.length&&e?.action){const{action:n}=e.textRich.find((e=>!!e?.action))||{};n?.type&&n?.content?.popType&&(0,d.A)("SS-Price label double action",{fields:{data:JSON.stringify({...e,...t})}})}}),"")}},66622:function(e,t,n){"use strict";n.d(t,{Vm:function(){return i}});var r=n(33514),a=n(94971),s=n(95789),o=n(47739);function i(e){let{onClose:t=()=>{},onSuccess:n=()=>{},axiosHttp:i,loginScene:c,moduleConfig:l}=e;const u=()=>{d(),t?.()},m=(0,a.Ri)("region"),d=(0,s.A)(r.createElement(o.Ay,{modalVisible:!0,axiosHttp:i,onCloseClick:u,regionId:m,loginScene:c,onSuccess:async()=>{await(n?.()),u()},moduleConfig:l}))}},35870:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(33514),a=n(32485),s=n.n(a),o=n(58600),i=n.n(o);const c=e=>{const{className:t,style:n,children:a}=e;return r.createElement("div",{className:s()(i().align,t),style:n},a)}},3079:function(e,t,n){"use strict";n.d(t,{Zb:function(){return x}});var r=n(14242),a=(n(16280),n(33514)),s=n(32485),o=n.n(s),i=n(34477),c=n(30024),l=n(97582),u=n(67388);const m=a.forwardRef(((e,t)=>{const{t:n,i18n:s}=(0,l.B)("bec-fe.svg-icons-pc");return a.createElement(u.i,(0,r.A)({ref:t,fill:"#aaaaaa"},e,{path:["M528.2 53.8c15.3 5.1 27.3 17.1 32.4 32.4l91.7 275.4 290.2 2.1c28.3 0.2 51 23.3 50.9 51.6-0.1 16.1-7.8 31.3-20.9 40.8l-233.6 172.3 87.8 276.7c8.5 27-6.4 55.7-33.4 64.3-15.4 4.9-32.2 2.2-45.2-7.2l-236.1-168.9-236.1 168.9c-23 16.5-55 11.2-71.4-11.8-9.4-13.1-12-29.9-7.2-45.3l87.8-276.7-233.6-172.3c-22.8-16.8-27.6-48.8-10.9-71.6 9.6-13 24.7-20.7 40.9-20.8l290.2-2.1 91.7-275.4c8.9-26.8 37.9-41.3 64.8-32.4z m84 363l-100.2-301-100.2 301-317.1 2.3 255.2 188.2-95.8 302.3 257.9-184.5 257.9 184.5-95.8-302.3 255.2-188.2-317.1-2.3z"],"aria-label":e["aria-label"]??(s.exists("aria-label.Kongxing13Px",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.Kongxing13Px"):void 0),rtlPath:[]}))}));m.supportRtl=!1;var d=m;const p=a.forwardRef(((e,t)=>{const{t:n,i18n:s}=(0,l.B)("bec-fe.svg-icons-pc");return a.createElement(u.i,(0,r.A)({ref:t,fill:"#aaaaaa"},e,{path:["M528.2 53.8c15.3 5.1 27.3 17.1 32.4 32.4l91.7 275.4 290.2 2.1c28.3 0.2 51 23.3 50.9 51.6-0.1 16.1-7.8 31.3-20.9 40.8l-233.6 172.3 87.8 276.7c8.5 27-6.4 55.7-33.4 64.3-15.4 4.9-32.2 2.2-45.2-7.2l-236.1-168.9-236.1 168.9c-23 16.5-55 11.2-71.4-11.8-9.4-13.1-12-29.9-7.2-45.3l87.8-276.7-233.6-172.3c-22.8-16.8-27.6-48.8-10.9-71.6 9.6-13 24.7-20.7 40.9-20.8l290.2-2.1 91.7-275.4c8.9-26.8 37.9-41.3 64.8-32.4z m-13.5 40.5c-4.5-1.5-9.3 0.9-10.8 5.4l-101.3 304.4-320.8 2.3c-2.7 0-5.2 1.3-6.8 3.4-2.8 3.8-2 9.1 1.8 12l258.2 190.4-97 305.8c-0.8 2.6-0.4 5.4 1.2 7.5 2.7 3.8 8.1 4.7 11.9 2l260.9-186.7 260.9 186.7c2.2 1.6 5 2 7.5 1.2 4.5-1.4 7-6.2 5.6-10.7l-97-305.8 258.2-190.4c2.2-1.6 3.4-4.1 3.5-6.8 0-4.7-3.8-8.6-8.5-8.6l-320.8-2.3-101.3-304.4c-0.8-2.6-2.9-4.6-5.4-5.4z"],"aria-label":e["aria-label"]??(s.exists("aria-label.Kongxing1Px",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.Kongxing1Px"):void 0),rtlPath:[]}))}));p.supportRtl=!1;var f=p,g=n(34933),h=n.n(g);const y=e=>{let{className:t,style:n,...s}=e;return a.createElement(c.A,(0,r.A)({alt:"","aria-hidden":!0},s,{className:t,style:n}))},v=e=>{let{className:t,style:n,blod:s,...o}=e;return s?a.createElement(d,(0,r.A)({alt:"","aria-hidden":!0},o,{className:t,style:n})):a.createElement(f,(0,r.A)({alt:"","aria-hidden":!0},o,{className:t,style:n}))},E=(0,a.memo)((e=>{const{starClass:t,isInput:n,width:r,index:s,inputHoverStar:i,onStarClick:c,mouseEnter:l,mouseLeave:u,boldStar:m,emptyStarCls:d,starStyle:p,emptyStarStyle:f,isHover:g,hoverStyle:E,activeStarClass:x,activeStyle:I}=e;return a.createElement("div",{className:o()(h().starWrap,t,{[h().clickable]:n,[h().active]:n&&r,[h().isHover]:g,[h().inputHoverStar]:i}),key:s,onClick:()=>c(s+1),onMouseEnter:()=>l(s),onMouseLeave:()=>u(s)},a.createElement(v,{blod:m,className:o()(h().starImg,h().empty,d),style:{...p,...f,...g?E:{}},"aria-hidden":!0}),a.createElement("div",{className:h().lightStarWrap,style:{width:`${g?100:r}%`}},a.createElement(y,{className:o()(h().starImg,h().star,x,{[h().hoverStar]:g}),style:{...p,...g?E:{},...r?I:null},"aria-hidden":!0})))})),x=(0,a.memo)((e=>{let{cur:t,total:n=5,className:r,size:s="24",starClick:c,mouseEnterCb:l,mouseLeaveCb:u,isInput:m,hoverStyle:d={},boldStar:p,starClass:f,activeStarClass:g,commentNumTips:y,activeStyle:v,numCls:x,wrapStyle:I,defaultHoverIndex:_=-1,emptyStarCls:k,emptyStarStyle:b}=e;const[w,S]=(0,a.useState)(_-1),[C,N]=(0,a.useState)(t),T=(m?C:t)||0;(0,a.useEffect)((()=>{(isNaN(m?C:t)||isNaN(n))&&(0,i.fL)(new Error("Rate isNaN error"),{cur:T,total:n,size:s})}),[m,C,t,n]),(0,a.useEffect)((()=>{m&&"number"==typeof t&&N(t)}),[t]);const R=(0,a.useCallback)((e=>{m&&(S(e),l?.(e))}),[m]),A=(0,a.useCallback)((e=>{if(m){if(e<=C)return N(Math.max(e-1,1));N(e),c?.(e)}}),[m,C]),z=(0,a.useCallback)((e=>{m&&(S(-1),u?.(e))}),[m]),M=(0,a.useMemo)((()=>({width:s,height:s,fontSize:s})),[s]),L=(0,a.useMemo)((()=>new Array(n).fill(0)),[n]);return a.createElement("div",{className:o()(h().wrap,r),role:"link",style:{lineHeight:`${s}px`,...I}},a.createElement("div",{className:o()(h().starListWrap,w>=0?h().hoverWrap:"")},L.map(((e,t)=>{const n=t<=w&&m;let r=t+1<T?100:T-t>0?100*(T-t):0;const s=t>=w&&r||t<=w&&!r;return t>T&&(r=0),a.createElement(E,{starClass:f,isInput:!!m,width:r,index:t,key:t,inputHoverStar:!!s,onStarClick:A,mouseEnter:R,mouseLeave:z,boldStar:p,emptyStarCls:k,starStyle:M,emptyStarStyle:b,isHover:!!n,hoverStyle:d,activeStarClass:g,activeStyle:v})}))),y?a.createElement("div",{className:o()(h().num,x)},y):null)}))},15193:function(e,t,n){"use strict";function r(e,t){try{return e()}catch(e){return t}}n.d(t,{T:function(){return r}})}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/modernjs/8315_990a746d5d442396ea4e.js.map